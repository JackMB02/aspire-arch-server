<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aspire Design Lab - Admin Dashboard</title>
    
    <!-- External Resources -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Helvetica+Neue:wght@200;300;400&display=swap">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="admin.css">
    
    <style>
        /* File Upload & Preview Styles */
        .file-upload-container {
            border: 2px dashed var(--border-light);
            border-radius: 8px;
            padding: 2rem;
            text-align: center;
            background: var(--bg-light);
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .file-upload-container:hover {
            border-color: var(--accent-light);
            background: rgba(74, 144, 226, 0.05);
        }
        
        .file-upload-container.dragover {
            border-color: var(--accent-light);
            background: rgba(74, 144, 226, 0.1);
        }
        
        .file-input {
            display: none;
        }
        
        .upload-icon {
            font-size: 3rem;
            color: var(--accent-light);
            margin-bottom: 1rem;
        }
        
        .image-preview {
            margin-top: 1rem;
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
        }
        
        .preview-item {
            position: relative;
            width: 120px;
            height: 120px;
            border-radius: 8px;
            overflow: hidden;
            border: 2px solid var(--border-light);
        }
        
        .preview-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .preview-item .remove-btn {
            position: absolute;
            top: 5px;
            right: 5px;
            background: rgba(255, 0, 0, 0.8);
            color: white;
            border: none;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
        }
        
        .upload-progress {
            margin-top: 1rem;
        }
        
        .progress-bar {
            width: 100%;
            height: 6px;
            background: var(--border-light);
            border-radius: 3px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: var(--accent-light);
            transition: width 0.3s ease;
        }
        
        .upload-status {
            margin-top: 0.5rem;
            font-size: 0.9rem;
            color: var(--text-muted);
        }
        
        .gallery-upload {
            margin-top: 1rem;
        }
        
        .gallery-preview {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 0.5rem;
            margin-top: 1rem;
        }
        
        .uploading {
            opacity: 0.7;
            pointer-events: none;
        }
        
        /* Sector & Badge Styles */
        .sector-badge {
            background: #e3f2fd;
            color: #1976d2;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 500;
            display: inline-block;
            margin-left: 8px;
        }

        /* News & Events Specific Styles */
        .news-badge {
            background: var(--accent-light);
            color: white;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 500;
            display: inline-block;
            margin-left: 8px;
        }
        
        .event-badge {
            background: var(--secondary-dark);
            color: white;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 500;
            display: inline-block;
            margin-left: 8px;
        }
        
        .date-display {
            color: var(--text-muted);
            font-size: 0.9rem;
            margin-top: 0.5rem;
        }
        
        .location-display {
            color: var(--accent-light);
            font-size: 0.9rem;
            margin-top: 0.25rem;
        }

        /* Modal Styles */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: 1rem;
        }
        
        .modal .card {
            max-width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .hidden {
            display: none !important;
        }

        /* Media Gallery Filter Buttons */
        .media-filter-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
            align-items: center;
        }
        
        .filter-btn {
            padding: 8px 16px;
            border: 1px solid var(--border-light);
            background: var(--bg-light);
            color: var(--text-primary);
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            white-space: nowrap;
        }
        
        .filter-btn:hover {
            background: var(--accent-light);
            color: white;
            border-color: var(--accent-light);
        }
        
        .filter-btn.active {
            background: var(--accent-light);
            color: white;
            border-color: var(--accent-light);
        }

        /* Enhanced Login Screen Styles */
        #loginScreen {
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            background: linear-gradient(135deg, var(--accent-light) 0%, var(--secondary-dark) 100%);
            padding: 2rem;
        }
        
        #loginCard {
            width: 100%;
            max-width: 420px;
            background: white;
            border-radius: 16px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            padding: 2.5rem;
            position: relative;
            overflow: hidden;
        }
        
        #loginCard::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, var(--accent-light) 0%, var(--secondary-dark) 100%);
        }
        
        .login-header {
            text-align: center;
            margin-bottom: 2rem;
        }
        
        .login-header h1 {
            font-weight: 300;
            color: var(--accent-light);
            margin-bottom: 0.5rem;
            font-size: 2.2rem;
        }
        
        .login-header p {
            color: var(--text-muted);
            font-size: 1rem;
        }
        
        .login-title {
            text-align: center;
            margin-bottom: 1.5rem;
            font-weight: 400;
            color: var(--text-primary);
            font-size: 1.5rem;
        }
        
        .login-buttons {
            justify-content: center;
        }
        
        .login-message {
            text-align: center;
            margin-top: 1rem;
            padding: 0.75rem;
            border-radius: 8px;
            font-size: 0.9rem;
        }
        
        .text-warning {
            color: #ff9800;
        }
        
        .text-danger {
            color: #f44336;
        }
        
        .text-success {
            color: #4caf50;
        }
        
        /* Status Badges */
        .status-badge {
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 500;
            display: inline-block;
        }
        
        .status-new {
            background: #e3f2fd;
            color: #1976d2;
        }
        
        .status-read {
            background: #e8f5e9;
            color: #4caf50;
        }
        
        .status-replied {
            background: #fff3e0;
            color: #ff9800;
        }
        
        .status-archived {
            background: #f5f5f5;
            color: #757575;
        }
        
        /* Submission Items */
        .submission-item {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            border: 1px solid var(--border-light);
        }
        
        .submission-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1rem;
        }
        
        .submission-meta {
            display: flex;
            gap: 0.5rem;
            align-items: center;
            margin-top: 1rem;
        }
        
        /* Value Items */
        .value-item {
            margin-bottom: 1rem;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 8px;
            border: 1px solid var(--border-light);
        }
        
        /* Toggle Switch */
        .toggle-switch {
            display: flex;
            align-items: center;
            gap: 1rem;
            cursor: pointer;
        }
        
        .toggle-slider {
            position: relative;
            width: 50px;
            height: 24px;
            background-color: #ccc;
            border-radius: 24px;
            transition: background-color 0.3s;
        }
        
        .toggle-slider::before {
            content: '';
            position: absolute;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background-color: white;
            top: 2px;
            left: 2px;
            transition: transform 0.3s;
        }
        
        .toggle-switch input {
            display: none;
        }
        
        .toggle-switch input:checked + .toggle-slider {
            background-color: var(--accent-light);
        }
        
        .toggle-switch input:checked + .toggle-slider::before {
            transform: translateX(26px);
        }
    </style>
</head>
<body>
    <!-- Login Screen -->
    <div id="loginScreen">
        <div class="card" id="loginCard">
            <div class="login-header">
                <h1>Aspire Design Lab</h1>
                <p>Admin Dashboard</p>
            </div>
            
            <h3 class="login-title">Login to Dashboard</h3>
            
            <div class="input-group">
                <label for="username">Username</label>
                <input id="username" placeholder="Enter username" value="admin">
            </div>
            
            <div class="input-group">
                <label for="password">Password</label>
                <input id="password" placeholder="Enter password" type="password" value="changeme">
            </div>
            
            <div class="button-group login-buttons">
                <button id="loginBtn" class="btn-primary">
                    <i class="fas fa-sign-in-alt"></i> Login
                </button>
            </div>
            
            <div id="loginMsg" class="login-message"></div>
        </div>
    </div>

    <!-- Dashboard -->
    <div id="dashboard" class="hidden">
        <div class="dashboard-container">
            <!-- Sidebar -->
            <div class="sidebar" id="sidebar">
                <div class="sidebar-header">
                    <h1>Aspire Design Lab</h1>
                    <div class="subtitle">Admin Dashboard</div>
                </div>
                
                <div class="nav-menu">
                    <div class="nav-item active" data-section="dashboard">
                        <i class="fas fa-chart-line"></i>
                        <span>Dashboard</span>
                    </div>
                    
                    <div class="nav-item" data-section="contact">
                        <i class="fas fa-envelope"></i>
                        <span>Contact Management</span>
                    </div>
                    
                    <div class="nav-item" data-section="getinvolved">
                        <i class="fas fa-handshake"></i>
                        <span>Get Involved</span>
                    </div>
                    
                    <div class="nav-item" data-section="media">
                        <i class="fas fa-images"></i>
                        <span>Media Library</span>
                    </div>
                    
                    <div class="nav-item" data-section="education">
                        <i class="fas fa-graduation-cap"></i>
                        <span>Education</span>
                    </div>
                    
                    <div class="nav-item" data-section="design">
                        <i class="fas fa-pencil-ruler"></i>
                        <span>Design Projects</span>
                    </div>
                    
                    <div class="nav-item" data-section="newsevents">
                        <i class="fas fa-newspaper"></i>
                        <span>News & Events</span>
                    </div>
                    
                    <div class="nav-item" data-section="research">
                        <i class="fas fa-lightbulb"></i>
                        <span>Research Insights</span>
                    </div>
                    
                    <div class="nav-item" data-section="colleagues">
                        <i class="fas fa-university"></i>
                        <span>Architecture Colleagues</span>
                    </div>
                    
                    <div class="nav-item" data-section="settings">
                        <i class="fas fa-cog"></i>
                        <span>Settings</span>
                    </div>
                </div>
            </div>

            <!-- Main Content -->
            <div class="main-content">
                <!-- Header -->
                <div class="header">
                    <div class="header-left">
                        <button class="mobile-menu-btn" id="mobileMenuBtn">
                            <i class="fas fa-bars"></i>
                        </button>
                        <h2 id="pageTitle">Dashboard</h2>
                    </div>
                    
                    <div class="header-right">
                        <div class="user-info">
                            <div class="user-avatar">
                                <i class="fas fa-user"></i>
                            </div>
                            <div class="user-details">
                                <div class="user-name">Admin User</div>
                                <div class="user-role">Administrator</div>
                            </div>
                        </div>
                        
                        <button id="logoutBtn" class="btn-secondary">
                            <i class="fas fa-sign-out-alt"></i> Logout
                        </button>
                    </div>
                </div>

                <!-- Content Sections -->
                <div class="content">
                    <!-- Dashboard Section -->
                    <div id="dashboardSection" class="section">
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-icon">
                                    <i class="fas fa-newspaper"></i>
                                </div>
                                <div class="stat-value" id="newsCount">0</div>
                                <div class="stat-label">News Items</div>
                            </div>
                            
                            <div class="stat-card">
                                <div class="stat-icon">
                                    <i class="fas fa-calendar-alt"></i>
                                </div>
                                <div class="stat-value" id="eventsCount">0</div>
                                <div class="stat-label">Events</div>
                            </div>
                            
                            <div class="stat-card">
                                <div class="stat-icon">
                                    <i class="fas fa-project-diagram"></i>
                                </div>
                                <div class="stat-value" id="projectCount">0</div>
                                <div class="stat-label">Projects</div>
                            </div>
                            
                            <div class="stat-card">
                                <div class="stat-icon">
                                    <i class="fas fa-lightbulb"></i>
                                </div>
                                <div class="stat-value" id="insightCount">0</div>
                                <div class="stat-label">Research Insights</div>
                            </div>
                            
                            <div class="stat-card">
                                <div class="stat-icon">
                                    <i class="fas fa-envelope"></i>
                                </div>
                                <div class="stat-value" id="contactCount">0</div>
                                <div class="stat-label">Contact Submissions</div>
                            </div>
                            
                            <div class="stat-card">
                                <div class="stat-icon">
                                    <i class="fas fa-graduation-cap"></i>
                                </div>
                                <div class="stat-value" id="workshopCount">0</div>
                                <div class="stat-label">Workshops</div>
                            </div>
                            
                            <div class="stat-card">
                                <div class="stat-icon">
                                    <i class="fas fa-book"></i>
                                </div>
                                <div class="stat-value" id="tutorialCount">0</div>
                                <div class="stat-label">Tutorials</div>
                            </div>
                            
                            <div class="stat-card">
                                <div class="stat-icon">
                                    <i class="fas fa-university"></i>
                                </div>
                                <div class="stat-value" id="colleaguesContactCount">0</div>
                                <div class="stat-label">Colleagues Contacts</div>
                            </div>
                            
                            <div class="stat-card">
                                <div class="stat-icon">
                                    <i class="fas fa-pencil-ruler"></i>
                                </div>
                                <div class="stat-value" id="designProjectsCount">0</div>
                                <div class="stat-label">Design Projects</div>
                            </div>
                            
                            <div class="stat-card">
                                <div class="stat-icon">
                                    <i class="fas fa-chart-bar"></i>
                                </div>
                                <div class="stat-value" id="researchArticlesCount">0</div>
                                <div class="stat-label">Research Articles</div>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title">Recent Activity</h3>
                            </div>
                            <div id="recentItems" class="items-grid">
                                <!-- Recent items will be loaded here -->
                            </div>
                        </div>
                    </div>

                    <!-- Contact Management Section -->
                    <div id="contactSection" class="section hidden">
                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title">Contact Form Submissions</h3>
                                <div class="button-group">
                                    <button id="refreshSubmissions" class="btn-secondary">
                                        <i class="fas fa-sync-alt"></i> Refresh
                                    </button>
                                </div>
                            </div>
                            
                            <div class="stats-row">
                                <div class="stat-mini-card">
                                    <div class="stat-mini-value" id="totalSubmissions">0</div>
                                    <div class="stat-mini-label">Total Submissions</div>
                                </div>
                                
                                <div class="stat-mini-card">
                                    <div class="stat-mini-value" id="newSubmissions">0</div>
                                    <div class="stat-mini-label">New</div>
                                </div>
                                
                                <div class="stat-mini-card">
                                    <div class="stat-mini-value" id="repliedSubmissions">0</div>
                                    <div class="stat-mini-label">Replied</div>
                                </div>
                                
                                <div class="stat-mini-card">
                                    <div class="stat-mini-value" id="recentSubmissions">0</div>
                                    <div class="stat-mini-label">Last 7 Days</div>
                                </div>
                            </div>
                            
                            <div id="submissionsList">
                                <!-- Submissions will be loaded here -->
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title">Contact Information</h3>
                            </div>
                            <div id="contactInfoList">
                                <!-- Contact info will be loaded here -->
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title">Email Settings</h3>
                            </div>
                            <div id="emailSettingsList">
                                <!-- Email settings will be loaded here -->
                            </div>
                        </div>
                    </div>

                    <!-- Get Involved Management Section -->
                    <div id="getinvolvedSection" class="section hidden">
                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title">Get Involved Management</h3>
                                <div class="button-group">
                                    <button id="refreshGetInvolved" class="btn-secondary">
                                        <i class="fas fa-sync-alt"></i> Refresh All
                                    </button>
                                </div>
                            </div>

                            <div class="get-involved-tabs">
                                <button class="get-involved-tab active" data-tab="membership">
                                    <i class="fas fa-users"></i> Membership Applications
                                </button>
                                <button class="get-involved-tab" data-tab="donations">
                                    <i class="fas fa-donate"></i> Donations
                                </button>
                                <button class="get-involved-tab" data-tab="feedback">
                                    <i class="fas fa-comment"></i> Feedback
                                </button>
                                <button class="get-involved-tab" data-tab="ideas">
                                    <i class="fas fa-lightbulb"></i> Ideas
                                </button>
                                <button class="get-involved-tab" data-tab="partnerships">
                                    <i class="fas fa-handshake"></i> Partnerships
                                </button>
                                <button class="get-involved-tab" data-tab="stories">
                                    <i class="fas fa-book"></i> Community Stories
                                </button>
                            </div>

                            <!-- Membership Applications -->
                            <div id="membershipTab" class="get-involved-content active">
                                <div class="card-header">
                                    <h4 class="card-title">Membership Applications</h4>
                                    <button onclick="loadMembershipApplications()" class="btn-secondary">
                                        <i class="fas fa-sync-alt"></i> Refresh
                                    </button>
                                </div>
                                <div id="membershipList" class="items-grid">
                                    <!-- Membership applications will be loaded here -->
                                </div>
                            </div>

                            <!-- Donations -->
                            <div id="donationsTab" class="get-involved-content">
                                <div class="card-header">
                                    <h4 class="card-title">Donations</h4>
                                    <button onclick="loadDonations()" class="btn-secondary">
                                        <i class="fas fa-sync-alt"></i> Refresh
                                    </button>
                                </div>
                                <div id="donationsList" class="items-grid">
                                    <!-- Donations will be loaded here -->
                                </div>
                            </div>

                            <!-- Feedback -->
                            <div id="feedbackTab" class="get-involved-content">
                                <div class="card-header">
                                    <h4 class="card-title">Feedback Submissions</h4>
                                    <button onclick="loadFeedback()" class="btn-secondary">
                                        <i class="fas fa-sync-alt"></i> Refresh
                                    </button>
                                </div>
                                <div id="feedbackList" class="items-grid">
                                    <!-- Feedback will be loaded here -->
                                </div>
                            </div>

                            <!-- Ideas -->
                            <div id="ideasTab" class="get-involved-content">
                                <div class="card-header">
                                    <h4 class="card-title">Idea Submissions</h4>
                                    <button onclick="loadIdeas()" class="btn-secondary">
                                        <i class="fas fa-sync-alt"></i> Refresh
                                    </button>
                                </div>
                                <div id="ideasList" class="items-grid">
                                    <!-- Ideas will be loaded here -->
                                </div>
                            </div>

                            <!-- Partnerships -->
                            <div id="partnershipsTab" class="get-involved-content">
                                <div class="card-header">
                                    <h4 class="card-title">Partnership Inquiries</h4>
                                    <button onclick="loadPartnerships()" class="btn-secondary">
                                        <i class="fas fa-sync-alt"></i> Refresh
                                    </button>
                                </div>
                                <div id="partnershipsList" class="items-grid">
                                    <!-- Partnerships will be loaded here -->
                                </div>
                            </div>

                            <!-- Community Stories -->
                            <div id="storiesTab" class="get-involved-content">
                                <div class="card-header">
                                    <h4 class="card-title">Community Stories</h4>
                                    <div class="button-group">
                                        <button onclick="loadStories()" class="btn-secondary">
                                            <i class="fas fa-sync-alt"></i> Refresh
                                        </button>
                                        <button onclick="showCreateStoryModal()" class="btn-primary">
                                            <i class="fas fa-plus"></i> Add Story
                                        </button>
                                    </div>
                                </div>
                                <div id="storiesList" class="items-grid">
                                    <!-- Stories will be loaded here -->
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Media Library Section -->
                    <div id="mediaSection" class="section hidden">
                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title">Media Library Management</h3>
                                <div class="button-group">
                                    <button id="refreshMedia" class="btn-secondary">
                                        <i class="fas fa-sync-alt"></i> Refresh All
                                    </button>
                                </div>
                            </div>

                            <!-- Media Stats -->
                            <div class="stats-row">
                                <div class="stat-mini-card">
                                    <div class="stat-mini-value" id="photosCount">0</div>
                                    <div class="stat-mini-label">Photos</div>
                                </div>
                                
                                <div class="stat-mini-card">
                                    <div class="stat-mini-value" id="videosCount">0</div>
                                    <div class="stat-mini-label">Videos</div>
                                </div>
                                
                                <div class="stat-mini-card">
                                    <div class="stat-mini-value" id="designsCount">0</div>
                                    <div class="stat-mini-label">Designs</div>
                                </div>
                                
                                <div class="stat-mini-card">
                                    <div class="stat-mini-value" id="testimonialsCount">0</div>
                                    <div class="stat-mini-label">Testimonials</div>
                                </div>
                            </div>

                            <!-- Media Tabs -->
                            <div class="get-involved-tabs">
                                <button class="get-involved-tab active" data-tab="photos">
                                    <i class="fas fa-camera"></i> Photos
                                </button>
                                <button class="get-involved-tab" data-tab="videos">
                                    <i class="fas fa-video"></i> Videos
                                </button>
                                <button class="get-involved-tab" data-tab="designs">
                                    <i class="fas fa-paint-brush"></i> Designs
                                </button>
                                <button class="get-involved-tab" data-tab="testimonials">
                                    <i class="fas fa-quote-left"></i> Testimonials
                                </button>
                            </div>

                            <!-- Photos Tab -->
                            <div id="photosTab" class="get-involved-content active">
                                <div class="card-header">
                                    <h4 class="card-title">Photo Albums Management</h4>
                                    <div class="button-group">
                                        <button onclick="loadPhotos()" class="btn-secondary">
                                            <i class="fas fa-sync-alt"></i> Refresh
                                        </button>
                                        <button onclick="showAddPhotoModal()" class="btn-primary">
                                            <i class="fas fa-plus"></i> Add Photo
                                        </button>
                                    </div>
                                </div>

                                <!-- Photo Categories - Inline Filter Buttons -->
                                <div class="media-filter-buttons">
                                    <button class="filter-btn active" data-category="All">All</button>
                                    <button class="filter-btn" data-category="Architecture">Architecture</button>
                                    <button class="filter-btn" data-category="Nature">Nature</button>
                                    <button class="filter-btn" data-category="Residential">Residential</button>
                                    <button class="filter-btn" data-category="Public">Public</button>
                                    <button class="filter-btn" data-category="Commercial">Commercial</button>
                                    <button class="filter-btn" data-category="Cultural">Cultural</button>
                                </div>

                                <div id="photosList" class="items-grid">
                                    <!-- Photos will be loaded here -->
                                </div>
                            </div>

                            <!-- Videos Tab -->
                            <div id="videosTab" class="get-involved-content">
                                <div class="card-header">
                                    <h4 class="card-title">Video Stories Management</h4>
                                    <div class="button-group">
                                        <button onclick="loadVideos()" class="btn-secondary">
                                            <i class="fas fa-sync-alt"></i> Refresh
                                        </button>
                                        <button onclick="showAddVideoModal()" class="btn-primary">
                                            <i class="fas fa-plus"></i> Add Video
                                        </button>
                                    </div>
                                </div>

                                <div id="videosList" class="items-grid">
                                    <!-- Videos will be loaded here -->
                                </div>
                            </div>

                            <!-- Designs Tab -->
                            <div id="designsTab" class="get-involved-content">
                                <div class="card-header">
                                    <h4 class="card-title">Design Visualizations Management</h4>
                                    <div class="button-group">
                                        <button onclick="loadDesigns()" class="btn-secondary">
                                            <i class="fas fa-sync-alt"></i> Refresh
                                        </button>
                                        <button onclick="showAddDesignModal()" class="btn-primary">
                                            <i class="fas fa-plus"></i> Add Design
                                        </button>
                                    </div>
                                </div>

                                <div id="designsList" class="items-grid">
                                    <!-- Designs will be loaded here -->
                                </div>
                            </div>

                            <!-- Testimonials Tab -->
                            <div id="testimonialsTab" class="get-involved-content">
                                <div class="card-header">
                                    <h4 class="card-title">Community Testimonials Management</h4>
                                    <div class="button-group">
                                        <button onclick="loadTestimonials()" class="btn-secondary">
                                            <i class="fas fa-sync-alt"></i> Refresh
                                        </button>
                                        <button onclick="showAddTestimonialModal()" class="btn-primary">
                                            <i class="fas fa-plus"></i> Add Testimonial
                                        </button>
                                    </div>
                                </div>

                                <div id="testimonialsList" class="items-grid">
                                    <!-- Testimonials will be loaded here -->
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Education Management Section -->
                    <div id="educationSection" class="section hidden">
                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title">Education Management</h3>
                                <div class="button-group">
                                    <button id="refreshEducation" class="btn-secondary">
                                        <i class="fas fa-sync-alt"></i> Refresh All
                                    </button>
                                </div>
                            </div>

                            <!-- Education Stats -->
                            <div class="stats-row">
                                <div class="stat-mini-card">
                                    <div class="stat-mini-value" id="workshopsCount">0</div>
                                    <div class="stat-mini-label">Workshops</div>
                                </div>
                                
                                <div class="stat-mini-card">
                                    <div class="stat-mini-value" id="tutorialsCount">0</div>
                                    <div class="stat-mini-label">Tutorials</div>
                                </div>
                                
                                <div class="stat-mini-card">
                                    <div class="stat-mini-value" id="exhibitionsCount">0</div>
                                    <div class="stat-mini-label">Exhibitions</div>
                                </div>
                                
                                <div class="stat-mini-card">
                                    <div class="stat-mini-value" id="totalEnrolled">0</div>
                                    <div class="stat-mini-label">Total Enrolled</div>
                                </div>
                            </div>

                            <!-- Education Tabs -->
                            <div class="get-involved-tabs">
                                <button class="get-involved-tab active" data-tab="workshops">
                                    <i class="fas fa-chalkboard-teacher"></i> Workshops
                                </button>
                                <button class="get-involved-tab" data-tab="tutorials">
                                    <i class="fas fa-book"></i> Tutorials
                                </button>
                                <button class="get-involved-tab" data-tab="exhibitions">
                                    <i class="fas fa-palette"></i> Exhibitions
                                </button>
                            </div>

                            <!-- Workshops Tab -->
                            <div id="workshopsTab" class="get-involved-content active">
                                <div class="card-header">
                                    <h4 class="card-title">Workshops Management</h4>
                                    <div class="button-group">
                                        <button onclick="loadWorkshops()" class="btn-secondary">
                                            <i class="fas fa-sync-alt"></i> Refresh
                                        </button>
                                        <button onclick="showAddWorkshopModal()" class="btn-primary">
                                            <i class="fas fa-plus"></i> Add Workshop
                                        </button>
                                    </div>
                                </div>

                                <div id="workshopsList" class="items-grid">
                                    <!-- Workshops will be loaded here -->
                                </div>
                            </div>

                            <!-- Tutorials Tab -->
                            <div id="tutorialsTab" class="get-involved-content">
                                <div class="card-header">
                                    <h4 class="card-title">Tutorials Management</h4>
                                    <div class="button-group">
                                        <button onclick="loadTutorials()" class="btn-secondary">
                                            <i class="fas fa-sync-alt"></i> Refresh
                                        </button>
                                        <button onclick="showAddTutorialModal()" class="btn-primary">
                                            <i class="fas fa-plus"></i> Add Tutorial
                                        </button>
                                    </div>
                                </div>

                                <div id="tutorialsList" class="items-grid">
                                    <!-- Tutorials will be loaded here -->
                                </div>
                            </div>

                            <!-- Exhibitions Tab -->
                            <div id="exhibitionsTab" class="get-involved-content">
                                <div class="card-header">
                                    <h4 class="card-title">Exhibitions Management</h4>
                                    <div class="button-group">
                                        <button onclick="loadExhibitions()" class="btn-secondary">
                                            <i class="fas fa-sync-alt"></i> Refresh
                                        </button>
                                        <button onclick="showAddExhibitionModal()" class="btn-primary">
                                            <i class="fas fa-plus"></i> Add Exhibition
                                        </button>
                                    </div>
                                </div>

                                <div id="exhibitionsList" class="items-grid">
                                    <!-- Exhibitions will be loaded here -->
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Design Projects Management Section -->
                    <div id="designSection" class="section hidden">
                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title">Design Projects Management</h3>
                                <div class="button-group">
                                    <button id="refreshDesign" class="btn-secondary">
                                        <i class="fas fa-sync-alt"></i> Refresh All
                                    </button>
                                </div>
                            </div>

                            <!-- Design Projects Stats -->
                            <div class="stats-row">
                                <div class="stat-mini-card">
                                    <div class="stat-mini-value" id="designTotalProjects">0</div>
                                    <div class="stat-mini-label">Total Projects</div>
                                </div>
                                
                                <div class="stat-mini-card">
                                    <div class="stat-mini-value" id="designAcademicProjects">0</div>
                                    <div class="stat-mini-label">Academic Projects</div>
                                </div>
                                
                                <div class="stat-mini-card">
                                    <div class="stat-mini-value" id="designProfessionalProjects">0</div>
                                    <div class="stat-mini-label">Professional Projects</div>
                                </div>
                                
                                <div class="stat-mini-card">
                                    <div class="stat-mini-value" id="designCompetitionProjects">0</div>
                                    <div class="stat-mini-label">Competition Projects</div>
                                </div>
                            </div>

                            <!-- Design Projects Tabs -->
                            <div class="get-involved-tabs">
                                <button class="get-involved-tab active" data-tab="design-all">
                                    <i class="fas fa-th"></i> All Projects
                                </button>
                                <button class="get-involved-tab" data-tab="design-academic">
                                    <i class="fas fa-graduation-cap"></i> Academic
                                </button>
                                <button class="get-involved-tab" data-tab="design-professional">
                                    <i class="fas fa-briefcase"></i> Professional
                                </button>
                                <button class="get-involved-tab" data-tab="design-competition">
                                    <i class="fas fa-trophy"></i> Competition
                                </button>
                            </div>

                            <!-- All Projects Tab -->
                            <div id="design-allTab" class="get-involved-content active">
                                <div class="card-header">
                                    <h4 class="card-title">All Design Projects</h4>
                                    <div class="button-group">
                                        <button onclick="loadDesignProjects()" class="btn-secondary">
                                            <i class="fas fa-sync-alt"></i> Refresh
                                        </button>
                                        <button onclick="showAddDesignProjectModal()" class="btn-primary">
                                            <i class="fas fa-plus"></i> Add Project
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="filter-section">
                                    <div class="input-group">
                                        <label for="sectorFilter">Filter by Sector:</label>
                                        <select id="sectorFilter" onchange="filterDesignProjectsBySector()">
                                            <option value="">All Sectors</option>
                                            <option value="residential">Residential Architecture</option>
                                            <option value="interior">Interior Design</option>
                                            <option value="refurbishment">Refurbishment</option>
                                            <option value="cultural">Cultural Architecture</option>
                                            <option value="commercial">Commercial & Offices</option>
                                            <option value="hospitality">Hospitality Architecture</option>
                                            <option value="public">Public Architecture</option>
                                            <option value="healthcare">Healthcare Architecture</option>
                                            <option value="educational">Educational Architecture</option>
                                            <option value="sports">Sports Architecture</option>
                                            <option value="religious">Religious Architecture</option>
                                            <option value="industrial">Industrial & Infrastructure</option>
                                            <option value="landscape">Landscape & Urbanism</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <div id="designProjectsList" class="items-grid">
                                    <!-- Design projects will be loaded here -->
                                </div>
                            </div>

                            <!-- Academic Projects Tab -->
                            <div id="design-academicTab" class="get-involved-content">
                                <div class="card-header">
                                    <h4 class="card-title">Academic Design Projects</h4>
                                    <div class="button-group">
                                        <button onclick="loadAcademicProjects()" class="btn-secondary">
                                            <i class="fas fa-sync-alt"></i> Refresh
                                        </button>
                                        <button onclick="showAddDesignProjectModal('academic')" class="btn-primary">
                                            <i class="fas fa-plus"></i> Add Academic Project
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="filter-section">
                                    <div class="input-group">
                                        <label for="academicSectorFilter">Filter by Sector:</label>
                                        <select id="academicSectorFilter" onchange="filterAcademicProjectsBySector()">
                                            <option value="">All Sectors</option>
                                            <option value="residential">Residential Architecture</option>
                                            <option value="interior">Interior Design</option>
                                            <option value="refurbishment">Refurbishment</option>
                                            <option value="cultural">Cultural Architecture</option>
                                            <option value="commercial">Commercial & Offices</option>
                                            <option value="hospitality">Hospitality Architecture</option>
                                            <option value="public">Public Architecture</option>
                                            <option value="healthcare">Healthcare Architecture</option>
                                            <option value="educational">Educational Architecture</option>
                                            <option value="sports">Sports Architecture</option>
                                            <option value="religious">Religious Architecture</option>
                                            <option value="industrial">Industrial & Infrastructure</option>
                                            <option value="landscape">Landscape & Urbanism</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <div id="academicProjectsList" class="items-grid">
                                    <!-- Academic projects will be loaded here -->
                                </div>
                            </div>

                            <!-- Professional Projects Tab -->
                            <div id="design-professionalTab" class="get-involved-content">
                                <div class="card-header">
                                    <h4 class="card-title">Professional Design Projects</h4>
                                    <div class="button-group">
                                        <button onclick="loadProfessionalProjects()" class="btn-secondary">
                                            <i class="fas fa-sync-alt"></i> Refresh
                                        </button>
                                        <button onclick="showAddDesignProjectModal('professional')" class="btn-primary">
                                            <i class="fas fa-plus"></i> Add Professional Project
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="filter-section">
                                    <div class="input-group">
                                        <label for="professionalSectorFilter">Filter by Sector:</label>
                                        <select id="professionalSectorFilter" onchange="filterProfessionalProjectsBySector()">
                                            <option value="">All Sectors</option>
                                            <option value="residential">Residential Architecture</option>
                                            <option value="interior">Interior Design</option>
                                            <option value="refurbishment">Refurbishment</option>
                                            <option value="cultural">Cultural Architecture</option>
                                            <option value="commercial">Commercial & Offices</option>
                                            <option value="hospitality">Hospitality Architecture</option>
                                            <option value="public">Public Architecture</option>
                                            <option value="healthcare">Healthcare Architecture</option>
                                            <option value="educational">Educational Architecture</option>
                                            <option value="sports">Sports Architecture</option>
                                            <option value="religious">Religious Architecture</option>
                                            <option value="industrial">Industrial & Infrastructure</option>
                                            <option value="landscape">Landscape & Urbanism</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <div id="professionalProjectsList" class="items-grid">
                                    <!-- Professional projects will be loaded here -->
                                </div>
                            </div>

                            <!-- Competition Projects Tab -->
                            <div id="design-competitionTab" class="get-involved-content">
                                <div class="card-header">
                                    <h4 class="card-title">Competition Design Projects</h4>
                                    <div class="button-group">
                                        <button onclick="loadCompetitionProjects()" class="btn-secondary">
                                            <i class="fas fa-sync-alt"></i> Refresh
                                        </button>
                                        <button onclick="showAddDesignProjectModal('competition')" class="btn-primary">
                                            <i class="fas fa-plus"></i> Add Competition Project
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="filter-section">
                                    <div class="input-group">
                                        <label for="competitionSectorFilter">Filter by Sector:</label>
                                        <select id="competitionSectorFilter" onchange="filterCompetitionProjectsBySector()">
                                            <option value="">All Sectors</option>
                                            <option value="residential">Residential Architecture</option>
                                            <option value="interior">Interior Design</option>
                                            <option value="refurbishment">Refurbishment</option>
                                            <option value="cultural">Cultural Architecture</option>
                                            <option value="commercial">Commercial & Offices</option>
                                            <option value="hospitality">Hospitality Architecture</option>
                                            <option value="public">Public Architecture</option>
                                            <option value="healthcare">Healthcare Architecture</option>
                                            <option value="educational">Educational Architecture</option>
                                            <option value="sports">Sports Architecture</option>
                                            <option value="religious">Religious Architecture</option>
                                            <option value="industrial">Industrial & Infrastructure</option>
                                            <option value="landscape">Landscape & Urbanism</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <div id="competitionProjectsList" class="items-grid">
                                    <!-- Competition projects will be loaded here -->
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- News & Events Management Section -->
                    <div id="newseventsSection" class="section hidden">
                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title">News & Events Management</h3>
                                <div class="button-group">
                                    <button id="refreshNewsEvents" class="btn-secondary">
                                        <i class="fas fa-sync-alt"></i> Refresh All
                                    </button>
                                </div>
                            </div>

                            <!-- News & Events Stats -->
                            <div class="stats-row">
                                <div class="stat-mini-card">
                                    <div class="stat-mini-value" id="newsTotal">0</div>
                                    <div class="stat-mini-label">Total News</div>
                                </div>
                                
                                <div class="stat-mini-card">
                                    <div class="stat-mini-value" id="eventsTotal">0</div>
                                    <div class="stat-mini-label">Total Events</div>
                                </div>
                                
                                <div class="stat-mini-card">
                                    <div class="stat-mini-value" id="newsFeatured">0</div>
                                    <div class="stat-mini-label">Featured News</div>
                                </div>
                                
                                <div class="stat-mini-card">
                                    <div class="stat-mini-value" id="eventsFeatured">0</div>
                                    <div class="stat-mini-label">Featured Events</div>
                                </div>
                            </div>

                            <!-- News & Events Tabs -->
                            <div class="get-involved-tabs">
                                <button class="get-involved-tab active" data-tab="newsevents-all">
                                    <i class="fas fa-th"></i> All
                                </button>
                                <button class="get-involved-tab" data-tab="newsevents-news">
                                    <i class="fas fa-newspaper"></i> News
                                </button>
                                <button class="get-involved-tab" data-tab="newsevents-events">
                                    <i class="fas fa-calendar-alt"></i> Events
                                </button>
                            </div>

                            <!-- All News & Events Tab -->
                            <div id="newsevents-allTab" class="get-involved-content active">
                                <div class="card-header">
                                    <h4 class="card-title">All News & Events</h4>
                                    <div class="button-group">
                                        <button onclick="loadAllNewsEvents()" class="btn-secondary">
                                            <i class="fas fa-sync-alt"></i> Refresh
                                        </button>
                                        <button onclick="showAddNewsModal()" class="btn-primary">
                                            <i class="fas fa-plus"></i> Add News
                                        </button>
                                        <button onclick="showAddEventModal()" class="btn-primary">
                                            <i class="fas fa-plus"></i> Add Event
                                        </button>
                                    </div>
                                </div>
                                <div id="allNewsEventsList" class="items-grid">
                                    <!-- All news and events will be loaded here -->
                                </div>
                            </div>

                            <!-- News Tab -->
                            <div id="newsevents-newsTab" class="get-involved-content">
                                <div class="card-header">
                                    <h4 class="card-title">News Articles</h4>
                                    <div class="button-group">
                                        <button onclick="loadNewsArticles()" class="btn-secondary">
                                            <i class="fas fa-sync-alt"></i> Refresh
                                        </button>
                                        <button onclick="showAddNewsModal()" class="btn-primary">
                                            <i class="fas fa-plus"></i> Add News
                                        </button>
                                    </div>
                                </div>
                                <div id="newsArticlesList" class="items-grid">
                                    <!-- News articles will be loaded here -->
                                </div>
                            </div>

                            <!-- Events Tab -->
                            <div id="newsevents-eventsTab" class="get-involved-content">
                                <div class="card-header">
                                    <h4 class="card-title">Events</h4>
                                    <div class="button-group">
                                        <button onclick="loadEvents()" class="btn-secondary">
                                            <i class="fas fa-sync-alt"></i> Refresh
                                        </button>
                                        <button onclick="showAddEventModal()" class="btn-primary">
                                            <i class="fas fa-plus"></i> Add Event
                                        </button>
                                    </div>
                                </div>
                                <div id="eventsList" class="items-grid">
                                    <!-- Events will be loaded here -->
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Research Insights Management Section -->
                    <div id="researchSection" class="section hidden">
                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title">Research Insights Management</h3>
                                <div class="button-group">
                                    <button id="refreshResearch" class="btn-secondary">
                                        <i class="fas fa-sync-alt"></i> Refresh All
                                    </button>
                                </div>
                            </div>

                            <!-- Research Insights Stats -->
                            <div class="stats-row">
                                <div class="stat-mini-card">
                                    <div class="stat-mini-value" id="researchTotalArticles">0</div>
                                    <div class="stat-mini-label">Total Articles</div>
                                </div>
                                
                                <div class="stat-mini-card">
                                    <div class="stat-mini-value" id="researchSustainable">0</div>
                                    <div class="stat-mini-label">Sustainable Design</div>
                                </div>
                                
                                <div class="stat-mini-card">
                                    <div class="stat-mini-value" id="researchClimate">0</div>
                                    <div class="stat-mini-label">Climate Resilience</div>
                                </div>
                                
                                <div class="stat-mini-card">
                                    <div class="stat-mini-value" id="researchSocial">0</div>
                                    <div class="stat-mini-label">Social Impact</div>
                                </div>
                                
                                <div class="stat-mini-card">
                                    <div class="stat-mini-value" id="researchFeatured">0</div>
                                    <div class="stat-mini-label">Featured</div>
                                </div>
                            </div>

                            <!-- Research Tabs -->
                            <div class="get-involved-tabs">
                                <button class="get-involved-tab active" data-tab="research-all">
                                    <i class="fas fa-th"></i> All Articles
                                </button>
                                <button class="get-involved-tab" data-tab="research-sustainable">
                                    <i class="fas fa-leaf"></i> Sustainable Design
                                </button>
                                <button class="get-involved-tab" data-tab="research-climate">
                                    <i class="fas fa-cloud-sun"></i> Climate Resilience
                                </button>
                                <button class="get-involved-tab" data-tab="research-social">
                                    <i class="fas fa-users"></i> Social Impact
                                </button>
                                <button class="get-involved-tab" data-tab="research-technological">
                                    <i class="fas fa-microchip"></i> Technological Innovation
                                </button>
                            </div>

                            <!-- All Articles Tab -->
                            <div id="research-allTab" class="get-involved-content active">
                                <div class="card-header">
                                    <h4 class="card-title">All Research Articles</h4>
                                    <div class="button-group">
                                        <button onclick="loadResearchArticles()" class="btn-secondary">
                                            <i class="fas fa-sync-alt"></i> Refresh
                                        </button>
                                        <button onclick="showAddResearchModal()" class="btn-primary">
                                            <i class="fas fa-plus"></i> Add Article
                                        </button>
                                    </div>
                                </div>
                                <div id="researchArticlesList" class="items-grid">
                                    <!-- Research articles will be loaded here -->
                                </div>
                            </div>

                            <!-- Sustainable Design Tab -->
                            <div id="research-sustainableTab" class="get-involved-content">
                                <div class="card-header">
                                    <h4 class="card-title">Sustainable Design Research</h4>
                                    <div class="button-group">
                                        <button onclick="loadSustainableResearch()" class="btn-secondary">
                                            <i class="fas fa-sync-alt"></i> Refresh
                                        </button>
                                        <button onclick="showAddResearchModal('sustainable')" class="btn-primary">
                                            <i class="fas fa-plus"></i> Add Sustainable Article
                                        </button>
                                    </div>
                                </div>
                                <div id="sustainableResearchList" class="items-grid">
                                    <!-- Sustainable research articles will be loaded here -->
                                </div>
                            </div>

                            <!-- Climate Resilience Tab -->
                            <div id="research-climateTab" class="get-involved-content">
                                <div class="card-header">
                                    <h4 class="card-title">Climate Resilience Research</h4>
                                    <div class="button-group">
                                        <button onclick="loadClimateResearch()" class="btn-secondary">
                                            <i class="fas fa-sync-alt"></i> Refresh
                                        </button>
                                        <button onclick="showAddResearchModal('climate')" class="btn-primary">
                                            <i class="fas fa-plus"></i> Add Climate Article
                                        </button>
                                    </div>
                                </div>
                                <div id="climateResearchList" class="items-grid">
                                    <!-- Climate research articles will be loaded here -->
                                </div>
                            </div>

                            <!-- Social Impact Tab -->
                            <div id="research-socialTab" class="get-involved-content">
                                <div class="card-header">
                                    <h4 class="card-title">Social Impact Research</h4>
                                    <div class="button-group">
                                        <button onclick="loadSocialResearch()" class="btn-secondary">
                                            <i class="fas fa-sync-alt"></i> Refresh
                                        </button>
                                        <button onclick="showAddResearchModal('social')" class="btn-primary">
                                            <i class="fas fa-plus"></i> Add Social Article
                                        </button>
                                    </div>
                                </div>
                                <div id="socialResearchList" class="items-grid">
                                    <!-- Social research articles will be loaded here -->
                                </div>
                            </div>

                            <!-- Technological Innovation Tab -->
                            <div id="research-technologicalTab" class="get-involved-content">
                                <div class="card-header">
                                    <h4 class="card-title">Technological Innovation Research</h4>
                                    <div class="button-group">
                                        <button onclick="loadTechnologicalResearch()" class="btn-secondary">
                                            <i class="fas fa-sync-alt"></i> Refresh
                                        </button>
                                        <button onclick="showAddResearchModal('technological')" class="btn-primary">
                                            <i class="fas fa-plus"></i> Add Tech Article
                                        </button>
                                    </div>
                                </div>
                                <div id="technologicalResearchList" class="items-grid">
                                    <!-- Technological research articles will be loaded here -->
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Architecture Colleagues Lab Management Section -->
                    <div id="colleaguesSection" class="section hidden">
                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title">Architecture Colleagues Lab Management</h3>
                                <div class="button-group">
                                    <button id="refreshColleagues" class="btn-secondary">
                                        <i class="fas fa-sync-alt"></i> Refresh All
                                    </button>
                                </div>
                            </div>

                            <!-- Colleagues Stats -->
                            <div class="stats-row">
                                <div class="stat-mini-card">
                                    <div class="stat-mini-value" id="colleaguesTotalContacts">0</div>
                                    <div class="stat-mini-label">Total Contacts</div>
                                </div>
                                
                                <div class="stat-mini-card">
                                    <div class="stat-mini-value" id="colleaguesTeamMembers">0</div>
                                    <div class="stat-mini-label">Team Members</div>
                                </div>
                                
                                <div class="stat-mini-card">
                                    <div class="stat-mini-value" id="colleaguesInitiatives">0</div>
                                    <div class="stat-mini-label">Initiatives</div>
                                </div>
                                
                                <div class="stat-mini-card">
                                    <div class="stat-mini-value" id="colleaguesNewContacts">0</div>
                                    <div class="stat-mini-label">New Contacts</div>
                                </div>
                            </div>

                            <!-- Colleagues Tabs -->
                            <div class="get-involved-tabs">
                                <button class="get-involved-tab active" data-tab="colleagues-contacts">
                                    <i class="fas fa-envelope"></i> Contact Submissions
                                </button>
                                <button class="get-involved-tab" data-tab="colleagues-team">
                                    <i class="fas fa-users"></i> Team Members
                                </button>
                                <button class="get-involved-tab" data-tab="colleagues-initiatives">
                                    <i class="fas fa-rocket"></i> Initiatives
                                </button>
                                <button class="get-involved-tab" data-tab="colleagues-mission">
                                    <i class="fas fa-bullseye"></i> Mission & Values
                                </button>
                            </div>

                            <!-- Contacts Tab -->
                            <div id="colleagues-contactsTab" class="get-involved-content active">
                                <div class="card-header">
                                    <h4 class="card-title">Contact Form Submissions</h4>
                                    <button onclick="loadColleaguesContacts()" class="btn-secondary">
                                        <i class="fas fa-sync-alt"></i> Refresh
                                    </button>
                                </div>
                                <div id="colleaguesContactsList" class="items-grid">
                                    <!-- Contact submissions will be loaded here -->
                                </div>
                            </div>

                            <!-- Team Tab -->
                            <div id="colleagues-teamTab" class="get-involved-content">
                                <div class="card-header">
                                    <h4 class="card-title">Team Members Management</h4>
                                    <div class="button-group">
                                        <button onclick="loadColleaguesTeam()" class="btn-secondary">
                                            <i class="fas fa-sync-alt"></i> Refresh
                                        </button>
                                        <button onclick="showAddTeamMemberModal()" class="btn-primary">
                                            <i class="fas fa-plus"></i> Add Team Member
                                        </button>
                                    </div>
                                </div>
                                <div id="colleaguesTeamList" class="items-grid">
                                    <!-- Team members will be loaded here -->
                                </div>
                            </div>

                            <!-- Initiatives Tab -->
                            <div id="colleagues-initiativesTab" class="get-involved-content">
                                <div class="card-header">
                                    <h4 class="card-title">Initiatives Management</h4>
                                    <div class="button-group">
                                        <button onclick="loadColleaguesInitiatives()" class="btn-secondary">
                                            <i class="fas fa-sync-alt"></i> Refresh
                                        </button>
                                        <button onclick="showAddInitiativeModal()" class="btn-primary">
                                            <i class="fas fa-plus"></i> Add Initiative
                                        </button>
                                    </div>
                                </div>
                                <div id="colleaguesInitiativesList" class="items-grid">
                                    <!-- Initiatives will be loaded here -->
                                </div>
                            </div>

                            <!-- Mission & Values Tab -->
                            <div id="colleagues-missionTab" class="get-involved-content">
                                <div class="card-header">
                                    <h4 class="card-title">Mission & Values Management</h4>
                                    <button onclick="loadColleaguesMission()" class="btn-secondary">
                                        <i class="fas fa-sync-alt"></i> Refresh
                                    </button>
                                </div>
                                <div id="colleaguesMissionContent">
                                    <!-- Mission and values will be loaded here -->
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Settings Section -->
                    <div id="settingsSection" class="section hidden">
                        <div class="card">
                            <h3 class="card-title">Settings</h3>
                            <p class="settings-placeholder">Settings panel coming soon...</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Mobile Overlay -->
    <div class="overlay" id="overlay"></div>

    <!-- ===== MODALS SECTION ===== -->

    <!-- News & Events Modals -->
    <!-- Add News Modal -->
    <div id="addNewsModal" class="modal hidden">
        <div class="card">
            <div class="card-header">
                <h3 class="card-title">Add News Article</h3>
                <button onclick="hideAddNewsModal()" class="btn-secondary">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <form id="addNewsForm">
                <div class="form-grid">
                    <div class="input-group full-width">
                        <label for="newsTitle">Title *</label>
                        <input id="newsTitle" type="text" required>
                    </div>
                    
                    <div class="input-group full-width">
                        <label for="newsExcerpt">Excerpt *</label>
                        <textarea id="newsExcerpt" required></textarea>
                    </div>
                    
                    <div class="input-group full-width">
                        <label for="newsContent">Content *</label>
                        <textarea id="newsContent" required></textarea>
                    </div>
                    
                    <div class="input-group">
                        <label for="newsCategory">Category</label>
                        <input id="newsCategory" type="text" placeholder="e.g., Announcement, Award">
                    </div>
                    
                    <div class="input-group">
                        <label for="newsAuthor">Author *</label>
                        <input id="newsAuthor" type="text" required>
                    </div>
                    
                    <div class="input-group">
                        <label for="newsDate">Date *</label>
                        <input id="newsDate" type="date" required>
                    </div>
                    
                    <div class="input-group">
                        <label for="newsReadTime">Read Time</label>
                        <input id="newsReadTime" type="text" placeholder="e.g., 3 min read">
                    </div>
                    
                    <!-- News Image Upload -->
                    <div class="input-group full-width">
                        <label for="newsImage">News Image</label>
                        <div class="file-upload-container" onclick="document.getElementById('newsImageInput').click()">
                            <div class="upload-icon">
                                <i class="fas fa-cloud-upload-alt"></i>
                            </div>
                            <h4>Upload News Image</h4>
                            <p>Click to browse or drag and drop</p>
                            <p class="upload-hint">Recommended: 1200x800px, max 5MB</p>
                            <input type="file" id="newsImageInput" class="file-input" accept="image/*" onchange="handleNewsImageUpload(event)">
                        </div>
                        <div id="newsImagePreview" class="image-preview"></div>
                        <input type="hidden" id="newsImage">
                    </div>

                    <div class="input-group">
                        <label class="toggle-switch">
                            <input type="checkbox" id="newsFeatured" checked>
                            <span class="toggle-slider"></span>
                            <span>Featured</span>
                        </label>
                    </div>
                    
                    <div class="input-group">
                        <label class="toggle-switch">
                            <input type="checkbox" id="newsPublished" checked>
                            <span class="toggle-slider"></span>
                            <span>Published</span>
                        </label>
                    </div>
                </div>
                
                <div class="button-group">
                    <button type="submit" class="btn-primary">
                        <i class="fas fa-save"></i> Add News
                    </button>
                    <button type="button" onclick="hideAddNewsModal()" class="btn-secondary">
                        <i class="fas fa-times"></i> Cancel
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Event Modal -->
    <div id="addEventModal" class="modal hidden">
        <div class="card">
            <div class="card-header">
                <h3 class="card-title">Add Event</h3>
                <button onclick="hideAddEventModal()" class="btn-secondary">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <form id="addEventForm">
                <div class="form-grid">
                    <div class="input-group full-width">
                        <label for="eventTitle">Title *</label>
                        <input id="eventTitle" type="text" required>
                    </div>
                    
                    <div class="input-group full-width">
                        <label for="eventDescription">Description *</label>
                        <textarea id="eventDescription" required></textarea>
                    </div>
                    
                    <div class="input-group full-width">
                        <label for="eventExcerpt">Excerpt *</label>
                        <textarea id="eventExcerpt" required></textarea>
                    </div>
                    
                    <div class="input-group">
                        <label for="eventDate">Event Date *</label>
                        <input id="eventDate" type="date" required>
                    </div>
                    
                    <div class="input-group">
                        <label for="eventTime">Event Time *</label>
                        <input id="eventTime" type="text" placeholder="e.g., 2:00 PM - 5:00 PM" required>
                    </div>
                    
                    <div class="input-group">
                        <label for="eventLocation">Location *</label>
                        <input id="eventLocation" type="text" required>
                    </div>
                    
                    <div class="input-group">
                        <label for="eventCategory">Category</label>
                        <input id="eventCategory" type="text" placeholder="e.g., Workshop, Conference">
                    </div>
                    
                    <div class="input-group">
                        <label for="eventAuthor">Author *</label>
                        <input id="eventAuthor" type="text" required>
                    </div>
                    
                    <div class="input-group">
                        <label for="eventReadTime">Read Time</label>
                        <input id="eventReadTime" type="text" placeholder="e.g., 2 min read">
                    </div>
                    
                    <!-- Event Image Upload -->
                    <div class="input-group full-width">
                        <label for="eventImage">Event Image</label>
                        <div class="file-upload-container" onclick="document.getElementById('eventImageInput').click()">
                            <div class="upload-icon">
                                <i class="fas fa-cloud-upload-alt"></i>
                            </div>
                            <h4>Upload Event Image</h4>
                            <p>Click to browse or drag and drop</p>
                            <p class="upload-hint">Recommended: 1200x800px, max 5MB</p>
                            <input type="file" id="eventImageInput" class="file-input" accept="image/*" onchange="handleEventImageUpload(event)">
                        </div>
                        <div id="eventImagePreview" class="image-preview"></div>
                        <input type="hidden" id="eventImage">
                    </div>

                    <div class="input-group">
                        <label class="toggle-switch">
                            <input type="checkbox" id="eventFeatured" checked>
                            <span class="toggle-slider"></span>
                            <span>Featured</span>
                        </label>
                    </div>
                    
                    <div class="input-group">
                        <label class="toggle-switch">
                            <input type="checkbox" id="eventPublished" checked>
                            <span class="toggle-slider"></span>
                            <span>Published</span>
                        </label>
                    </div>
                </div>
                
                <div class="button-group">
                    <button type="submit" class="btn-primary">
                        <i class="fas fa-save"></i> Add Event
                    </button>
                    <button type="button" onclick="hideAddEventModal()" class="btn-secondary">
                        <i class="fas fa-times"></i> Cancel
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Design Project Modals -->
    <!-- Add Design Project Modal -->
    <div id="addDesignProjectModal" class="modal hidden">
        <div class="card">
            <div class="card-header">
                <h3 class="card-title">Add Design Project</h3>
                <button onclick="hideAddDesignProjectModal()" class="btn-secondary">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <form id="addDesignProjectForm">
                <div class="form-grid">
                    <div class="input-group full-width">
                        <label for="designProjectTitle">Title *</label>
                        <input id="designProjectTitle" type="text" required>
                    </div>
                    
                    <div class="input-group full-width">
                        <label for="designProjectSummary">Summary *</label>
                        <textarea id="designProjectSummary" required></textarea>
                    </div>
                    
                    <div class="input-group full-width">
                        <label for="designProjectDescription">Description *</label>
                        <textarea id="designProjectDescription" required></textarea>
                    </div>
                    
                    <div class="input-group">
                        <label for="designProjectCategory">Category *</label>
                        <select id="designProjectCategory" required>
                            <option value="academic">Academic</option>
                            <option value="professional">Professional</option>
                            <option value="competition">Competition</option>
                        </select>
                    </div>
                    
                    <div class="input-group">
                        <label for="designProjectSector">Sector *</label>
                        <select id="designProjectSector" required>
                            <option value="">Select Sector</option>
                            <option value="residential">Residential Architecture</option>
                            <option value="interior">Interior Design</option>
                            <option value="refurbishment">Refurbishment</option>
                            <option value="cultural">Cultural Architecture</option>
                            <option value="commercial">Commercial & Offices</option>
                            <option value="hospitality">Hospitality Architecture</option>
                            <option value="public">Public Architecture</option>
                            <option value="healthcare">Healthcare Architecture</option>
                            <option value="educational">Educational Architecture</option>
                            <option value="sports">Sports Architecture</option>
                            <option value="religious">Religious Architecture</option>
                            <option value="industrial">Industrial & Infrastructure</option>
                            <option value="landscape">Landscape & Urbanism</option>
                        </select>
                    </div>
                    
                    <!-- Main Image Upload -->
                    <div class="input-group full-width">
                        <label for="designProjectMainImage">Main Image *</label>
                        <div class="file-upload-container" onclick="document.getElementById('mainImageInput').click()">
                            <div class="upload-icon">
                                <i class="fas fa-cloud-upload-alt"></i>
                            </div>
                            <h4>Upload Main Image</h4>
                            <p>Click to browse or drag and drop</p>
                            <p class="upload-hint">Recommended: 1200x800px, max 5MB</p>
                            <input type="file" id="mainImageInput" class="file-input" accept="image/*" onchange="handleMainImageUpload(event)">
                        </div>
                        <div id="mainImagePreview" class="image-preview"></div>
                        <input type="hidden" id="designProjectMainImage" required>
                    </div>

                    <!-- Gallery Images Upload -->
                    <div class="input-group full-width">
                        <label for="designProjectGalleryImages">Gallery Images</label>
                        <div class="file-upload-container" onclick="document.getElementById('galleryImagesInput').click()">
                            <div class="upload-icon">
                                <i class="fas fa-images"></i>
                            </div>
                            <h4>Upload Gallery Images</h4>
                            <p>Click to browse or drag and drop multiple images</p>
                            <p class="upload-hint">Max 10 images, 5MB each</p>
                            <input type="file" id="galleryImagesInput" class="file-input" accept="image/*" multiple onchange="handleGalleryImagesUpload(event)">
                        </div>
                        <div id="galleryImagesPreview" class="gallery-preview"></div>
                        <input type="hidden" id="designProjectGalleryImages">
                    </div>

                    <div class="input-group">
                        <label for="designProjectDisplayOrder">Display Order</label>
                        <input id="designProjectDisplayOrder" type="number" min="0" value="0">
                    </div>
                    
                    <div class="input-group">
                        <label class="toggle-switch">
                            <input type="checkbox" id="designProjectFeatured" checked>
                            <span class="toggle-slider"></span>
                            <span>Featured</span>
                        </label>
                    </div>
                    
                    <div class="input-group">
                        <label class="toggle-switch">
                            <input type="checkbox" id="designProjectPublished" checked>
                            <span class="toggle-slider"></span>
                            <span>Published</span>
                        </label>
                    </div>
                </div>
                
                <div class="button-group">
                    <button type="submit" class="btn-primary">
                        <i class="fas fa-save"></i> Add Project
                    </button>
                    <button type="button" onclick="hideAddDesignProjectModal()" class="btn-secondary">
                        <i class="fas fa-times"></i> Cancel
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Research Article Modal -->
    <div id="addResearchModal" class="modal hidden">
        <div class="card">
            <div class="card-header">
                <h3 class="card-title">Add Research Article</h3>
                <button onclick="hideAddResearchModal()" class="btn-secondary">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <form id="addResearchForm">
                <div class="form-grid">
                    <div class="input-group full-width">
                        <label for="researchTitle">Title *</label>
                        <input id="researchTitle" type="text" required>
                    </div>
                    
                    <div class="input-group full-width">
                        <label for="researchAbstract">Abstract *</label>
                        <textarea id="researchAbstract" required placeholder="Brief summary of the research"></textarea>
                    </div>
                    
                    <div class="input-group full-width">
                        <label for="researchContent">Full Content *</label>
                        <textarea id="researchContent" required placeholder="Detailed research content"></textarea>
                    </div>
                    
                    <div class="input-group">
                        <label for="researchCategory">Category *</label>
                        <select id="researchCategory" required>
                            <option value="sustainable">Sustainable Design</option>
                            <option value="climate">Climate Resilience</option>
                            <option value="social">Social Impact</option>
                            <option value="technological">Technological Innovation</option>
                        </select>
                    </div>
                    
                    <div class="input-group">
                        <label for="researchAuthors">Authors *</label>
                        <input id="researchAuthors" type="text" required placeholder="John Doe, Jane Smith">
                    </div>
                    
                    <div class="input-group">
                        <label for="researchPublicationDate">Publication Date</label>
                        <input id="researchPublicationDate" type="date">
                    </div>
                    
                    <div class="input-group">
                        <label for="researchMainImage">Main Image URL</label>
                        <input id="researchMainImage" type="text" placeholder="/images/research/image.jpg">
                    </div>
                    
                    <div class="input-group full-width">
                        <label for="researchGalleryImages">Gallery Images (JSON array)</label>
                        <textarea id="researchGalleryImages" placeholder='["/images/research/image1.jpg", "/images/research/image2.jpg"]'></textarea>
                        <small>Enter image URLs as a JSON array</small>
                    </div>
                    
                    <div class="input-group">
                        <label for="researchDisplayOrder">Display Order</label>
                        <input id="researchDisplayOrder" type="number" min="0" value="0">
                    </div>
                    
                    <div class="input-group">
                        <label class="toggle-switch">
                            <input type="checkbox" id="researchFeatured" checked>
                            <span class="toggle-slider"></span>
                            <span>Featured</span>
                        </label>
                    </div>
                    
                    <div class="input-group">
                        <label class="toggle-switch">
                            <input type="checkbox" id="researchPublished" checked>
                            <span class="toggle-slider"></span>
                            <span>Published</span>
                        </label>
                    </div>
                </div>
                
                <div class="button-group">
                    <button type="submit" class="btn-primary">
                        <i class="fas fa-save"></i> Add Article
                    </button>
                    <button type="button" onclick="hideAddResearchModal()" class="btn-secondary">
                        <i class="fas fa-times"></i> Cancel
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Get Involved Modals -->
    <!-- Add Story Modal -->
    <div id="addStoryModal" class="modal hidden">
        <div class="card">
            <div class="card-header">
                <h3 class="card-title">Add Community Story</h3>
                <button onclick="hideAddStoryModal()" class="btn-secondary">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <form id="addStoryForm">
                <div class="form-grid">
                    <div class="input-group full-width">
                        <label for="storyTitle">Title *</label>
                        <input id="storyTitle" type="text" required>
                    </div>
                    
                    <div class="input-group full-width">
                        <label for="storyContent">Story Content *</label>
                        <textarea id="storyContent" required placeholder="Share the community story..."></textarea>
                    </div>
                    
                    <div class="input-group">
                        <label for="storyAuthor">Author *</label>
                        <input id="storyAuthor" type="text" required>
                    </div>
                    
                    <div class="input-group">
                        <label for="storyDate">Date</label>
                        <input id="storyDate" type="date">
                    </div>
                    
                    <div class="input-group">
                        <label class="toggle-switch">
                            <input type="checkbox" id="storyFeatured">
                            <span class="toggle-slider"></span>
                            <span>Featured Story</span>
                        </label>
                    </div>
                    
                    <div class="input-group">
                        <label class="toggle-switch">
                            <input type="checkbox" id="storyPublished" checked>
                            <span class="toggle-slider"></span>
                            <span>Published</span>
                        </label>
                    </div>
                </div>
                
                <div class="button-group">
                    <button type="submit" class="btn-primary">
                        <i class="fas fa-save"></i> Add Story
                    </button>
                    <button type="button" onclick="hideAddStoryModal()" class="btn-secondary">
                        <i class="fas fa-times"></i> Cancel
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Media Library Modals -->
    <!-- Add Photo Modal -->
    <div id="addPhotoModal" class="modal hidden">
        <div class="card">
            <div class="card-header">
                <h3 class="card-title">Add Photo</h3>
                <button onclick="hideAddPhotoModal()" class="btn-secondary">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <form id="addPhotoForm">
                <div class="form-grid">
                    <div class="input-group full-width">
                        <label for="photoTitle">Title *</label>
                        <input id="photoTitle" type="text" required>
                    </div>
                    
                    <div class="input-group full-width">
                        <label for="photoDescription">Description</label>
                        <textarea id="photoDescription" placeholder="Photo description..."></textarea>
                    </div>
                    
                    <div class="input-group">
                        <label for="photoCategory">Category *</label>
                        <select id="photoCategory" required>
                            <option value="Architecture">Architecture</option>
                            <option value="Nature">Nature</option>
                            <option value="Residential">Residential</option>
                            <option value="Public">Public</option>
                            <option value="Commercial">Commercial</option>
                            <option value="Cultural">Cultural</option>
                        </select>
                    </div>
                    
                    <div class="input-group full-width">
                        <label for="photoUpload">Photo Upload *</label>
                        <div class="file-upload-container" onclick="document.getElementById('photoFileInput').click()">
                            <div class="upload-icon">
                                <i class="fas fa-camera"></i>
                            </div>
                            <h4>Upload Photo</h4>
                            <p>Click to browse or drag and drop</p>
                            <p class="upload-hint">Recommended: High resolution, max 10MB</p>
                            <input type="file" id="photoFileInput" class="file-input" accept="image/*" onchange="handlePhotoUpload(event)">
                        </div>
                        <div id="photoPreview" class="image-preview"></div>
                        <input type="hidden" id="photoUrl" required>
                    </div>
                    
                    <div class="input-group">
                        <label class="toggle-switch">
                            <input type="checkbox" id="photoFeatured">
                            <span class="toggle-slider"></span>
                            <span>Featured Photo</span>
                        </label>
                    </div>
                </div>
                
                <div class="button-group">
                    <button type="submit" class="btn-primary">
                        <i class="fas fa-save"></i> Add Photo
                    </button>
                    <button type="button" onclick="hideAddPhotoModal()" class="btn-secondary">
                        <i class="fas fa-times"></i> Cancel
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Video Modal -->
    <div id="addVideoModal" class="modal hidden">
        <div class="card">
            <div class="card-header">
                <h3 class="card-title">Add Video</h3>
                <button onclick="hideAddVideoModal()" class="btn-secondary">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <form id="addVideoForm">
                <div class="form-grid">
                    <div class="input-group full-width">
                        <label for="videoTitle">Title *</label>
                        <input id="videoTitle" type="text" required>
                    </div>
                    
                    <div class="input-group full-width">
                        <label for="videoDescription">Description</label>
                        <textarea id="videoDescription" placeholder="Video description..."></textarea>
                    </div>
                    
                    <div class="input-group">
                        <label for="videoUrl">Video URL *</label>
                        <input id="videoUrl" type="url" placeholder="https://youtube.com/..." required>
                    </div>
                    
                    <div class="input-group">
                        <label for="videoThumbnail">Thumbnail URL</label>
                        <input id="videoThumbnail" type="url" placeholder="https://example.com/thumbnail.jpg">
                    </div>
                    
                    <div class="input-group">
                        <label for="videoDuration">Duration</label>
                        <input id="videoDuration" type="text" placeholder="e.g., 5:30">
                    </div>
                    
                    <div class="input-group">
                        <label class="toggle-switch">
                            <input type="checkbox" id="videoFeatured">
                            <span class="toggle-slider"></span>
                            <span>Featured Video</span>
                        </label>
                    </div>
                </div>
                
                <div class="button-group">
                    <button type="submit" class="btn-primary">
                        <i class="fas fa-save"></i> Add Video
                    </button>
                    <button type="button" onclick="hideAddVideoModal()" class="btn-secondary">
                        <i class="fas fa-times"></i> Cancel
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Education Modals -->
    <!-- Add Workshop Modal -->
    <div id="addWorkshopModal" class="modal hidden">
        <div class="card">
            <div class="card-header">
                <h3 class="card-title">Add Workshop</h3>
                <button onclick="hideAddWorkshopModal()" class="btn-secondary">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <form id="addWorkshopForm">
                <div class="form-grid">
                    <div class="input-group full-width">
                        <label for="workshopTitle">Title *</label>
                        <input id="workshopTitle" type="text" required>
                    </div>
                    
                    <div class="input-group full-width">
                        <label for="workshopDescription">Description *</label>
                        <textarea id="workshopDescription" required placeholder="Workshop description..."></textarea>
                    </div>
                    
                    <div class="input-group">
                        <label for="workshopInstructor">Instructor *</label>
                        <input id="workshopInstructor" type="text" required>
                    </div>
                    
                    <div class="input-group">
                        <label for="workshopDate">Date *</label>
                        <input id="workshopDate" type="date" required>
                    </div>
                    
                    <div class="input-group">
                        <label for="workshopTime">Time *</label>
                        <input id="workshopTime" type="text" placeholder="e.g., 2:00 PM - 4:00 PM" required>
                    </div>
                    
                    <div class="input-group">
                        <label for="workshopLocation">Location</label>
                        <input id="workshopLocation" type="text" placeholder="Online or physical location">
                    </div>
                    
                    <div class="input-group">
                        <label for="workshopCapacity">Capacity</label>
                        <input id="workshopCapacity" type="number" placeholder="Maximum participants">
                    </div>
                    
                    <div class="input-group">
                        <label class="toggle-switch">
                            <input type="checkbox" id="workshopPublished" checked>
                            <span class="toggle-slider"></span>
                            <span>Published</span>
                        </label>
                    </div>
                </div>
                
                <div class="button-group">
                    <button type="submit" class="btn-primary">
                        <i class="fas fa-save"></i> Add Workshop
                    </button>
                    <button type="button" onclick="hideAddWorkshopModal()" class="btn-secondary">
                        <i class="fas fa-times"></i> Cancel
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Tutorial Modal -->
    <div id="addTutorialModal" class="modal hidden">
        <div class="card">
            <div class="card-header">
                <h3 class="card-title">Add Tutorial</h3>
                <button onclick="hideAddTutorialModal()" class="btn-secondary">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <form id="addTutorialForm">
                <div class="form-grid">
                    <div class="input-group full-width">
                        <label for="tutorialTitle">Title *</label>
                        <input id="tutorialTitle" type="text" required>
                    </div>
                    
                    <div class="input-group full-width">
                        <label for="tutorialContent">Content *</label>
                        <textarea id="tutorialContent" required placeholder="Tutorial content..."></textarea>
                    </div>
                    
                    <div class="input-group">
                        <label for="tutorialCategory">Category</label>
                        <input id="tutorialCategory" type="text" placeholder="e.g., Design, Development">
                    </div>
                    
                    <div class="input-group">
                        <label for="tutorialLevel">Level</label>
                        <select id="tutorialLevel">
                            <option value="beginner">Beginner</option>
                            <option value="intermediate">Intermediate</option>
                            <option value="advanced">Advanced</option>
                        </select>
                    </div>
                    
                    <div class="input-group">
                        <label for="tutorialDuration">Duration</label>
                        <input id="tutorialDuration" type="text" placeholder="e.g., 30 minutes">
                    </div>
                    
                    <div class="input-group">
                        <label class="toggle-switch">
                            <input type="checkbox" id="tutorialPublished" checked>
                            <span class="toggle-slider"></span>
                            <span>Published</span>
                        </label>
                    </div>
                </div>
                
                <div class="button-group">
                    <button type="submit" class="btn-primary">
                        <i class="fas fa-save"></i> Add Tutorial
                    </button>
                    <button type="button" onclick="hideAddTutorialModal()" class="btn-secondary">
                        <i class="fas fa-times"></i> Cancel
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Testimonial Modal -->
    <div id="addTestimonialModal" class="modal hidden">
        <div class="card">
            <div class="card-header">
                <h3 class="card-title">Add Testimonial</h3>
                <button onclick="hideAddTestimonialModal()" class="btn-secondary">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <form id="addTestimonialForm">
                <div class="form-grid">
                    <div class="input-group full-width">
                        <label for="testimonialText">Testimonial *</label>
                        <textarea id="testimonialText" required placeholder="What they said..."></textarea>
                    </div>
                    
                    <div class="input-group">
                        <label for="testimonialAuthor">Author *</label>
                        <input id="testimonialAuthor" type="text" required>
                    </div>
                    
                    <div class="input-group">
                        <label for="testimonialRole">Role/Company</label>
                        <input id="testimonialRole" type="text" placeholder="e.g., CEO, Company Name">
                    </div>
                    
                    <div class="input-group">
                        <label for="testimonialDate">Date</label>
                        <input id="testimonialDate" type="date">
                    </div>
                    
                    <div class="input-group">
                        <label class="toggle-switch">
                            <input type="checkbox" id="testimonialFeatured">
                            <span class="toggle-slider"></span>
                            <span>Featured Testimonial</span>
                        </label>
                    </div>
                    
                    <div class="input-group">
                        <label class="toggle-switch">
                            <input type="checkbox" id="testimonialPublished" checked>
                            <span class="toggle-slider"></span>
                            <span>Published</span>
                        </label>
                    </div>
                </div>
                
                <div class="button-group">
                    <button type="submit" class="btn-primary">
                        <i class="fas fa-save"></i> Add Testimonial
                    </button>
                    <button type="button" onclick="hideAddTestimonialModal()" class="btn-secondary">
                        <i class="fas fa-times"></i> Cancel
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Architecture Colleagues Lab Modals -->
    <!-- Add Team Member Modal -->
    <div id="addTeamMemberModal" class="modal hidden">
        <div class="card">
            <div class="card-header">
                <h3 class="card-title">Add Team Member</h3>
                <button onclick="hideAddTeamMemberModal()" class="btn-secondary">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <form id="addTeamMemberForm">
                <div class="form-grid">
                    <div class="input-group">
                        <label for="teamMemberName">Name *</label>
                        <input id="teamMemberName" type="text" required>
                    </div>
                    
                    <div class="input-group">
                        <label for="teamMemberRole">Role *</label>
                        <input id="teamMemberRole" type="text" required>
                    </div>
                    
                    <div class="input-group full-width">
                        <label for="teamMemberBio">Bio *</label>
                        <textarea id="teamMemberBio" required></textarea>
                    </div>
                    
                    <div class="input-group">
                        <label for="teamMemberImageFile">Profile Image</label>
                        <input type="file" id="teamMemberImageFile" accept="image/*">
                        <small>Optional: Team member photo</small>
                    </div>
                    
                    <div class="input-group">
                        <label for="teamMemberImageUrl">Or Image URL</label>
                        <input id="teamMemberImageUrl" type="url">
                    </div>
                    
                    <div class="input-group">
                        <label for="teamMemberOrder">Display Order</label>
                        <input id="teamMemberOrder" type="number" min="0" value="0">
                    </div>
                    
                    <div class="input-group">
                        <label class="toggle-switch">
                            <input type="checkbox" id="teamMemberActive" checked>
                            <span class="toggle-slider"></span>
                            <span>Active</span>
                        </label>
                    </div>
                </div>
                
                <div class="button-group">
                    <button type="submit" class="btn-primary">
                        <i class="fas fa-save"></i> Add Team Member
                    </button>
                    <button type="button" onclick="hideAddTeamMemberModal()" class="btn-secondary">
                        <i class="fas fa-times"></i> Cancel
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Initiative Modal -->
    <div id="addInitiativeModal" class="modal hidden">
        <div class="card">
            <div class="card-header">
                <h3 class="card-title">Add Initiative</h3>
                <button onclick="hideAddInitiativeModal()" class="btn-secondary">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <form id="addInitiativeForm">
                <div class="form-grid">
                    <div class="input-group full-width">
                        <label for="initiativeTitle">Title *</label>
                        <input id="initiativeTitle" type="text" required>
                    </div>
                    
                    <div class="input-group full-width">
                        <label for="initiativeDescription">Description *</label>
                        <textarea id="initiativeDescription" required></textarea>
                    </div>
                    
                    <div class="input-group">
                        <label for="initiativeStatus">Status *</label>
                        <select id="initiativeStatus" required>
                            <option value="planned">Planned</option>
                            <option value="in_progress">In Progress</option>
                            <option value="completed">Completed</option>
                            <option value="on_hold">On Hold</option>
                        </select>
                    </div>
                    
                    <div class="input-group">
                        <label for="initiativeTargetDate">Target Date</label>
                        <input id="initiativeTargetDate" type="date">
                    </div>
                    
                    <div class="input-group">
                        <label for="initiativeOrder">Display Order</label>
                        <input id="initiativeOrder" type="number" min="0" value="0">
                    </div>
                    
                    <div class="input-group">
                        <label class="toggle-switch">
                            <input type="checkbox" id="initiativeActive" checked>
                            <span class="toggle-slider"></span>
                            <span>Active</span>
                        </label>
                    </div>
                </div>
                
                <div class="button-group">
                    <button type="submit" class="btn-primary">
                        <i class="fas fa-save"></i> Add Initiative
                    </button>
                    <button type="button" onclick="hideAddInitiativeModal()" class="btn-secondary">
                        <i class="fas fa-times"></i> Cancel
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Edit Mission Modal -->
    <div id="editMissionModal" class="modal hidden">
        <div class="card">
            <div class="card-header">
                <h3 class="card-title">Edit Mission & Vision</h3>
                <button onclick="hideEditMissionModal()" class="btn-secondary">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <form id="editMissionForm">
                <div class="form-grid">
                    <div class="input-group full-width">
                        <label for="missionStatement">Mission Statement *</label>
                        <textarea id="missionStatement" required></textarea>
                    </div>
                    
                    <div class="input-group full-width">
                        <label for="visionStatement">Vision Statement *</label>
                        <textarea id="visionStatement" required></textarea>
                    </div>
                </div>
                
                <div class="button-group">
                    <button type="submit" class="btn-primary">
                        <i class="fas fa-save"></i> Update Mission & Vision
                    </button>
                    <button type="button" onclick="hideEditMissionModal()" class="btn-secondary">
                        <i class="fas fa-times"></i> Cancel
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Value Modal -->
    <div id="addValueModal" class="modal hidden">
        <div class="card">
            <div class="card-header">
                <h3 class="card-title">Add Core Value</h3>
                <button onclick="hideAddValueModal()" class="btn-secondary">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <form id="addValueForm">
                <div class="form-grid">
                    <div class="input-group">
                        <label for="valueTitle">Title *</label>
                        <input id="valueTitle" type="text" required>
                    </div>
                    
                    <div class="input-group full-width">
                        <label for="valueDescription">Description *</label>
                        <textarea id="valueDescription" required></textarea>
                    </div>
                    
                    <div class="input-group">
                        <label for="valueOrder">Display Order</label>
                        <input id="valueOrder" type="number" min="0" value="0">
                    </div>
                    
                    <div class="input-group">
                        <label class="toggle-switch">
                            <input type="checkbox" id="valueActive" checked>
                            <span class="toggle-slider"></span>
                            <span>Active</span>
                        </label>
                    </div>
                </div>
                
                <div class="button-group">
                    <button type="submit" class="btn-primary">
                        <i class="fas fa-save"></i> Add Value
                    </button>
                    <button type="button" onclick="hideAddValueModal()" class="btn-secondary">
                        <i class="fas fa-times"></i> Cancel
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- JavaScript Section -->
<script>
const API_BASE_URL = window.location.hostname === 'localhost' 
  ? 'http://localhost:4000/api' 
  : 'https://aspire-arch-server.onrender.com/api';

console.log('🌐 Using API URL:', API_BASE_URL);
      let authToken = null;
      let allItems = [];
      let contactSubmissions = [];
      let contactInfo = [];
      let emailSettings = [];
      let currentGetInvolvedTab = 'membership';
      let currentMediaTab = 'photos';
      let currentEducationTab = 'workshops';
      let currentColleaguesTab = 'colleagues-contacts';
      let currentResearchTab = 'research-all';
      let currentDesignTab = 'design-all';
      let currentNewsEventsTab = 'newsevents-all';
      let currentPhotoCategory = 'All';
      
      // File upload state
      let mainImageFile = null;
      let galleryImageFiles = [];
      let uploadedMainImageUrl = '';
      let uploadedGalleryImageUrls = [];
      let newsImageFile = null;
      let uploadedNewsImageUrl = '';
      let eventImageFile = null;
      let uploadedEventImageUrl = '';

      // Stats objects
      let mediaStats = {
        photos: 0,
        videos: 0,
        designs: 0,
        testimonials: 0
      };
      let educationStats = {
        workshops: 0,
        tutorials: 0,
        exhibitions: 0,
        totalEnrolled: 0
      };
      let colleaguesStats = {
        contacts: 0,
        team: 0,
        initiatives: 0,
        newContacts: 0
      };
      let researchStats = {
        articles: 0,
        sustainable: 0,
        climate: 0,
        social: 0,
        technological: 0,
        featured: 0
      };
      let designStats = {
        total: 0,
        academic: 0,
        professional: 0,
        competition: 0,
        featured: 0
      };
      let newsEventsStats = {
        news: 0,
        events: 0,
        featuredNews: 0,
        featuredEvents: 0
      };

      // Sector mapping for display
      const sectorLabels = {
        'residential': 'Residential Architecture',
        'interior': 'Interior Design',
        'refurbishment': 'Refurbishment',
        'cultural': 'Cultural Architecture',
        'commercial': 'Commercial & Offices',
        'hospitality': 'Hospitality Architecture',
        'public': 'Public Architecture',
        'healthcare': 'Healthcare Architecture',
        'educational': 'Educational Architecture',
        'sports': 'Sports Architecture',
        'religious': 'Religious Architecture',
        'industrial': 'Industrial & Infrastructure',
        'landscape': 'Landscape & Urbanism'
      };

      // DOM Elements
      const loginScreen = document.getElementById('loginScreen');
      const dashboard = document.getElementById('dashboard');
      const sidebar = document.getElementById('sidebar');
      const mobileMenuBtn = document.getElementById('mobileMenuBtn');
      const overlay = document.getElementById('overlay');
      const pageTitle = document.getElementById('pageTitle');
      const navItems = document.querySelectorAll('.nav-item');
      const sections = document.querySelectorAll('.section');

      // ===== CORE FUNCTIONS FROM SCRIPT 1 =====

      // API Helper Functions
      async function apiRequest(endpoint, options = {}) {
        const url = `${API_BASE_URL}${endpoint}`;
        
        // Get current token
        const currentToken = authToken || localStorage.getItem('aspire_token');
        
        const config = {
          headers: {
            'Content-Type': 'application/json',
            ...(currentToken ? { 'Authorization': `Bearer ${currentToken}` } : {}),
            ...options.headers,
          },
          ...options,
        };

        // For FormData requests, remove Content-Type header (browser will set it automatically)
        if (options.body instanceof FormData) {
          delete config.headers['Content-Type'];
        }

        try {
          console.log(`🔄 API Request: ${options.method || 'GET'} ${url}`);
          
          const response = await fetch(url, config);
          
          if (response.status === 401) {
            // Token is invalid/expired
            console.error('❌ Authentication failed (401)');
            localStorage.removeItem('aspire_token');
            authToken = null;
            throw new Error('Authentication failed. Please login again.');
          }
          
          if (!response.ok) {
            const errorText = await response.text();
            console.error('❌ API Error Response:', errorText);
            let errorData;
            try {
              errorData = JSON.parse(errorText);
            } catch {
              errorData = { error: `HTTP ${response.status}: ${response.statusText}` };
            }
            throw new Error(errorData.error || `HTTP error! status: ${response.status}`);
          }
          
          const data = await response.json();
          console.log(`✅ API Success for ${endpoint}`);
          return data;
        } catch (error) {
          console.error('❌ API Request failed:', error);
          
          // If it's an auth error, redirect to login
          if (error.message.includes('Authentication failed') || error.message.includes('Authentication required')) {
            showLogin();
          }
          
          throw error;
        }
      }

      // Enhanced uploadFile function with better error handling
      async function uploadFile(file, type) {
        const formData = new FormData();
        formData.append('file', file);
        formData.append('type', type);

        try {
          console.log(`📤 Uploading ${type} file:`, file.name, file.size, file.type);
          
          const response = await fetch(`${API_BASE_URL}/upload`, {
            method: 'POST',
            headers: {
              'Authorization': `Bearer ${authToken || localStorage.getItem('aspire_token')}`
            },
            body: formData
          });

          console.log('📤 Upload response status:', response.status);
          
          if (!response.ok) {
            const errorText = await response.text();
            console.error('❌ Upload failed with response:', errorText);
            throw new Error(`Upload failed: ${response.status} - ${errorText}`);
          }

          const data = await response.json();
          console.log('📤 Upload response data:', data);
          
          // Handle different response formats
          const fileUrl = data.fileUrl || data.url || data.path || data.filePath;
          if (!fileUrl) {
            console.error('❌ No file URL in response:', data);
            throw new Error('Upload response missing file URL');
          }
          
          console.log('✅ Upload successful, file URL:', fileUrl);
          return fileUrl;
        } catch (error) {
          console.error('❌ File upload error:', error);
          throw error;
        }
      }

      // Navigation
      navItems.forEach(item => {
        item.addEventListener('click', () => {
          const section = item.getAttribute('data-section');
          showSection(section);
          
          // Update active nav item
          navItems.forEach(nav => nav.classList.remove('active'));
          item.classList.add('active');
          
          // Update page title
          pageTitle.textContent = item.querySelector('span').textContent;
          
          // Load section-specific data
          if (section === 'contact') {
            loadContactData();
          } else if (section === 'dashboard') {
            loadDashboardData();
          } else if (section === 'manage') {
            loadItems();
          } else if (section === 'getinvolved') {
            showGetInvolvedTab('membership');
          } else if (section === 'media') {
            loadMediaStats();
            showMediaTab('photos');
          } else if (section === 'education') {
            loadEducationStats();
            showEducationTab('workshops');
          } else if (section === 'design') {
            loadDesignStats();
            showDesignTab('design-all');
          } else if (section === 'newsevents') {
            loadNewsEventsStats();
            showNewsEventsTab('newsevents-all');
          } else if (section === 'research') {
            loadResearchStats();
            showResearchTab('research-all');
          } else if (section === 'colleagues') {
            loadColleaguesStats();
            showColleaguesTab('colleagues-contacts');
          }
          
          // Close mobile menu
          if (window.innerWidth <= 1024) {
            sidebar.classList.remove('open');
            overlay.classList.remove('active');
          }
        });
      });

      function showSection(sectionName) {
        sections.forEach(section => {
          section.classList.add('hidden');
        });
        const targetSection = document.getElementById(sectionName + 'Section');
        if (targetSection) {
          targetSection.classList.remove('hidden');
        }
      }

      function showLogin() {
        dashboard.classList.add('hidden');
        loginScreen.classList.remove('hidden');
        authToken = null;
        localStorage.removeItem('aspire_token');
      }

      // Mobile menu
      mobileMenuBtn.addEventListener('click', () => {
        sidebar.classList.add('open');
        overlay.classList.add('active');
      });

      overlay.addEventListener('click', () => {
        sidebar.classList.remove('open');
        overlay.classList.remove('active');
      });

      // Login functionality
      document.getElementById('loginBtn').onclick = async () => {
        const u = document.getElementById('username').value;
        const p = document.getElementById('password').value;
        const loginMsg = document.getElementById('loginMsg');
        
        try {
          loginMsg.innerHTML = '<span class="text-warning">Logging in...</span>';
          
          const result = await fetch(`${API_BASE_URL}/auth/login`, {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify({ username: u, password: p })
          });

          if (!result.ok) {
            const errorData = await result.json().catch(() => ({}));
            throw new Error(errorData.error || `Login failed: ${result.status}`);
          }

          const data = await result.json();
          
          if (data.token) {
            authToken = data.token; 
            localStorage.setItem('aspire_token', data.token);
            console.log('✅ Login successful, token stored');
            showDashboard();
          } else {
            throw new Error('No token received from server');
          }
        } catch (error) {
          console.error('Login error:', error);
          loginMsg.innerHTML = `<span class="text-danger">${error.message || 'Login failed. Check credentials.'}</span>`;
        }
      };

      // Load Dashboard Data
      async function loadDashboardData() {
        try {
          console.log('📊 Loading dashboard data...');
          await loadItems();
          await loadContactStats();
          await loadEducationStats();
          await loadColleaguesStats();
          await loadResearchStats();
          await loadDesignStats();
          await loadNewsEventsStats();
        } catch (error) {
          console.error('Failed to load dashboard data:', error);
          setDefaultStats();
        }
      }

      // Load Items
      async function loadItems() {
        try {
          console.log('📝 Loading items...');
          const data = await apiRequest('/items');
          allItems = Array.isArray(data) ? data : [];
          renderItems(allItems);
          updateStats(allItems);
        } catch (error) {
          console.error('Failed to load items:', error);
          allItems = [];
          renderItems([]);
          updateStats([]);
        }
      }

      function setDefaultStats() {
        document.getElementById('newsCount').textContent = '0';
        document.getElementById('projectCount').textContent = '0';
        document.getElementById('insightCount').textContent = '0';
        document.getElementById('contactCount').textContent = '0';
        document.getElementById('workshopCount').textContent = '0';
        document.getElementById('tutorialCount').textContent = '0';
        document.getElementById('colleaguesContactCount').textContent = '0';
        document.getElementById('designProjectsCount').textContent = '0';
        document.getElementById('researchArticlesCount').textContent = '0';
        
        const recentContainer = document.getElementById('recentItems');
        recentContainer.innerHTML = '<p style="text-align: center; color: var(--text-muted); padding: 2rem;">No recent activity</p>';
      }

      function updateStats(items) {
        const counts = {
          news: items.filter(item => item.type === 'news').length,
          project: items.filter(item => item.type === 'project').length,
          insight: items.filter(item => item.type === 'insight').length,
          event: items.filter(item => item.type === 'event').length,
          course: items.filter(item => item.type === 'course').length
        };

        document.getElementById('newsCount').textContent = counts.news;
        document.getElementById('projectCount').textContent = counts.project;
        document.getElementById('insightCount').textContent = counts.insight;

        // Update recent items
        const recentItems = items.slice(0, 5);
        const recentContainer = document.getElementById('recentItems');
        recentContainer.innerHTML = '';
        
        if (recentItems.length === 0) {
          recentContainer.innerHTML = '<p style="text-align: center; color: var(--text-muted); padding: 2rem;">No recent activity</p>';
          return;
        }
        
        recentItems.forEach(item => {
          const el = createItemElement(item);
          recentContainer.appendChild(el);
        });
      }

      function renderItems(items) {
        const container = document.getElementById('items'); 
        container.innerHTML = '';
        
        if (items.length === 0) {
          container.innerHTML = '<p style="text-align: center; color: var(--text-muted); padding: 2rem;">No content items found.</p>';
          return;
        }
        
        items.forEach(item => {
          const el = createItemElement(item);
          container.appendChild(el);
        });
      }

      function createItemElement(item) {
        const el = document.createElement('div');
        el.className = 'item';
        
        const content = document.createElement('div');
        content.className = 'item-content';
        
        const title = document.createElement('h4');
        title.className = 'item-title';
        title.textContent = item.title || 'Untitled';
        
        const meta = document.createElement('div');
        meta.className = 'item-meta';
        
        const type = document.createElement('span');
        type.className = 'item-type';
        type.textContent = item.type || 'unknown';
        
        const date = document.createElement('span');
        date.className = 'item-date';
        date.textContent = item.created_at ? new Date(item.created_at).toLocaleDateString() : 'Unknown date';
        
        meta.appendChild(type);
        meta.appendChild(date);
        
        const preview = document.createElement('div');
        preview.className = 'item-preview';
        const contentText = item.content || '';
        preview.textContent = contentText.substring(0, 150) + (contentText.length > 150 ? '...' : '');
        
        content.appendChild(title);
        content.appendChild(meta);
        content.appendChild(preview);

        // Add files list if any
        if (item.files && Array.isArray(item.files) && item.files.length > 0) {
          const filesList = document.createElement('div');
          filesList.className = 'files-list';
          item.files.forEach(file => {
            const fileItem = document.createElement('div');
            fileItem.className = 'file-item';
            const icon = document.createElement('span');
            icon.innerHTML = file.type && file.type.startsWith('image/') ? '📷' : '📄';
            const link = document.createElement('a');
            link.href = file.path || '#';
            link.target = '_blank';
            link.textContent = file.name || 'File';
            fileItem.appendChild(icon);
            fileItem.appendChild(link);
            filesList.appendChild(fileItem);
          });
          content.appendChild(filesList);
        }

        const actions = document.createElement('div');
        actions.className = 'item-actions';
        
        const del = document.createElement('button');
        del.className = 'btn-danger';
        del.innerHTML = '<i class="fas fa-trash"></i> Delete';
        del.onclick = async () => {
          if (confirm('Are you sure you want to delete this item?')) {
            try {
              await apiRequest(`/items/${item.id}`, { method: 'DELETE' });
              await loadItems();
            } catch (error) {
              console.error('Delete failed:', error);
              alert('Failed to delete item: ' + error.message);
            }
          }
        };
        actions.appendChild(del);
        content.appendChild(actions);
        
        if (item.image) {
          const img = document.createElement('img');
          img.src = item.image;
          img.alt = item.title || 'Item image';
          el.appendChild(img);
        }
        
        el.appendChild(content);
        return el;
      }

      // Contact Management Functions
      async function loadContactData() {
        try {
          console.log('📧 Loading contact data...');
          await Promise.all([
            loadContactSubmissions(),
            loadContactInfo(),
            loadEmailSettings()
          ]);
        } catch (error) {
          console.error('Failed to load contact data:', error);
        }
      }

      async function loadContactSubmissions() {
        try {
          console.log('📧 Loading contact submissions...');
          const data = await apiRequest('/contact/submissions');
          console.log('📧 Raw submissions data:', data);
          
          // Handle different response formats
          contactSubmissions = Array.isArray(data) ? data : 
                              Array.isArray(data.data) ? data.data : 
                              [];
          
          console.log(`📧 Processed ${contactSubmissions.length} submissions`);
          
          renderContactSubmissions(contactSubmissions);
          updateContactStats(contactSubmissions);
        } catch (error) {
          console.error('Failed to load contact submissions:', error);
          contactSubmissions = [];
          renderContactSubmissions([]);
          updateContactStats([]);
        }
      }

      async function loadContactStats() {
        try {
          const stats = await apiRequest('/contact/submissions/stats');
          if (stats && typeof stats.total !== 'undefined') {
            document.getElementById('contactCount').textContent = stats.total;
          }
        } catch (error) {
          console.error('Failed to load contact stats:', error);
          document.getElementById('contactCount').textContent = '0';
        }
      }

      function updateContactStats(submissions) {
        const total = submissions.length;
        const newCount = submissions.filter(s => s.status === 'new').length;
        const repliedCount = submissions.filter(s => s.status === 'replied').length;
        const recentCount = submissions.filter(s => {
          if (!s.created_at) return false;
          const sevenDaysAgo = new Date();
          sevenDaysAgo.setDate(sevenDaysAgo.getDate() - 7);
          return new Date(s.created_at) >= sevenDaysAgo;
        }).length;

        document.getElementById('totalSubmissions').textContent = total;
        document.getElementById('newSubmissions').textContent = newCount;
        document.getElementById('repliedSubmissions').textContent = repliedCount;
        document.getElementById('recentSubmissions').textContent = recentCount;
      }

      function renderContactSubmissions(submissions) {
        const container = document.getElementById('submissionsList');
        container.innerHTML = '';

        if (submissions.length === 0) {
          container.innerHTML = '<p style="text-align: center; color: var(--text-muted); padding: 2rem;">No contact submissions found.</p>';
          return;
        }

        submissions.forEach(submission => {
          const el = document.createElement('div');
          el.className = 'submission-item';
          
          const header = document.createElement('div');
          header.className = 'submission-header';
          
          const left = document.createElement('div');
          left.innerHTML = `
            <h4 style="margin: 0 0 0.5rem 0; color: var(--accent-light);">${submission.name || 'No name'}</h4>
            <p style="margin: 0; color: var(--text-muted);">${submission.email || 'No email'}</p>
          `;
          
          const right = document.createElement('div');
          right.innerHTML = `
            <span class="status-badge status-${submission.status || 'new'}">${submission.status || 'new'}</span>
            <div style="font-size: 0.8rem; color: var(--text-muted); margin-top: 0.5rem;">
              ${submission.created_at ? new Date(submission.created_at).toLocaleDateString() : 'Unknown date'}
            </div>
          `;
          
          header.appendChild(left);
          header.appendChild(right);
          
          const meta = document.createElement('div');
          meta.className = 'submission-meta';
          
          const statusSelect = document.createElement('select');
          statusSelect.innerHTML = `
            <option value="new" ${(submission.status || 'new') === 'new' ? 'selected' : ''}>New</option>
            <option value="read" ${(submission.status || 'new') === 'read' ? 'selected' : ''}>Read</option>
            <option value="replied" ${(submission.status || 'new') === 'replied' ? 'selected' : ''}>Replied</option>
            <option value="archived" ${(submission.status || 'new') === 'archived' ? 'selected' : ''}>Archived</option>
          `;
          statusSelect.onchange = async (e) => {
            await updateSubmissionStatus(submission.id, e.target.value);
          };
          
          const deleteBtn = document.createElement('button');
          deleteBtn.className = 'btn-danger';
          deleteBtn.innerHTML = '<i class="fas fa-trash"></i> Delete';
          deleteBtn.onclick = async () => {
            if (confirm('Delete this submission?')) {
              await deleteSubmission(submission.id);
            }
          };
          
          meta.appendChild(statusSelect);
          meta.appendChild(deleteBtn);
          
          const message = document.createElement('div');
          message.style.padding = '1rem';
          message.style.background = 'rgba(255,255,255,0.03)';
          message.style.borderRadius = '8px';
          message.style.marginTop = '1rem';
          message.textContent = submission.message || 'No message';
          
          el.appendChild(header);
          el.appendChild(meta);
          el.appendChild(message);
          container.appendChild(el);
        });
      }

      async function updateSubmissionStatus(id, status) {
        try {
          await apiRequest(`/contact/submissions/${id}/status`, {
            method: 'PUT',
            body: JSON.stringify({ status })
          });
          await loadContactSubmissions();
        } catch (error) {
          console.error('Failed to update status:', error);
          alert('Failed to update status: ' + error.message);
        }
      }

      async function deleteSubmission(id) {
        try {
          await apiRequest(`/contact/submissions/${id}`, { method: 'DELETE' });
          await loadContactSubmissions();
        } catch (error) {
          console.error('Failed to delete submission:', error);
          alert('Failed to delete submission: ' + error.message);
        }
      }

      async function loadContactInfo() {
        try {
          const data = await apiRequest('/contact/admin/info');
          // Handle different response formats
          contactInfo = Array.isArray(data) ? data : 
                       Array.isArray(data.data) ? data.data : 
                       [];
          renderContactInfo(contactInfo);
        } catch (error) {
          console.error('Failed to load contact info:', error);
          contactInfo = [];
          renderContactInfo([]);
        }
      }

      function renderContactInfo(info) {
        const container = document.getElementById('contactInfoList');
        container.innerHTML = '';

        if (info.length === 0) {
          container.innerHTML = '<p style="text-align: center; color: var(--text-muted); padding: 2rem;">No contact information found.</p>';
          return;
        }

        info.forEach(item => {
          const el = document.createElement('div');
          el.className = 'contact-info-item';
          
          const header = document.createElement('div');
          header.className = 'contact-info-header';
          
          const left = document.createElement('div');
          left.innerHTML = `
            <h4 style="margin: 0 0 0.5rem 0; color: var(--accent-light);">${item.title || 'No title'}</h4>
            <p style="margin: 0; color: var(--text-muted); font-size: 0.9rem;">${item.type || 'No type'}</p>
          `;
          
          const right = document.createElement('label');
          right.className = 'toggle-switch';
          right.innerHTML = `
            <input type="checkbox" ${item.is_active ? 'checked' : ''} onchange="updateContactInfo(${item.id}, this.checked)">
            <span class="toggle-slider"></span>
          `;
          
          header.appendChild(left);
          header.appendChild(right);
          
          const value = document.createElement('div');
          value.style.marginTop = '1rem';
          value.innerHTML = `
            <textarea style="width: 100%; min-height: 80px; padding: 0.8rem; background: rgba(255,255,255,0.05); border: 1px solid var(--border-light); border-radius: 8px; color: var(--text-light);" 
                      onblur="updateContactInfoValue(${item.id}, this.value)">${item.value || ''}</textarea>
          `;
          
          el.appendChild(header);
          el.appendChild(value);
          container.appendChild(el);
        });
      }

      // Make these functions globally available for the inline event handlers
      window.updateContactInfo = async function(id, isActive) {
        try {
          const item = contactInfo.find(i => i.id === id);
          if (item) {
            await apiRequest(`/contact/info/${id}`, {
              method: 'PUT',
              body: JSON.stringify({ ...item, is_active: isActive })
            });
          }
        } catch (error) {
          console.error('Failed to update contact info:', error);
          alert('Failed to update contact info: ' + error.message);
        }
      };

      window.updateContactInfoValue = async function(id, value) {
        try {
          const item = contactInfo.find(i => i.id === id);
          if (item) {
            await apiRequest(`/contact/info/${id}`, {
              method: 'PUT',
              body: JSON.stringify({ ...item, value })
            });
          }
        } catch (error) {
          console.error('Failed to update contact info value:', error);
          alert('Failed to update contact info: ' + error.message);
        }
      };

      async function loadEmailSettings() {
        try {
          const data = await apiRequest('/contact/email-settings');
          // Handle different response formats
          emailSettings = Array.isArray(data) ? data : 
                         Array.isArray(data.data) ? data.data : 
                         [];
          renderEmailSettings(emailSettings);
        } catch (error) {
          console.error('Failed to load email settings:', error);
          emailSettings = [];
          renderEmailSettings([]);
        }
      }

      function renderEmailSettings(settings) {
        const container = document.getElementById('emailSettingsList');
        container.innerHTML = '';

        if (settings.length === 0) {
          container.innerHTML = '<p style="text-align: center; color: var(--text-muted); padding: 2rem;">No email settings found.</p>';
          return;
        }

        settings.forEach(setting => {
          const el = document.createElement('div');
          el.className = 'email-setting-item';
          
          el.innerHTML = `
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1rem;">
              <div class="input-group">
                <label>Recipient Email</label>
                <input type="email" value="${setting.recipient_email || ''}" 
                       onblur="updateEmailSetting(${setting.id}, 'recipient_email', this.value)"
                       style="width: 100%;">
              </div>
              <div class="input-group">
                <label>Subject Template</label>
                <input type="text" value="${setting.subject_template || ''}" 
                       onblur="updateEmailSetting(${setting.id}, 'subject_template', this.value)"
                       style="width: 100%;">
              </div>
            </div>
            <div class="input-group">
              <label class="toggle-switch" style="display: flex; align-items: center; gap: 1rem;">
                <span>Enabled</span>
                <input type="checkbox" ${setting.enabled ? 'checked' : ''} 
                       onchange="updateEmailSetting(${setting.id}, 'enabled', this.checked)">
                <span class="toggle-slider"></span>
              </label>
            </div>
          `;
          
          container.appendChild(el);
        });
      }

      window.updateEmailSetting = async function(id, field, value) {
        try {
          const setting = emailSettings.find(s => s.id === id);
          if (setting) {
            await apiRequest(`/contact/email-settings/${id}`, {
              method: 'PUT',
              body: JSON.stringify({ ...setting, [field]: value })
            });
          }
        } catch (error) {
          console.error('Failed to update email setting:', error);
          alert('Failed to update email setting: ' + error.message);
        }
      };

      // Form submission
      document.getElementById('contentForm').addEventListener('submit', async (e) => {
        e.preventDefault();
        
        const title = document.getElementById('title').value;
        const type = document.getElementById('type').value;
        const content = document.getElementById('content').value;
        
        if (!title || !type || !content) {
          alert('Please fill in all required fields');
          return;
        }

        const form = new FormData();
        form.append('title', title);
        form.append('type', type);
        form.append('content', content);

        const imageFile = document.getElementById('image').files[0];
        if (imageFile) {
          if (imageFile.size > 5 * 1024 * 1024) {
            alert('Cover image must be less than 5MB');
            return;
          }
          form.append('image', imageFile);
        }

        const additionalFiles = document.getElementById('files').files;
        if (additionalFiles.length > 5) {
          alert('Maximum 5 additional files allowed');
          return;
        }

        for (let file of additionalFiles) {
          if (file.size > 5 * 1024 * 1024) {
            alert('Each file must be less than 5MB');
            return;
          }
          form.append('files', file);
        }

        // Show progress bar
        const progress = document.getElementById('uploadProgress');
        const progressBar = progress.querySelector('.progress-bar');
        progress.style.display = 'block';
        progressBar.style.width = '0%';

        try {
          // Use direct fetch for FormData
          const response = await fetch(`${API_BASE_URL}/items`, {
            method: 'POST',
            headers: { 
              'Authorization': `Bearer ${authToken || localStorage.getItem('aspire_token')}` 
            },
            body: form
          });

          if (response.ok) {
            document.getElementById('contentForm').reset();
            progressBar.style.width = '100%';
            setTimeout(() => {
              progress.style.display = 'none';
              progressBar.style.width = '0%';
            }, 500);

            await loadItems();
            showSection('manage');
            navItems.forEach(nav => {
              nav.classList.remove('active');
              if (nav.getAttribute('data-section') === 'manage') {
                nav.classList.add('active');
                pageTitle.textContent = nav.querySelector('span').textContent;
              }
            });
          } else {
            const errorData = await response.json().catch(() => ({}));
            alert(errorData.error || 'Upload failed');
          }
        } catch (err) {
          console.error('Upload error:', err);
          alert('Upload failed: ' + (err.message || 'Unknown error'));
        }
      });

      // Get Involved Management Functions
      document.querySelectorAll('.get-involved-tab').forEach(tab => {
        tab.addEventListener('click', () => {
          const tabName = tab.getAttribute('data-tab');
          showGetInvolvedTab(tabName);
        });
      });

      function showGetInvolvedTab(tabName) {
        // Hide all tabs
        document.querySelectorAll('.get-involved-content').forEach(content => {
          content.classList.remove('active');
        });
        document.querySelectorAll('.get-involved-tab').forEach(tab => {
          tab.classList.remove('active');
        });

        // Show selected tab
        document.getElementById(tabName + 'Tab').classList.add('active');
        document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');
        currentGetInvolvedTab = tabName;

        // Load data for the tab
        switch(tabName) {
          case 'membership':
            loadMembershipApplications();
            break;
          case 'donations':
            loadDonations();
            break;
          case 'feedback':
            loadFeedback();
            break;
          case 'ideas':
            loadIdeas();
            break;
          case 'partnerships':
            loadPartnerships();
            break;
          case 'stories':
            loadStories();
            break;
        }
      }

      // Load Membership Applications
      async function loadMembershipApplications() {
        try {
          const data = await apiRequest('/get-involved/admin/membership');
          const container = document.getElementById('membershipList');
          container.innerHTML = '';

          if (data.length === 0) {
            container.innerHTML = '<p style="text-align: center; color: var(--text-muted); padding: 2rem;">No membership applications found.</p>';
            return;
          }

          data.forEach(application => {
            const el = createSubmissionElement(application, 'membership');
            container.appendChild(el);
          });
        } catch (error) {
          console.error('Failed to load membership applications:', error);
        }
      }

      // Load Donations
      async function loadDonations() {
        try {
          const data = await apiRequest('/get-involved/admin/donations');
          const container = document.getElementById('donationsList');
          container.innerHTML = '';

          if (data.length === 0) {
            container.innerHTML = '<p style="text-align: center; color: var(--text-muted); padding: 2rem;">No donations found.</p>';
            return;
          }

          data.forEach(donation => {
            const el = createSubmissionElement(donation, 'donations');
            container.appendChild(el);
          });
        } catch (error) {
          console.error('Failed to load donations:', error);
        }
      }

      // Load Feedback
      async function loadFeedback() {
        try {
          const data = await apiRequest('/get-involved/admin/feedback');
          const container = document.getElementById('feedbackList');
          container.innerHTML = '';

          if (data.length === 0) {
            container.innerHTML = '<p style="text-align: center; color: var(--text-muted); padding: 2rem;">No feedback submissions found.</p>';
            return;
          }

          data.forEach(feedback => {
            const el = createSubmissionElement(feedback, 'feedback');
            container.appendChild(el);
          });
        } catch (error) {
          console.error('Failed to load feedback:', error);
        }
      }

      // Load Ideas
      async function loadIdeas() {
        try {
          const data = await apiRequest('/get-involved/admin/ideas');
          const container = document.getElementById('ideasList');
          container.innerHTML = '';

          if (data.length === 0) {
            container.innerHTML = '<p style="text-align: center; color: var(--text-muted); padding: 2rem;">No idea submissions found.</p>';
            return;
          }

          data.forEach(idea => {
            const el = createSubmissionElement(idea, 'ideas');
            container.appendChild(el);
          });
        } catch (error) {
          console.error('Failed to load ideas:', error);
        }
      }

      // Load Partnerships
      async function loadPartnerships() {
        try {
          const data = await apiRequest('/get-involved/admin/partnerships');
          const container = document.getElementById('partnershipsList');
          container.innerHTML = '';

          if (data.length === 0) {
            container.innerHTML = '<p style="text-align: center; color: var(--text-muted); padding: 2rem;">No partnership inquiries found.</p>';
            return;
          }

          data.forEach(partnership => {
            const el = createSubmissionElement(partnership, 'partnerships');
            container.appendChild(el);
          });
        } catch (error) {
          console.error('Failed to load partnerships:', error);
        }
      }

      // Load Stories
      async function loadStories() {
        try {
          const data = await apiRequest('/get-involved/admin/stories');
          const container = document.getElementById('storiesList');
          container.innerHTML = '';

          if (data.length === 0) {
            container.innerHTML = '<p style="text-align: center; color: var(--text-muted); padding: 2rem;">No community stories found.</p>';
            return;
          }

          data.forEach(story => {
            const el = createStoryElement(story);
            container.appendChild(el);
          });
        } catch (error) {
          console.error('Failed to load stories:', error);
        }
      }

      // Generic submission element creator
      function createSubmissionElement(submission, type) {
        const el = document.createElement('div');
        el.className = 'submission-item';
        
        const header = document.createElement('div');
        header.className = 'submission-header';
        
        const left = document.createElement('div');
        left.innerHTML = `
          <h4 style="margin: 0 0 0.5rem 0; color: var(--accent-light);">${submission.full_name || 'No name'}</h4>
          <p style="margin: 0; color: var(--text-muted);">${submission.email || 'No email'}</p>
        `;
        
        const right = document.createElement('div');
        
        // Add type-specific badges
        let badges = '';
        if (type === 'donations' && submission.amount) {
          badges += `<span class="amount-badge">$${submission.amount}</span>`;
        }
        if (type === 'ideas' && submission.priority) {
          badges += `<span class="priority-badge priority-${submission.priority}">${submission.priority}</span>`;
        }
        
        right.innerHTML = `
          <span class="status-badge status-${submission.status || 'new'}">${submission.status || 'new'}</span>
          ${badges}
          <div style="font-size: 0.8rem; color: var(--text-muted); margin-top: 0.5rem;">
            ${submission.created_at ? new Date(submission.created_at).toLocaleDateString() : 'Unknown date'}
          </div>
        `;
        
        header.appendChild(left);
        header.appendChild(right);
        
        const meta = document.createElement('div');
        meta.className = 'submission-meta';
        
        const statusSelect = document.createElement('select');
        statusSelect.innerHTML = getStatusOptions(type, submission.status);
        statusSelect.onchange = async (e) => {
          await updateGetInvolvedStatus(type, submission.id, e.target.value);
        };
        
        const deleteBtn = document.createElement('button');
        deleteBtn.className = 'btn-danger';
        deleteBtn.innerHTML = '<i class="fas fa-trash"></i> Delete';
        deleteBtn.onclick = async () => {
          if (confirm('Delete this submission?')) {
            await deleteGetInvolvedSubmission(type, submission.id);
          }
        };
        
        meta.appendChild(statusSelect);
        meta.appendChild(deleteBtn);
        
        const content = document.createElement('div');
        content.style.padding = '1rem';
        content.style.background = 'rgba(255,255,255,0.03)';
        content.style.borderRadius = '8px';
        content.style.marginTop = '1rem';
        content.innerHTML = getSubmissionContent(submission, type);
        
        el.appendChild(header);
        el.appendChild(meta);
        el.appendChild(content);
        return el;
      }

      // Story element creator
      function createStoryElement(story) {
        const el = document.createElement('div');
        el.className = `submission-item ${story.is_featured ? 'story-featured' : ''} ${story.is_published ? 'story-published' : 'story-draft'}`;
        
        const header = document.createElement('div');
        header.className = 'submission-header';
        
        const left = document.createElement('div');
        left.innerHTML = `
          <h4 style="margin: 0 0 0.5rem 0; color: var(--accent-light);">${story.story_title}</h4>
          <p style="margin: 0; color: var(--text-muted);">By ${story.author_name}${story.author_title ? `, ${story.author_title}` : ''}</p>
        `;
        
        const right = document.createElement('div');
        right.innerHTML = `
          <span class="status-badge status-${story.status || 'published'}">${story.status || 'published'}</span>
          ${story.is_featured ? '<span class="priority-badge priority-high" style="margin-left: 0.5rem;">Featured</span>' : ''}
          <div style="font-size: 0.8rem; color: var(--text-muted); margin-top: 0.5rem;">
            ${story.created_at ? new Date(story.created_at).toLocaleDateString() : 'Unknown date'}
          </div>
        `;
        
        header.appendChild(left);
        header.appendChild(right);
        
        const meta = document.createElement('div');
        meta.className = 'submission-meta';
        
        const statusSelect = document.createElement('select');
        statusSelect.innerHTML = getStatusOptions('stories', story.status);
        statusSelect.onchange = async (e) => {
          await updateGetInvolvedStatus('stories', story.id, e.target.value);
        };
        
        const editBtn = document.createElement('button');
        editBtn.className = 'btn-secondary';
        editBtn.innerHTML = '<i class="fas fa-edit"></i> Edit';
        editBtn.onclick = () => editStory(story);
        
        const deleteBtn = document.createElement('button');
        deleteBtn.className = 'btn-danger';
        deleteBtn.innerHTML = '<i class="fas fa-trash"></i> Delete';
        deleteBtn.onclick = async () => {
          if (confirm('Delete this story?')) {
            await deleteGetInvolvedSubmission('stories', story.id);
          }
        };
        
        meta.appendChild(statusSelect);
        meta.appendChild(editBtn);
        meta.appendChild(deleteBtn);
        
        const content = document.createElement('div');
        content.style.padding = '1rem';
        content.style.background = 'rgba(255,255,255,0.03)';
        content.style.borderRadius = '8px';
        content.style.marginTop = '1rem';
        content.textContent = story.story_content.substring(0, 200) + (story.story_content.length > 200 ? '...' : '');
        
        el.appendChild(header);
        el.appendChild(meta);
        el.appendChild(content);
        return el;
      }

      // Helper functions
      function getStatusOptions(type, currentStatus) {
        const baseOptions = {
          membership: `
            <option value="pending" ${currentStatus === 'pending' ? 'selected' : ''}>Pending</option>
            <option value="approved" ${currentStatus === 'approved' ? 'selected' : ''}>Approved</option>
            <option value="rejected" ${currentStatus === 'rejected' ? 'selected' : ''}>Rejected</option>
            <option value="archived" ${currentStatus === 'archived' ? 'selected' : ''}>Archived</option>
          `,
          donations: `
            <option value="pending" ${currentStatus === 'pending' ? 'selected' : ''}>Pending</option>
            <option value="verified" ${currentStatus === 'verified' ? 'selected' : ''}>Verified</option>
            <option value="completed" ${currentStatus === 'completed' ? 'selected' : ''}>Completed</option>
            <option value="archived" ${currentStatus === 'archived' ? 'selected' : ''}>Archived</option>
          `,
          feedback: `
            <option value="new" ${currentStatus === 'new' ? 'selected' : ''}>New</option>
            <option value="read" ${currentStatus === 'read' ? 'selected' : ''}>Read</option>
            <option value="replied" ${currentStatus === 'replied' ? 'selected' : ''}>Replied</option>
            <option value="archived" ${currentStatus === 'archived' ? 'selected' : ''}>Archived</option>
          `,
          ideas: `
            <option value="under_review" ${currentStatus === 'under_review' ? 'selected' : ''}>Under Review</option>
            <option value="approved" ${currentStatus === 'approved' ? 'selected' : ''}>Approved</option>
            <option value="implemented" ${currentStatus === 'implemented' ? 'selected' : ''}>Implemented</option>
            <option value="rejected" ${currentStatus === 'rejected' ? 'selected' : ''}>Rejected</option>
            <option value="archived" ${currentStatus === 'archived' ? 'selected' : ''}>Archived</option>
          `,
          partnerships: `
            <option value="pending" ${currentStatus === 'pending' ? 'selected' : ''}>Pending</option>
            <option value="under_review" ${currentStatus === 'under_review' ? 'selected' : ''}>Under Review</option>
            <option value="approved" ${currentStatus === 'approved' ? 'selected' : ''}>Approved</option>
            <option value="rejected" ${currentStatus === 'rejected' ? 'selected' : ''}>Rejected</option>
            <option value="archived" ${currentStatus === 'archived' ? 'selected' : ''}>Archived</option>
          `,
          stories: `
            <option value="draft" ${currentStatus === 'draft' ? 'selected' : ''}>Draft</option>
            <option value="published" ${currentStatus === 'published' ? 'selected' : ''}>Published</option>
            <option value="archived" ${currentStatus === 'archived' ? 'selected' : ''}>Archived</option>
          `
        };
        
        return baseOptions[type] || baseOptions.feedback;
      }

      function getSubmissionContent(submission, type) {
        switch(type) {
          case 'membership':
            return `
              <p><strong>Type:</strong> ${submission.membership_type}</p>
              <p><strong>Organization:</strong> ${submission.organization || 'Not specified'}</p>
              <p><strong>Position:</strong> ${submission.position || 'Not specified'}</p>
              ${submission.message ? `<p><strong>Message:</strong> ${submission.message}</p>` : ''}
            `;
          case 'donations':
            return `
              <p><strong>Amount:</strong> $${submission.amount} ${submission.currency}</p>
              <p><strong>Payment Method:</strong> ${submission.payment_method}</p>
              ${submission.bank_name ? `<p><strong>Bank:</strong> ${submission.bank_name}</p>` : ''}
              ${submission.mtn_mobile_number ? `<p><strong>MTN Number:</strong> ${submission.mtn_mobile_number}</p>` : ''}
            `;
          case 'feedback':
            return `
              <p><strong>Category:</strong> ${submission.category}</p>
              ${submission.subject ? `<p><strong>Subject:</strong> ${submission.subject}</p>` : ''}
              <p><strong>Message:</strong> ${submission.message}</p>
              ${submission.rating ? `<p><strong>Rating:</strong> ${'★'.repeat(submission.rating)}${'☆'.repeat(5-submission.rating)}</p>` : ''}
            `;
          case 'ideas':
            return `
              <p><strong>Title:</strong> ${submission.idea_title}</p>
              <p><strong>Category:</strong> ${submission.category}</p>
              <p><strong>Description:</strong> ${submission.description.substring(0, 200)}${submission.description.length > 200 ? '...' : ''}</p>
              ${submission.target_audience ? `<p><strong>Target Audience:</strong> ${submission.target_audience}</p>` : ''}
            `;
          case 'partnerships':
            return `
              <p><strong>Organization:</strong> ${submission.organization}</p>
              <p><strong>Partnership Type:</strong> ${submission.partnership_type}</p>
              ${submission.position ? `<p><strong>Position:</strong> ${submission.position}</p>` : ''}
              <p><strong>Proposal:</strong> ${submission.proposal ? submission.proposal.substring(0, 200) + (submission.proposal.length > 200 ? '...' : '') : 'No proposal provided'}</p>
            `;
          default:
            return '<p>No content available</p>';
        }
      }

      async function updateGetInvolvedStatus(type, id, status) {
        try {
          await apiRequest(`/get-involved/admin/${type}/${id}/status`, {
            method: 'PUT',
            body: JSON.stringify({ status })
          });
          // Reload the current tab
          showGetInvolvedTab(currentGetInvolvedTab);
        } catch (error) {
          console.error('Failed to update status:', error);
          alert('Failed to update status: ' + error.message);
        }
      }

      async function deleteGetInvolvedSubmission(type, id) {
        try {
          await apiRequest(`/get-involved/admin/${type}/${id}`, { method: 'DELETE' });
          // Reload the current tab
          showGetInvolvedTab(currentGetInvolvedTab);
        } catch (error) {
          console.error('Failed to delete submission:', error);
          alert('Failed to delete submission: ' + error.message);
        }
      }

      // Story management functions
      function showCreateStoryModal() {
        document.getElementById('createStoryModal').classList.remove('hidden');
      }

      function hideCreateStoryModal() {
        document.getElementById('createStoryModal').classList.add('hidden');
        document.getElementById('createStoryForm').reset();
      }

      document.getElementById('createStoryForm').addEventListener('submit', async (e) => {
        e.preventDefault();
        
        const storyData = {
          author_name: document.getElementById('storyAuthor').value,
          author_title: document.getElementById('storyTitle').value,
          author_organization: document.getElementById('storyOrganization').value,
          story_title: document.getElementById('storyStoryTitle').value,
          story_content: document.getElementById('storyContent').value,
          category: document.getElementById('storyCategory').value,
          featured_image: document.getElementById('storyFeaturedImage').value,
          is_featured: document.getElementById('storyFeatured').checked,
          is_published: document.getElementById('storyPublished').checked
        };

        try {
          await apiRequest('/get-involved/admin/stories', {
            method: 'POST',
            body: JSON.stringify(storyData)
          });
          
          hideCreateStoryModal();
          loadStories();
          alert('Story created successfully!');
        } catch (error) {
          console.error('Failed to create story:', error);
          alert('Failed to create story: ' + error.message);
        }
      });

      function editStory(story) {
        // Implementation for editing stories
        alert('Edit story functionality coming soon!');
      }

      // Media Management Functions
      document.querySelectorAll('.get-involved-tab[data-tab]').forEach(tab => {
        tab.addEventListener('click', () => {
          const tabName = tab.getAttribute('data-tab');
          if (['photos', 'videos', 'designs', 'testimonials'].includes(tabName)) {
            showMediaTab(tabName);
          }
        });
      });

      function showMediaTab(tabName) {
        // Hide all media tabs
        document.querySelectorAll('.get-involved-content').forEach(content => {
          content.classList.remove('active');
        });
        document.querySelectorAll('.get-involved-tab').forEach(tab => {
          tab.classList.remove('active');
        });

        // Show selected tab
        document.getElementById(tabName + 'Tab').classList.add('active');
        document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');
        currentMediaTab = tabName;

        // Load data for the tab
        switch(tabName) {
          case 'photos':
            loadPhotos();
            break;
          case 'videos':
            loadVideos();
            break;
          case 'designs':
            loadDesigns();
            break;
          case 'testimonials':
            loadTestimonials();
            break;
        }
      }

      // Photo Category Filter
      document.querySelectorAll('.filter-btn[data-category]').forEach(btn => {
        btn.addEventListener('click', () => {
          const category = btn.getAttribute('data-category');
          currentPhotoCategory = category;
          
          // Update active category
          document.querySelectorAll('.filter-btn').forEach(b => {
            b.classList.remove('active');
          });
          btn.classList.add('active');
          
          // Filter photos
          filterPhotosByCategory(category);
        });
      });

      // Load Media Stats
      async function loadMediaStats() {
        try {
          const stats = await apiRequest('/media/stats');
          mediaStats = stats;
          
          document.getElementById('photosCount').textContent = stats.photos || 0;
          document.getElementById('videosCount').textContent = stats.videos || 0;
          document.getElementById('designsCount').textContent = stats.designs || 0;
          document.getElementById('testimonialsCount').textContent = stats.testimonials || 0;
        } catch (error) {
          console.error('Failed to load media stats:', error);
        }
      }

      // Photos Management
      async function loadPhotos() {
        try {
          const data = await apiRequest('/media/photos');
          const container = document.getElementById('photosList');
          container.innerHTML = '';

          if (data.length === 0) {
            container.innerHTML = '<p style="text-align: center; color: var(--text-muted); padding: 2rem;">No photos found.</p>';
            return;
          }

          data.forEach(photo => {
            const el = createPhotoElement(photo);
            container.appendChild(el);
          });
          
          // Update stats
          mediaStats.photos = data.length;
          document.getElementById('photosCount').textContent = data.length;
        } catch (error) {
          console.error('Failed to load photos:', error);
        }
      }

      function createPhotoElement(photo) {
        const el = document.createElement('div');
        el.className = 'item';
        
        const content = document.createElement('div');
        content.className = 'item-content';
        
        const title = document.createElement('h4');
        title.className = 'item-title';
        title.textContent = photo.title;
        
        const meta = document.createElement('div');
        meta.className = 'item-meta';
        
        const type = document.createElement('span');
        type.className = 'item-type';
        type.textContent = photo.category;
        
        const date = document.createElement('span');
        date.className = 'item-date';
        date.textContent = photo.created_at ? new Date(photo.created_at).toLocaleDateString() : 'Unknown date';
        
        meta.appendChild(type);
        meta.appendChild(date);
        
        const preview = document.createElement('div');
        preview.className = 'item-preview';
        preview.textContent = photo.description || 'No description available';
        
        content.appendChild(title);
        content.appendChild(meta);
        content.appendChild(preview);

        const actions = document.createElement('div');
        actions.className = 'item-actions';
        
        const featuredBtn = document.createElement('button');
        featuredBtn.className = photo.is_featured ? 'btn-primary' : 'btn-secondary';
        featuredBtn.innerHTML = `<i class="fas ${photo.is_featured ? 'fa-star' : 'fa-star'}"></i> ${photo.is_featured ? 'Featured' : 'Feature'}`;
        featuredBtn.onclick = async () => {
          await toggleFeatured('photos', photo.id, !photo.is_featured);
        };
        
        const del = document.createElement('button');
        del.className = 'btn-danger';
        del.innerHTML = '<i class="fas fa-trash"></i> Delete';
        del.onclick = async () => {
          if (confirm('Are you sure you want to delete this photo?')) {
            await deleteMediaItem('photos', photo.id);
          }
        };
        
        actions.appendChild(featuredBtn);
        actions.appendChild(del);
        content.appendChild(actions);
        
        if (photo.image) {
          const img = document.createElement('img');
          img.src = photo.image;
          img.alt = photo.title;
          el.appendChild(img);
        }
        
        el.appendChild(content);
        return el;
      }

      function filterPhotosByCategory(category) {
        const container = document.getElementById('photosList');
        const items = container.querySelectorAll('.item');
        
        items.forEach(item => {
          const typeElement = item.querySelector('.item-type');
          if (typeElement) {
            const itemCategory = typeElement.textContent;
            if (category === 'All' || itemCategory === category) {
              item.style.display = 'flex';
            } else {
              item.style.display = 'none';
            }
          }
        });
      }

      // Videos Management
      async function loadVideos() {
        try {
          const data = await apiRequest('/media/videos');
          const container = document.getElementById('videosList');
          container.innerHTML = '';

          if (data.length === 0) {
            container.innerHTML = '<p style="text-align: center; color: var(--text-muted); padding: 2rem;">No videos found.</p>';
            return;
          }

          data.forEach(video => {
            const el = createVideoElement(video);
            container.appendChild(el);
          });
          
          mediaStats.videos = data.length;
          document.getElementById('videosCount').textContent = data.length;
        } catch (error) {
          console.error('Failed to load videos:', error);
        }
      }

      function createVideoElement(video) {
        const el = document.createElement('div');
        el.className = 'item';
        
        const content = document.createElement('div');
        content.className = 'item-content';
        
        const title = document.createElement('h4');
        title.className = 'item-title';
        title.textContent = video.title;
        
        const meta = document.createElement('div');
        meta.className = 'item-meta';
        
        const type = document.createElement('span');
        type.className = 'item-type';
        type.textContent = video.category || 'Video';
        
        const date = document.createElement('span');
        date.className = 'item-date';
        date.textContent = video.created_at ? new Date(video.created_at).toLocaleDateString() : 'Unknown date';
        
        meta.appendChild(type);
        meta.appendChild(date);
        
        const preview = document.createElement('div');
        preview.className = 'item-preview';
        preview.textContent = video.description || 'No description available';
        
        if (video.duration) {
          const duration = document.createElement('div');
          duration.style.color = 'var(--accent-light)';
          duration.style.fontSize = '0.8rem';
          duration.style.marginTop = '0.5rem';
          duration.textContent = `Duration: ${video.duration}`;
          preview.appendChild(duration);
        }
        
        content.appendChild(title);
        content.appendChild(meta);
        content.appendChild(preview);

        const actions = document.createElement('div');
        actions.className = 'item-actions';
        
        const featuredBtn = document.createElement('button');
        featuredBtn.className = video.is_featured ? 'btn-primary' : 'btn-secondary';
        featuredBtn.innerHTML = `<i class="fas ${video.is_featured ? 'fa-star' : 'fa-star'}"></i> ${video.is_featured ? 'Featured' : 'Feature'}`;
        featuredBtn.onclick = async () => {
          await toggleFeatured('videos', video.id, !video.is_featured);
        };
        
        const del = document.createElement('button');
        del.className = 'btn-danger';
        del.innerHTML = '<i class="fas fa-trash"></i> Delete';
        del.onclick = async () => {
          if (confirm('Are you sure you want to delete this video?')) {
            await deleteMediaItem('videos', video.id);
          }
        };
        
        actions.appendChild(featuredBtn);
        actions.appendChild(del);
        content.appendChild(actions);
        
        if (video.thumbnail) {
          const img = document.createElement('img');
          img.src = video.thumbnail;
          img.alt = video.title;
          el.appendChild(img);
        }
        
        el.appendChild(content);
        return el;
      }

      // Designs Management
      async function loadDesigns() {
        try {
          const data = await apiRequest('/media/designs');
          const container = document.getElementById('designsList');
          container.innerHTML = '';

          if (data.length === 0) {
            container.innerHTML = '<p style="text-align: center; color: var(--text-muted); padding: 2rem;">No designs found.</p>';
            return;
          }

          data.forEach(design => {
            const el = createDesignElement(design);
            container.appendChild(el);
          });
          
          mediaStats.designs = data.length;
          document.getElementById('designsCount').textContent = data.length;
        } catch (error) {
          console.error('Failed to load designs:', error);
        }
      }

      function createDesignElement(design) {
        const el = document.createElement('div');
        el.className = 'item';
        
        const content = document.createElement('div');
        content.className = 'item-content';
        
        const title = document.createElement('h4');
        title.className = 'item-title';
        title.textContent = design.title;
        
        const meta = document.createElement('div');
        meta.className = 'item-meta';
        
        const type = document.createElement('span');
        type.className = 'item-type';
        type.textContent = design.type;
        
        const date = document.createElement('span');
        date.className = 'item-date';
        date.textContent = design.created_at ? new Date(design.created_at).toLocaleDateString() : 'Unknown date';
        
        meta.appendChild(type);
        meta.appendChild(date);
        
        const preview = document.createElement('div');
        preview.className = 'item-preview';
        preview.textContent = design.description || 'No description available';
        
        if (design.project) {
          const project = document.createElement('div');
          project.style.color = 'var(--accent-light)';
          project.style.fontSize = '0.8rem';
          project.style.marginTop = '0.5rem';
          project.textContent = `Project: ${design.project}`;
          preview.appendChild(project);
        }
        
        content.appendChild(title);
        content.appendChild(meta);
        content.appendChild(preview);

        const actions = document.createElement('div');
        actions.className = 'item-actions';
        
        const featuredBtn = document.createElement('button');
        featuredBtn.className = design.is_featured ? 'btn-primary' : 'btn-secondary';
        featuredBtn.innerHTML = `<i class="fas ${design.is_featured ? 'fa-star' : 'fa-star'}"></i> ${design.is_featured ? 'Featured' : 'Feature'}`;
        featuredBtn.onclick = async () => {
          await toggleFeatured('designs', design.id, !design.is_featured);
        };
        
        const del = document.createElement('button');
        del.className = 'btn-danger';
        del.innerHTML = '<i class="fas fa-trash"></i> Delete';
        del.onclick = async () => {
          if (confirm('Are you sure you want to delete this design?')) {
            await deleteMediaItem('designs', design.id);
          }
        };
        
        actions.appendChild(featuredBtn);
        actions.appendChild(del);
        content.appendChild(actions);
        
        if (design.image) {
          const img = document.createElement('img');
          img.src = design.image;
          img.alt = design.title;
          el.appendChild(img);
        }
        
        el.appendChild(content);
        return el;
      }

      // Testimonials Management
      async function loadTestimonials() {
        try {
          const data = await apiRequest('/media/testimonials');
          const container = document.getElementById('testimonialsList');
          container.innerHTML = '';

          if (data.length === 0) {
            container.innerHTML = '<p style="text-align: center; color: var(--text-muted); padding: 2rem;">No testimonials found.</p>';
            return;
          }

          data.forEach(testimonial => {
            const el = createTestimonialElement(testimonial);
            container.appendChild(el);
          });
          
          mediaStats.testimonials = data.length;
          document.getElementById('testimonialsCount').textContent = data.length;
        } catch (error) {
          console.error('Failed to load testimonials:', error);
        }
      }

      function createTestimonialElement(testimonial) {
        const el = document.createElement('div');
        el.className = 'submission-item';
        
        const stars = testimonial.rating ? '★'.repeat(testimonial.rating) + '☆'.repeat(5 - testimonial.rating) : '';
        
        el.innerHTML = `
          <div class="submission-header">
            <div>
              <h4 style="margin: 0 0 0.5rem 0; color: var(--accent-light);">${testimonial.name}</h4>
              <p style="margin: 0; color: var(--text-muted);">${testimonial.role}${testimonial.organization ? ` at ${testimonial.organization}` : ''}</p>
            </div>
            <div>
              <span class="status-badge status-${testimonial.status || 'published'}">${testimonial.status || 'published'}</span>
              ${testimonial.is_featured ? '<span class="priority-badge priority-high" style="margin-left: 0.5rem;">Featured</span>' : ''}
              <div style="font-size: 0.8rem; color: var(--text-muted); margin-top: 0.5rem;">
                ${testimonial.created_at ? new Date(testimonial.created_at).toLocaleDateString() : 'Unknown date'}
              </div>
            </div>
          </div>
          ${stars ? `<div class="testimonial-rating">${stars}</div>` : ''}
          <div style="padding: 1rem; background: rgba(255,255,255,0.03); border-radius: 8px; margin-top: 1rem;">
            <p style="margin: 0; font-style: italic;">"${testimonial.quote}"</p>
            ${testimonial.project ? `<p style="margin: 0.5rem 0 0 0; color: var(--text-muted); font-size: 0.9rem;">Project: ${testimonial.project}</p>` : ''}
          </div>
          <div class="submission-meta">
            <select onchange="updateTestimonialStatus(${testimonial.id}, this.value)">
              <option value="published" ${testimonial.status === 'published' ? 'selected' : ''}>Published</option>
            <option value="draft" ${testimonial.status === 'draft' ? 'selected' : ''}>Draft</option>
            <option value="archived" ${testimonial.status === 'archived' ? 'selected' : ''}>Archived</option>
            </select>
            <button class="btn-secondary" onclick="toggleFeatured('testimonials', ${testimonial.id}, ${!testimonial.is_featured})">
              <i class="fas ${testimonial.is_featured ? 'fa-star' : 'fa-star'}"></i> ${testimonial.is_featured ? 'Unfeature' : 'Feature'}
            </button>
            <button class="btn-danger" onclick="deleteMediaItem('testimonials', ${testimonial.id})">
              <i class="fas fa-trash"></i> Delete
            </button>
          </div>
        `;
        
        return el;
      }

      // Modal Functions
      function showAddPhotoModal() {
        document.getElementById('addPhotoModal').classList.remove('hidden');
      }

      function hideAddPhotoModal() {
        document.getElementById('addPhotoModal').classList.add('hidden');
        document.getElementById('addPhotoForm').reset();
      }

      function showAddVideoModal() {
        document.getElementById('addVideoModal').classList.remove('hidden');
      }

      function hideAddVideoModal() {
        document.getElementById('addVideoModal').classList.add('hidden');
        document.getElementById('addVideoForm').reset();
      }

      function showAddDesignModal() {
        document.getElementById('addDesignModal').classList.remove('hidden');
      }

      function hideAddDesignModal() {
        document.getElementById('addDesignModal').classList.add('hidden');
        document.getElementById('addDesignForm').reset();
      }

      function showAddTestimonialModal() {
        document.getElementById('addTestimonialModal').classList.remove('hidden');
      }

      function hideAddTestimonialModal() {
        document.getElementById('addTestimonialModal').classList.add('hidden');
        document.getElementById('addTestimonialForm').reset();
      }

      // Form Submissions for Media with File Upload
      document.getElementById('addPhotoForm').addEventListener('submit', async (e) => {
        e.preventDefault();
        
        const photoFile = document.getElementById('photoFile').files[0];
        if (!photoFile) {
          alert('Please select a photo file');
          return;
        }

        // Show progress
        const submitBtn = document.getElementById('addPhotoForm').querySelector('button[type="submit"]');
        const originalText = submitBtn.innerHTML;
        submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Uploading...';
        submitBtn.disabled = true;

        try {
          // Upload the file first
          const fileUrl = await uploadFile(photoFile, 'photo');
          
          // Then create the photo record
          const photoData = {
            title: document.getElementById('photoTitle').value,
            description: document.getElementById('photoDescription').value,
            image_url: fileUrl,
            category: document.getElementById('photoCategory').value,
            album_name: document.getElementById('photoAlbum').value || null,
            tags: [],
            is_featured: document.getElementById('photoFeatured').checked,
            is_published: document.getElementById('photoPublished').checked,
            status: document.getElementById('photoPublished').checked ? 'published' : 'draft'
          };

          await apiRequest('/media/photos', {
            method: 'POST',
            body: JSON.stringify(photoData)
          });
          
          hideAddPhotoModal();
          loadPhotos();
          loadMediaStats();
          alert('Photo uploaded successfully!');
        } catch (error) {
          console.error('Failed to add photo:', error);
          alert('Failed to add photo: ' + error.message);
        } finally {
          submitBtn.innerHTML = originalText;
          submitBtn.disabled = false;
        }
      });

      document.getElementById('addVideoForm').addEventListener('submit', async (e) => {
        e.preventDefault();
        
        const videoFile = document.getElementById('videoFile').files[0];
        const thumbnailFile = document.getElementById('videoThumbnailFile').files[0];
        
        if (!videoFile) {
          alert('Please select a video file');
          return;
        }

        // Show progress
        const submitBtn = document.getElementById('addVideoForm').querySelector('button[type="submit"]');
        const originalText = submitBtn.innerHTML;
        submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Uploading...';
        submitBtn.disabled = true;

        try {
          console.log('🎬 Starting video upload process...');
          
          // Upload video file
          console.log('🎬 Uploading video file:', videoFile.name, videoFile.size, videoFile.type);
          const videoUrl = await uploadFile(videoFile, 'video');
          console.log('✅ Video uploaded successfully:', videoUrl);
          
          let thumbnailUrl = '';
          if (thumbnailFile) {
            // Upload thumbnail file
            console.log('🖼️ Uploading thumbnail file:', thumbnailFile.name);
            thumbnailUrl = await uploadFile(thumbnailFile, 'image');
            console.log('✅ Thumbnail uploaded successfully:', thumbnailUrl);
          } else {
            thumbnailUrl = document.getElementById('videoThumbnailUrl').value;
            console.log('🖼️ Using thumbnail URL:', thumbnailUrl);
          }

          // Then create the video record
          const videoData = {
            title: document.getElementById('videoTitle').value,
            description: document.getElementById('videoDescription').value,
            video_url: videoUrl,
            thumbnail_url: thumbnailUrl || null,
            duration: document.getElementById('videoDuration').value || null,
            category: document.getElementById('videoCategory').value || null,
            tags: [],
            is_featured: document.getElementById('videoFeatured').checked,
            is_published: document.getElementById('videoPublished').checked,
            status: document.getElementById('videoPublished').checked ? 'published' : 'draft'
          };

          console.log('💾 Saving video data to database:', videoData);

          const result = await apiRequest('/media/videos', {
            method: 'POST',
            body: JSON.stringify(videoData)
          });
          
          console.log('✅ Video saved to database successfully:', result);
          
          hideAddVideoModal();
          loadVideos();
          loadMediaStats();
          alert('Video uploaded successfully!');
        } catch (error) {
          console.error('❌ Failed to add video:', error);
          alert('Failed to add video: ' + error.message);
        } finally {
          submitBtn.innerHTML = originalText;
          submitBtn.disabled = false;
        }
      });

      document.getElementById('addDesignForm').addEventListener('submit', async (e) => {
        e.preventDefault();
        
        const designFile = document.getElementById('designFile').files[0];
        if (!designFile) {
          alert('Please select a design image file');
          return;
        }

        // Show progress
        const submitBtn = document.getElementById('addDesignForm').querySelector('button[type="submit"]');
        const originalText = submitBtn.innerHTML;
        submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Uploading...';
        submitBtn.disabled = true;

        try {
          // Upload the design file
          const fileUrl = await uploadFile(designFile, 'image');
          
          // Then create the design record
          const designData = {
            title: document.getElementById('designTitle').value,
            description: document.getElementById('designDescription').value,
            image_url: fileUrl,
            design_type: document.getElementById('designType').value,
            category: document.getElementById('designCategory').value || null,
            project_name: document.getElementById('designProject').value || null,
            tags: [],
            is_featured: document.getElementById('designFeatured').checked,
            is_published: document.getElementById('designPublished').checked,
            status: document.getElementById('designPublished').checked ? 'published' : 'draft'
          };

          await apiRequest('/media/designs', {
            method: 'POST',
            body: JSON.stringify(designData)
          });
          
          hideAddDesignModal();
          loadDesigns();
          loadMediaStats();
          alert('Design uploaded successfully!');
        } catch (error) {
          console.error('Failed to add design:', error);
          alert('Failed to add design: ' + error.message);
        } finally {
          submitBtn.innerHTML = originalText;
          submitBtn.disabled = false;
        }
      });

      document.getElementById('addTestimonialForm').addEventListener('submit', async (e) => {
        e.preventDefault();
        
        const testimonialImageFile = document.getElementById('testimonialImageFile').files[0];

        // Show progress
        const submitBtn = document.getElementById('addTestimonialForm').querySelector('button[type="submit"]');
        const originalText = submitBtn.innerHTML;
        submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Uploading...';
        submitBtn.disabled = true;

        try {
          let imageUrl = '';
          if (testimonialImageFile) {
            // Upload the image file
            imageUrl = await uploadFile(testimonialImageFile, 'image');
          }

          // Then create the testimonial record
          const testimonialData = {
            name: document.getElementById('testimonialName').value,
            role: document.getElementById('testimonialRole').value,
            organization: document.getElementById('testimonialOrganization').value || null,
            quote: document.getElementById('testimonialQuote').value,
            project_name: document.getElementById('testimonialProject').value || null,
            image_url: imageUrl || document.getElementById('testimonialImageUrl').value,
            rating: parseInt(document.getElementById('testimonialRating').value) || null,
            is_featured: document.getElementById('testimonialFeatured').checked,
            is_published: document.getElementById('testimonialPublished').checked,
            status: document.getElementById('testimonialPublished').checked ? 'published' : 'draft'
          };

          await apiRequest('/media/testimonials', {
            method: 'POST',
            body: JSON.stringify(testimonialData)
          });
          
          hideAddTestimonialModal();
          loadTestimonials();
          loadMediaStats();
          alert('Testimonial added successfully!');
        } catch (error) {
          console.error('Failed to add testimonial:', error);
          alert('Failed to add testimonial: ' + error.message);
        } finally {
          submitBtn.innerHTML = originalText;
          submitBtn.disabled = false;
        }
      });

      // Media Management Functions
      async function toggleFeatured(type, id, featured) {
        try {
          await apiRequest(`/media/${type}/${id}`, {
            method: 'PUT',
            body: JSON.stringify({ is_featured: featured })
          });
          
          // Reload current tab to reflect changes
          switch(type) {
            case 'photos':
              loadPhotos();
              break;
            case 'videos':
              loadVideos();
              break;
            case 'designs':
              loadDesigns();
              break;
            case 'testimonials':
              loadTestimonials();
              break;
          }
        } catch (error) {
          console.error('Failed to toggle featured status:', error);
          alert('Failed to update featured status: ' + error.message);
        }
      }

      async function updateTestimonialStatus(id, status) {
        try {
          await apiRequest(`/media/testimonials/${id}/status`, {
            method: 'PUT',
            body: JSON.stringify({ status })
          });
          loadTestimonials();
        } catch (error) {
          console.error('Failed to update testimonial status:', error);
          alert('Failed to update status: ' + error.message);
        }
      }

      async function deleteMediaItem(type, id) {
        if (confirm('Are you sure you want to delete this item?')) {
          try {
            await apiRequest(`/media/${type}/${id}`, { method: 'DELETE' });
            
            // Reload current tab and stats to reflect changes
            switch(type) {
              case 'photos':
                loadPhotos();
                break;
              case 'videos':
                loadVideos();
                break;
              case 'designs':
                loadDesigns();
                break;
              case 'testimonials':
                loadTestimonials();
                break;
            }
            loadMediaStats();
          } catch (error) {
            console.error('Failed to delete media item:', error);
            alert('Failed to delete item: ' + error.message);
          }
        }
      }

      // Education Management Functions
      document.querySelectorAll('.get-involved-tab[data-tab]').forEach(tab => {
        tab.addEventListener('click', () => {
          const tabName = tab.getAttribute('data-tab');
          if (['workshops', 'tutorials', 'exhibitions'].includes(tabName)) {
            showEducationTab(tabName);
          }
        });
      });

      function showEducationTab(tabName) {
        // Hide all education tabs
        document.querySelectorAll('.get-involved-content').forEach(content => {
          content.classList.remove('active');
        });
        document.querySelectorAll('.get-involved-tab').forEach(tab => {
          tab.classList.remove('active');
        });

        // Show selected tab
        document.getElementById(tabName + 'Tab').classList.add('active');
        document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');
        currentEducationTab = tabName;

        // Load data for the tab
        switch(tabName) {
          case 'workshops':
            loadWorkshops();
            break;
          case 'tutorials':
            loadTutorials();
            break;
          case 'exhibitions':
            loadExhibitions();
            break;
        }
      }

      // Load Education Stats
      async function loadEducationStats() {
        try {
          const stats = await apiRequest('/education/stats');
          educationStats = stats;
          
          document.getElementById('workshopsCount').textContent = stats.workshops || 0;
          document.getElementById('tutorialsCount').textContent = stats.tutorials || 0;
          document.getElementById('exhibitionsCount').textContent = stats.exhibitions || 0;
          document.getElementById('totalEnrolled').textContent = stats.totalEnrolled || 0;

          // Update dashboard stats
          document.getElementById('workshopCount').textContent = stats.workshops || 0;
          document.getElementById('tutorialCount').textContent = stats.tutorials || 0;
        } catch (error) {
          console.error('Failed to load education stats:', error);
        }
      }

      // Workshops Management
      async function loadWorkshops() {
        try {
          const data = await apiRequest('/education/workshops');
          const container = document.getElementById('workshopsList');
          container.innerHTML = '';

          if (data.length === 0) {
            container.innerHTML = '<p style="text-align: center; color: var(--text-muted); padding: 2rem;">No workshops found.</p>';
            return;
          }

          data.forEach(workshop => {
            const el = createWorkshopElement(workshop);
            container.appendChild(el);
          });
          
          educationStats.workshops = data.length;
          document.getElementById('workshopsCount').textContent = data.length;
        } catch (error) {
          console.error('Failed to load workshops:', error);
        }
      }

      function createWorkshopElement(workshop) {
        const el = document.createElement('div');
        el.className = 'item';
        
        const content = document.createElement('div');
        content.className = 'item-content';
        
        const title = document.createElement('h4');
        title.className = 'item-title';
        title.textContent = workshop.title;
        
        const meta = document.createElement('div');
        meta.className = 'item-meta';
        
        const type = document.createElement('span');
        type.className = 'item-type';
        type.textContent = workshop.tag;
        
        const date = document.createElement('span');
        date.className = 'item-date';
        date.textContent = workshop.date;
        
        meta.appendChild(type);
        meta.appendChild(date);
        
        const preview = document.createElement('div');
        preview.className = 'item-preview';
        preview.textContent = workshop.description || 'No description available';
        
        // Add workshop details
        const details = document.createElement('div');
        details.style.marginTop = '0.5rem';
        details.innerHTML = `
          <div style="display: flex; gap: 1rem; font-size: 0.8rem; color: var(--text-muted);">
            <span><i class="fas fa-user"></i> ${workshop.instructor}</span>
            <span><i class="fas fa-clock"></i> ${workshop.duration}</span>
            ${workshop.price > 0 ? `<span><i class="fas fa-dollar-sign"></i> $${workshop.price}</span>` : ''}
            ${workshop.capacity > 0 ? `<span><i class="fas fa-users"></i> ${workshop.enrolled_count || 0}/${workshop.capacity}</span>` : ''}
          </div>
        `;
        
        content.appendChild(title);
        content.appendChild(meta);
        content.appendChild(preview);
        content.appendChild(details);

        const actions = document.createElement('div');
        actions.className = 'item-actions';
        
        const featuredBtn = document.createElement('button');
        featuredBtn.className = workshop.is_featured ? 'btn-primary' : 'btn-secondary';
        featuredBtn.innerHTML = `<i class="fas ${workshop.is_featured ? 'fa-star' : 'fa-star'}"></i> ${workshop.is_featured ? 'Featured' : 'Feature'}`;
        featuredBtn.onclick = async () => {
          await toggleEducationFeatured('workshops', workshop.id, !workshop.is_featured);
        };
        
        const editBtn = document.createElement('button');
        editBtn.className = 'btn-secondary';
        editBtn.innerHTML = '<i class="fas fa-edit"></i> Edit';
        editBtn.onclick = () => editWorkshop(workshop);
        
        const del = document.createElement('button');
        del.className = 'btn-danger';
        del.innerHTML = '<i class="fas fa-trash"></i> Delete';
        del.onclick = async () => {
          if (confirm('Are you sure you want to delete this workshop?')) {
            await deleteEducationItem('workshops', workshop.id);
          }
        };
        
        actions.appendChild(featuredBtn);
        actions.appendChild(editBtn);
        actions.appendChild(del);
        content.appendChild(actions);
        
        if (workshop.image_url) {
          const img = document.createElement('img');
          img.src = workshop.image_url;
          img.alt = workshop.title;
          el.appendChild(img);
        }
        
        el.appendChild(content);
        return el;
      }

      // Tutorials Management
      async function loadTutorials() {
        try {
          const data = await apiRequest('/education/tutorials');
          const container = document.getElementById('tutorialsList');
          container.innerHTML = '';

          if (data.length === 0) {
            container.innerHTML = '<p style="text-align: center; color: var(--text-muted); padding: 2rem;">No tutorials found.</p>';
            return;
          }

          data.forEach(tutorial => {
            const el = createTutorialElement(tutorial);
            container.appendChild(el);
          });
          
          educationStats.tutorials = data.length;
          document.getElementById('tutorialsCount').textContent = data.length;
        } catch (error) {
          console.error('Failed to load tutorials:', error);
        }
      }

      function createTutorialElement(tutorial) {
        const el = document.createElement('div');
        el.className = 'item';
        
        const content = document.createElement('div');
        content.className = 'item-content';
        
        const title = document.createElement('h4');
        title.className = 'item-title';
        title.textContent = tutorial.title;
        
        const meta = document.createElement('div');
        meta.className = 'item-meta';
        
        const type = document.createElement('span');
        type.className = 'item-type';
        type.textContent = tutorial.category;
        
        const level = document.createElement('span');
        level.className = 'item-date';
        level.textContent = tutorial.level;
        
        meta.appendChild(type);
        meta.appendChild(level);
        
        const preview = document.createElement('div');
        preview.className = 'item-preview';
        preview.textContent = tutorial.description || 'No description available';
        
        // Add tutorial details
        const details = document.createElement('div');
        details.style.marginTop = '0.5rem';
        details.innerHTML = `
          <div style="display: flex; gap: 1rem; font-size: 0.8rem; color: var(--text-muted);">
            <span><i class="fas fa-format"></i> ${tutorial.format}</span>
            ${tutorial.duration ? `<span><i class="fas fa-clock"></i> ${tutorial.duration}</span>` : ''}
            <span><i class="fas fa-download"></i> ${tutorial.download_count || 0} downloads</span>
          </div>
        `;
        
        content.appendChild(title);
        content.appendChild(meta);
        content.appendChild(preview);
        content.appendChild(details);

        const actions = document.createElement('div');
        actions.className = 'item-actions';
        
        const featuredBtn = document.createElement('button');
        featuredBtn.className = tutorial.is_featured ? 'btn-primary' : 'btn-secondary';
        featuredBtn.innerHTML = `<i class="fas ${tutorial.is_featured ? 'fa-star' : 'fa-star'}"></i> ${tutorial.is_featured ? 'Featured' : 'Feature'}`;
        featuredBtn.onclick = async () => {
          await toggleEducationFeatured('tutorials', tutorial.id, !tutorial.is_featured);
        };
        
        const editBtn = document.createElement('button');
        editBtn.className = 'btn-secondary';
        editBtn.innerHTML = '<i class="fas fa-edit"></i> Edit';
        editBtn.onclick = () => editTutorial(tutorial);
        
        const del = document.createElement('button');
        del.className = 'btn-danger';
        del.innerHTML = '<i class="fas fa-trash"></i> Delete';
        del.onclick = async () => {
          if (confirm('Are you sure you want to delete this tutorial?')) {
            await deleteEducationItem('tutorials', tutorial.id);
          }
        };
        
        actions.appendChild(featuredBtn);
        actions.appendChild(editBtn);
        actions.appendChild(del);
        content.appendChild(actions);
        
        if (tutorial.thumbnail_url) {
          const img = document.createElement('img');
          img.src = tutorial.thumbnail_url;
          img.alt = tutorial.title;
          el.appendChild(img);
        }
        
        el.appendChild(content);
        return el;
      }

      // Exhibitions Management
      async function loadExhibitions() {
        try {
          const data = await apiRequest('/education/exhibitions');
          const container = document.getElementById('exhibitionsList');
          container.innerHTML = '';

          if (data.length === 0) {
            container.innerHTML = '<p style="text-align: center; color: var(--text-muted); padding: 2rem;">No exhibitions found.</p>';
            return;
          }

          data.forEach(exhibition => {
            const el = createExhibitionElement(exhibition);
            container.appendChild(el);
          });
          
          educationStats.exhibitions = data.length;
          document.getElementById('exhibitionsCount').textContent = data.length;
        } catch (error) {
          console.error('Failed to load exhibitions:', error);
        }
      }

      function createExhibitionElement(exhibition) {
        const el = document.createElement('div');
        el.className = 'item';
        
        const content = document.createElement('div');
        content.className = 'item-content';
        
        const title = document.createElement('h4');
        title.className = 'item-title';
        title.textContent = exhibition.title;
        
        const meta = document.createElement('div');
        meta.className = 'item-meta';
        
        const date = document.createElement('span');
        date.className = 'item-date';
        date.textContent = `${exhibition.start_date} - ${exhibition.end_date}`;
        
        const location = document.createElement('span');
        location.className = 'item-type';
        location.textContent = exhibition.location;
        
        meta.appendChild(date);
        meta.appendChild(location);
        
        const preview = document.createElement('div');
        preview.className = 'item-preview';
        preview.textContent = exhibition.description || 'No description available';
        
        // Add exhibition details
        const details = document.createElement('div');
        details.style.marginTop = '0.5rem';
        details.innerHTML = `
          <div style="font-size: 0.8rem; color: var(--text-muted);">
            <div><i class="fas fa-user"></i> Curated by: ${exhibition.curator}</div>
          </div>
        `;
        
        content.appendChild(title);
        content.appendChild(meta);
        content.appendChild(preview);
        content.appendChild(details);

        const actions = document.createElement('div');
        actions.className = 'item-actions';
        
        const featuredBtn = document.createElement('button');
        featuredBtn.className = exhibition.is_featured ? 'btn-primary' : 'btn-secondary';
        featuredBtn.innerHTML = `<i class="fas ${exhibition.is_featured ? 'fa-star' : 'fa-star'}"></i> ${exhibition.is_featured ? 'Featured' : 'Feature'}`;
        featuredBtn.onclick = async () => {
          await toggleEducationFeatured('exhibitions', exhibition.id, !exhibition.is_featured);
        };
        
        const editBtn = document.createElement('button');
        editBtn.className = 'btn-secondary';
        editBtn.innerHTML = '<i class="fas fa-edit"></i> Edit';
        editBtn.onclick = () => editExhibition(exhibition);
        
        const del = document.createElement('button');
        del.className = 'btn-danger';
        del.innerHTML = '<i class="fas fa-trash"></i> Delete';
        del.onclick = async () => {
          if (confirm('Are you sure you want to delete this exhibition?')) {
            await deleteEducationItem('exhibitions', exhibition.id);
          }
        };
        
        actions.appendChild(featuredBtn);
        actions.appendChild(editBtn);
        actions.appendChild(del);
        content.appendChild(actions);
        
        if (exhibition.image_url) {
          const img = document.createElement('img');
          img.src = exhibition.image_url;
          img.alt = exhibition.title;
          el.appendChild(img);
        }
        
        el.appendChild(content);
        return el;
      }

      // Education Modal Functions
      function showAddWorkshopModal() {
        document.getElementById('addWorkshopModal').classList.remove('hidden');
      }

      function hideAddWorkshopModal() {
        document.getElementById('addWorkshopModal').classList.add('hidden');
        document.getElementById('addWorkshopForm').reset();
      }

      function showAddTutorialModal() {
        document.getElementById('addTutorialModal').classList.remove('hidden');
      }

      function hideAddTutorialModal() {
        document.getElementById('addTutorialModal').classList.add('hidden');
        document.getElementById('addTutorialForm').reset();
      }

      function showAddExhibitionModal() {
        document.getElementById('addExhibitionModal').classList.remove('hidden');
      }

      function hideAddExhibitionModal() {
        document.getElementById('addExhibitionModal').classList.add('hidden');
        document.getElementById('addExhibitionForm').reset();
      }

      // Education Form Submissions
      document.getElementById('addWorkshopForm').addEventListener('submit', async (e) => {
        e.preventDefault();
        
        const workshopImageFile = document.getElementById('workshopImageFile').files[0];
        const workshopDocumentFile = document.getElementById('workshopDocumentFile').files[0];

        // Show progress
        const submitBtn = document.getElementById('addWorkshopForm').querySelector('button[type="submit"]');
        const originalText = submitBtn.innerHTML;
        submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Creating...';
        submitBtn.disabled = true;

        try {
          let imageUrl = '';
          let documentUrl = '';

          if (workshopImageFile) {
            imageUrl = await uploadFile(workshopImageFile, 'image');
          }

          if (workshopDocumentFile) {
            documentUrl = await uploadFile(workshopDocumentFile, 'document');
          }

          const workshopData = {
            title: document.getElementById('workshopTitle').value,
            description: document.getElementById('workshopDescription').value,
            tag: document.getElementById('workshopTag').value,
            duration: document.getElementById('workshopDuration').value,
            date: document.getElementById('workshopDate').value,
            instructor: document.getElementById('workshopInstructor').value,
            instructor_bio: document.getElementById('workshopInstructorBio').value || null,
            price: parseFloat(document.getElementById('workshopPrice').value) || 0,
            capacity: parseInt(document.getElementById('workshopCapacity').value) || 0,
            location: document.getElementById('workshopLocation').value || null,
            image_url: imageUrl,
            document_url: documentUrl,
            video_url: document.getElementById('workshopVideoUrl').value || null,
            is_featured: document.getElementById('workshopFeatured').checked,
            is_published: document.getElementById('workshopPublished').checked,
            status: document.getElementById('workshopPublished').checked ? 'published' : 'draft'
          };

          await apiRequest('/education/workshops', {
            method: 'POST',
            body: JSON.stringify(workshopData)
          });
          
          hideAddWorkshopModal();
          loadWorkshops();
          loadEducationStats();
          alert('Workshop created successfully!');
        } catch (error) {
          console.error('Failed to create workshop:', error);
          alert('Failed to create workshop: ' + error.message);
        } finally {
          submitBtn.innerHTML = originalText;
          submitBtn.disabled = false;
        }
      });

      document.getElementById('addTutorialForm').addEventListener('submit', async (e) => {
        e.preventDefault();
        
        const tutorialDocumentFile = document.getElementById('tutorialDocumentFile').files[0];
        const tutorialVideoFile = document.getElementById('tutorialVideoFile').files[0];
        const tutorialThumbnailFile = document.getElementById('tutorialThumbnailFile').files[0];

        // Show progress
        const submitBtn = document.getElementById('addTutorialForm').querySelector('button[type="submit"]');
        const originalText = submitBtn.innerHTML;
        submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Creating...';
        submitBtn.disabled = true;

        try {
          let documentUrl = '';
          let videoUrl = '';
          let thumbnailUrl = '';

          if (tutorialDocumentFile) {
            documentUrl = await uploadFile(tutorialDocumentFile, 'document');
          }

          if (tutorialVideoFile) {
            videoUrl = await uploadFile(tutorialVideoFile, 'video');
          }

          if (tutorialThumbnailFile) {
            thumbnailUrl = await uploadFile(tutorialThumbnailFile, 'image');
          }

          const tutorialData = {
            title: document.getElementById('tutorialTitle').value,
            description: document.getElementById('tutorialDescription').value,
            category: document.getElementById('tutorialCategory').value,
            level: document.getElementById('tutorialLevel').value,
            format: document.getElementById('tutorialFormat').value,
            duration: document.getElementById('tutorialDuration').value || null,
            document_url: documentUrl,
            video_url: videoUrl,
            thumbnail_url: thumbnailUrl,
            is_featured: document.getElementById('tutorialFeatured').checked,
            is_published: document.getElementById('tutorialPublished').checked,
            status: document.getElementById('tutorialPublished').checked ? 'published' : 'draft'
          };

          await apiRequest('/education/tutorials', {
            method: 'POST',
            body: JSON.stringify(tutorialData)
          });
          
          hideAddTutorialModal();
          loadTutorials();
          loadEducationStats();
          alert('Tutorial created successfully!');
        } catch (error) {
          console.error('Failed to create tutorial:', error);
          alert('Failed to create tutorial: ' + error.message);
        } finally {
          submitBtn.innerHTML = originalText;
          submitBtn.disabled = false;
        }
      });

      document.getElementById('addExhibitionForm').addEventListener('submit', async (e) => {
        e.preventDefault();
        
        const exhibitionImageFile = document.getElementById('exhibitionImageFile').files[0];
        const exhibitionBrochureFile = document.getElementById('exhibitionBrochureFile').files[0];

        // Show progress
        const submitBtn = document.getElementById('addExhibitionForm').querySelector('button[type="submit"]');
        const originalText = submitBtn.innerHTML;
        submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Creating...';
        submitBtn.disabled = true;

        try {
          let imageUrl = '';
          let brochureUrl = '';

          if (exhibitionImageFile) {
            imageUrl = await uploadFile(exhibitionImageFile, 'image');
          }

          if (exhibitionBrochureFile) {
            brochureUrl = await uploadFile(exhibitionBrochureFile, 'document');
          }

          const exhibitionData = {
            title: document.getElementById('exhibitionTitle').value,
            description: document.getElementById('exhibitionDescription').value,
            start_date: document.getElementById('exhibitionStartDate').value,
            end_date: document.getElementById('exhibitionEndDate').value,
            location: document.getElementById('exhibitionLocation').value,
            curator: document.getElementById('exhibitionCurator').value,
            curator_bio: document.getElementById('exhibitionCuratorBio').value || null,
            image_url: imageUrl,
            brochure_url: brochureUrl,
            virtual_tour_url: document.getElementById('exhibitionVirtualTourUrl').value || null,
            is_featured: document.getElementById('exhibitionFeatured').checked,
            is_published: document.getElementById('exhibitionPublished').checked,
            status: document.getElementById('exhibitionPublished').checked ? 'published' : 'draft'
          };

          await apiRequest('/education/exhibitions', {
            method: 'POST',
            body: JSON.stringify(exhibitionData)
          });
          
          hideAddExhibitionModal();
          loadExhibitions();
          loadEducationStats();
          alert('Exhibition created successfully!');
        } catch (error) {
          console.error('Failed to create exhibition:', error);
          alert('Failed to create exhibition: ' + error.message);
        } finally {
          submitBtn.innerHTML = originalText;
          submitBtn.disabled = false;
        }
      });

      // Education Management Functions
      async function toggleEducationFeatured(type, id, featured) {
        try {
          await apiRequest(`/education/${type}/${id}`, {
            method: 'PUT',
            body: JSON.stringify({ is_featured: featured })
          });
          
          // Reload current tab to reflect changes
          switch(type) {
            case 'workshops':
              loadWorkshops();
              break;
            case 'tutorials':
              loadTutorials();
              break;
            case 'exhibitions':
              loadExhibitions();
              break;
          }
        } catch (error) {
          console.error('Failed to toggle featured status:', error);
          alert('Failed to update featured status: ' + error.message);
        }
      }

      async function deleteEducationItem(type, id) {
        if (confirm('Are you sure you want to delete this item?')) {
          try {
            await apiRequest(`/education/${type}/${id}`, { method: 'DELETE' });
            
            // Reload current tab and stats to reflect changes
            switch(type) {
              case 'workshops':
                loadWorkshops();
                break;
              case 'tutorials':
                loadTutorials();
                break;
              case 'exhibitions':
                loadExhibitions();
                break;
            }
            loadEducationStats();
          } catch (error) {
            console.error('Failed to delete education item:', error);
            alert('Failed to delete item: ' + error.message);
          }
        }
      }

      // Edit functions (placeholder for now)
      function editWorkshop(workshop) {
        alert('Edit workshop functionality coming soon!');
      }

      function editTutorial(tutorial) {
        alert('Edit tutorial functionality coming soon!');
      }

      function editExhibition(exhibition) {
        alert('Edit exhibition functionality coming soon!');
      }

      // ===== RESEARCH INSIGHTS FUNCTIONS FROM SCRIPT 2 =====

      // Load Research Stats for Dashboard
      async function loadResearchStats() {
        try {
          const data = await apiRequest('/research/admin/stats');
          researchStats.articles = data.data.total || 0;
          researchStats.sustainable = data.data.sustainable || 0;
          researchStats.climate = data.data.climate || 0;
          researchStats.social = data.data.social || 0;
          researchStats.technological = data.data.technological || 0;
          researchStats.featured = data.data.featured || 0;

          // Update dashboard stats
          document.getElementById('researchArticlesCount').textContent = researchStats.articles;
          document.getElementById('researchTotalArticles').textContent = researchStats.articles;
          document.getElementById('researchSustainable').textContent = researchStats.sustainable;
          document.getElementById('researchClimate').textContent = researchStats.climate;
          document.getElementById('researchSocial').textContent = researchStats.social;
          document.getElementById('researchFeatured').textContent = researchStats.featured;
        } catch (error) {
          console.error('Failed to load research stats:', error);
        }
      }

      // Load All Research Articles
      async function loadResearchArticles() {
        try {
          const data = await apiRequest('/research/admin/articles');
          const container = document.getElementById('researchArticlesList');
          container.innerHTML = '';

          if (!data.data || data.data.length === 0) {
            container.innerHTML = '<p style="text-align: center; color: var(--text-muted); padding: 2rem;">No research articles found.</p>';
            return;
          }

          data.data.forEach(article => {
            const el = createResearchArticleElement(article);
            container.appendChild(el);
          });
        } catch (error) {
          console.error('Failed to load research articles:', error);
        }
      }

      // Load Sustainable Research
      async function loadSustainableResearch() {
        try {
          const data = await apiRequest('/research/articles/sustainable');
          const container = document.getElementById('sustainableResearchList');
          container.innerHTML = '';

          if (!data.data || data.data.length === 0) {
            container.innerHTML = '<p style="text-align: center; color: var(--text-muted); padding: 2rem;">No sustainable design research found.</p>';
            return;
          }

          data.data.forEach(article => {
            const el = createResearchArticleElement(article);
            container.appendChild(el);
          });
        } catch (error) {
          console.error('Failed to load sustainable research:', error);
        }
      }

      // Load Climate Research
      async function loadClimateResearch() {
        try {
          const data = await apiRequest('/research/articles/climate');
          const container = document.getElementById('climateResearchList');
          container.innerHTML = '';

          if (!data.data || data.data.length === 0) {
            container.innerHTML = '<p style="text-align: center; color: var(--text-muted); padding: 2rem;">No climate resilience research found.</p>';
            return;
          }

          data.data.forEach(article => {
            const el = createResearchArticleElement(article);
            container.appendChild(el);
          });
        } catch (error) {
          console.error('Failed to load climate research:', error);
        }
      }

      // Load Social Research
      async function loadSocialResearch() {
        try {
          const data = await apiRequest('/research/articles/social');
          const container = document.getElementById('socialResearchList');
          container.innerHTML = '';

          if (!data.data || data.data.length === 0) {
            container.innerHTML = '<p style="text-align: center; color: var(--text-muted); padding: 2rem;">No social impact research found.</p>';
            return;
          }

          data.data.forEach(article => {
            const el = createResearchArticleElement(article);
            container.appendChild(el);
          });
        } catch (error) {
          console.error('Failed to load social research:', error);
        }
      }

      // Load Technological Research
      async function loadTechnologicalResearch() {
        try {
          const data = await apiRequest('/research/articles/technological');
          const container = document.getElementById('technologicalResearchList');
          container.innerHTML = '';

          if (!data.data || data.data.length === 0) {
            container.innerHTML = '<p style="text-align: center; color: var(--text-muted); padding: 2rem;">No technological innovation research found.</p>';
            return;
          }

          data.data.forEach(article => {
            const el = createResearchArticleElement(article);
            container.appendChild(el);
          });
        } catch (error) {
          console.error('Failed to load technological research:', error);
        }
      }

      // Create research article element for display
      function createResearchArticleElement(article) {
        const el = document.createElement('div');
        el.className = 'item';
        
        const content = document.createElement('div');
        content.className = 'item-content';
        
        const title = document.createElement('h4');
        title.className = 'item-title';
        title.textContent = article.title;
        
        const meta = document.createElement('div');
        meta.className = 'item-meta';
        
        const category = document.createElement('span');
        category.className = 'item-type';
        category.textContent = getCategoryDisplayName(article.category);
        
        const authors = document.createElement('span');
        authors.className = 'item-date';
        authors.textContent = article.authors || 'Unknown authors';
        
        meta.appendChild(category);
        meta.appendChild(authors);
        
        const preview = document.createElement('div');
        preview.className = 'item-preview';
        preview.textContent = article.abstract || article.content?.substring(0, 150) + '...' || 'No abstract available';
        
        // Add publication date if available
        if (article.publication_date) {
          const pubDate = document.createElement('div');
          pubDate.className = 'item-date';
          pubDate.textContent = `Published: ${new Date(article.publication_date).toLocaleDateString()}`;
          meta.appendChild(pubDate);
        }
        
        // Add image preview if available
        if (article.main_image) {
          const imgContainer = document.createElement('div');
          imgContainer.style.marginLeft = '1rem';
          imgContainer.style.flexShrink = '0';
          
          const img = document.createElement('img');
          img.src = article.main_image;
          img.alt = article.title;
          img.style.width = '100px';
          img.style.height = '80px';
          img.style.objectFit = 'cover';
          img.style.borderRadius = '6px';
          img.style.border = '1px solid var(--border-light)';
          
          imgContainer.appendChild(img);
          el.appendChild(imgContainer);
        }
        
        content.appendChild(title);
        content.appendChild(meta);
        content.appendChild(preview);

        const actions = document.createElement('div');
        actions.className = 'item-actions';
        
        const editBtn = document.createElement('button');
        editBtn.className = 'btn-secondary';
        editBtn.innerHTML = '<i class="fas fa-edit"></i> Edit';
        editBtn.onclick = () => editResearchArticle(article);
        
        const toggleBtn = document.createElement('button');
        toggleBtn.className = article.is_published ? 'btn-warning' : 'btn-primary';
        toggleBtn.innerHTML = `<i class="fas ${article.is_published ? 'fa-eye-slash' : 'fa-eye'}"></i> ${article.is_published ? 'Unpublish' : 'Publish'}`;
        toggleBtn.onclick = async () => {
          await toggleResearchArticle(article.id, !article.is_published);
        };
        
        const featuredBtn = document.createElement('button');
        featuredBtn.className = article.is_featured ? 'btn-warning' : 'btn-secondary';
        featuredBtn.innerHTML = `<i class="fas ${article.is_featured ? 'fa-star' : 'fa-star'}"></i> ${article.is_featured ? 'Unfeature' : 'Feature'}`;
        featuredBtn.onclick = async () => {
          await toggleFeaturedResearchArticle(article.id, !article.is_featured);
        };
        
        const del = document.createElement('button');
        del.className = 'btn-danger';
        del.innerHTML = '<i class="fas fa-trash"></i> Delete';
        del.onclick = async () => {
          if (confirm('Are you sure you want to delete this research article?')) {
            await deleteResearchArticle(article.id);
          }
        };
        
        actions.appendChild(editBtn);
        actions.appendChild(toggleBtn);
        actions.appendChild(featuredBtn);
        actions.appendChild(del);
        content.appendChild(actions);
        
        el.appendChild(content);
        return el;
      }

      function getCategoryDisplayName(category) {
        const categories = {
          'sustainable': 'Sustainable Design',
          'climate': 'Climate Resilience',
          'social': 'Social Impact',
          'technological': 'Technological Innovation'
        };
        return categories[category] || category;
      }

      // Research Modal Functions
      function showAddResearchModal(category = null) {
        if (category) {
          document.getElementById('researchCategory').value = category;
        }
        document.getElementById('addResearchModal').classList.remove('hidden');
        document.getElementById('researchPublicationDate').valueAsDate = new Date();
      }

      function hideAddResearchModal() {
        document.getElementById('addResearchModal').classList.add('hidden');
        document.getElementById('addResearchForm').reset();
      }

      // Form Submissions for Research Articles
      document.getElementById('addResearchForm').addEventListener('submit', async (e) => {
        e.preventDefault();
        
        const submitBtn = document.getElementById('addResearchForm').querySelector('button[type="submit"]');
        const originalText = submitBtn.innerHTML;
        submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Adding...';
        submitBtn.disabled = true;

        try {
          let galleryImages = [];
          const galleryInput = document.getElementById('researchGalleryImages').value;
          if (galleryInput) {
            try {
              galleryImages = JSON.parse(galleryInput);
            } catch (error) {
              throw new Error('Invalid gallery images format. Please use valid JSON array.');
            }
          }

          const articleData = {
            title: document.getElementById('researchTitle').value,
            abstract: document.getElementById('researchAbstract').value,
            content: document.getElementById('researchContent').value,
            category: document.getElementById('researchCategory').value,
            authors: document.getElementById('researchAuthors').value,
            publication_date: document.getElementById('researchPublicationDate').value || null,
            main_image: document.getElementById('researchMainImage').value || null,
            gallery_images: galleryImages,
            display_order: parseInt(document.getElementById('researchDisplayOrder').value) || 0,
            is_featured: document.getElementById('researchFeatured').checked,
            is_published: document.getElementById('researchPublished').checked
          };

          await apiRequest('/research/articles', {
            method: 'POST',
            body: JSON.stringify(articleData)
          });
          
          hideAddResearchModal();
          loadResearchStats();
          showResearchTab(currentResearchTab);
          alert('Research article added successfully!');
        } catch (error) {
          console.error('Failed to add research article:', error);
          alert('Failed to add research article: ' + error.message);
        } finally {
          submitBtn.innerHTML = originalText;
          submitBtn.disabled = false;
        }
      });

      // Research Article CRUD Operations
      async function toggleResearchArticle(id, published) {
        try {
          await apiRequest(`/research/articles/${id}/toggle`, {
            method: 'PATCH'
          });
          loadResearchStats();
          showResearchTab(currentResearchTab);
        } catch (error) {
          console.error('Failed to toggle research article:', error);
          alert('Failed to toggle research article: ' + error.message);
        }
      }

      async function toggleFeaturedResearchArticle(id, featured) {
        try {
          await apiRequest(`/research/articles/${id}/toggle-featured`, {
            method: 'PATCH'
          });
          loadResearchStats();
          showResearchTab(currentResearchTab);
        } catch (error) {
          console.error('Failed to toggle featured research article:', error);
          alert('Failed to toggle featured research article: ' + error.message);
        }
      }

      async function deleteResearchArticle(id) {
        try {
          await apiRequest(`/research/articles/${id}`, {
            method: 'DELETE'
          });
          loadResearchStats();
          showResearchTab(currentResearchTab);
          alert('Research article deleted successfully!');
        } catch (error) {
          console.error('Failed to delete research article:', error);
          alert('Failed to delete research article: ' + error.message);
        }
      }

      function editResearchArticle(article) {
        alert('Edit research article functionality coming soon!');
      }

      // Research Tab Management
      function showResearchTab(tabName) {
        document.querySelectorAll('.get-involved-content').forEach(content => {
          content.classList.remove('active');
        });
        document.querySelectorAll('.get-involved-tab').forEach(tab => {
          tab.classList.remove('active');
        });

        document.getElementById(tabName + 'Tab').classList.add('active');
        document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');
        currentResearchTab = tabName;

        // Load data for the tab
        switch(tabName) {
          case 'research-all':
            loadResearchArticles();
            break;
          case 'research-sustainable':
            loadSustainableResearch();
            break;
          case 'research-climate':
            loadClimateResearch();
            break;
          case 'research-social':
            loadSocialResearch();
            break;
          case 'research-technological':
            loadTechnologicalResearch();
            break;
        }
      }

      // ===== NEWS & EVENTS FUNCTIONS FROM SCRIPT 2 =====

      // Load News & Events Stats
      async function loadNewsEventsStats() {
        try {
          const data = await apiRequest('/newsevents/health');
          newsEventsStats.news = data.counts?.news || 0;
          newsEventsStats.events = data.counts?.events || 0;
          
          // For featured counts, we'd need to load actual data and filter
          // For now, we'll set placeholder values
          newsEventsStats.featuredNews = 0;
          newsEventsStats.featuredEvents = 0;

          // Update dashboard stats
          document.getElementById('newsCount').textContent = newsEventsStats.news;
          document.getElementById('eventsCount').textContent = newsEventsStats.events;
          
          // Update news & events section stats
          document.getElementById('newsTotal').textContent = newsEventsStats.news;
          document.getElementById('eventsTotal').textContent = newsEventsStats.events;
          document.getElementById('newsFeatured').textContent = newsEventsStats.featuredNews;
          document.getElementById('eventsFeatured').textContent = newsEventsStats.featuredEvents;
        } catch (error) {
          console.error('Failed to load news & events stats:', error);
        }
      }

      // Load All News & Events
      async function loadAllNewsEvents() {
        try {
          const data = await apiRequest('/newsevents/all');
          const container = document.getElementById('allNewsEventsList');
          container.innerHTML = '';

          if (!data || data.length === 0) {
            container.innerHTML = '<p style="text-align: center; color: var(--text-muted); padding: 2rem;">No news or events found.</p>';
            return;
          }

          data.forEach(item => {
            const el = createNewsEventElement(item);
            container.appendChild(el);
          });
        } catch (error) {
          console.error('Failed to load all news & events:', error);
        }
      }

      // Load News Articles
      async function loadNewsArticles() {
        try {
          const data = await apiRequest('/newsevents/news');
          const container = document.getElementById('newsArticlesList');
          container.innerHTML = '';

          if (!data || data.length === 0) {
            container.innerHTML = '<p style="text-align: center; color: var(--text-muted); padding: 2rem;">No news articles found.</p>';
            return;
          }

          data.forEach(article => {
            const el = createNewsEventElement(article);
            container.appendChild(el);
          });
        } catch (error) {
          console.error('Failed to load news articles:', error);
        }
      }

      // Load Events
      async function loadEvents() {
        try {
          const data = await apiRequest('/newsevents/events');
          const container = document.getElementById('eventsList');
          container.innerHTML = '';

          if (!data || data.length === 0) {
            container.innerHTML = '<p style="text-align: center; color: var(--text-muted); padding: 2rem;">No events found.</p>';
            return;
          }

          data.forEach(event => {
            const el = createNewsEventElement(event);
            container.appendChild(el);
          });
        } catch (error) {
          console.error('Failed to load events:', error);
        }
      }

      // Create news/event element for display
      function createNewsEventElement(item) {
        const el = document.createElement('div');
        el.className = 'item';
        
        const content = document.createElement('div');
        content.className = 'item-content';
        
        const title = document.createElement('h4');
        title.className = 'item-title';
        title.textContent = item.title;
        
        const meta = document.createElement('div');
        meta.className = 'item-meta';
        
        const type = document.createElement('span');
        type.className = item.type === 'news' ? 'news-badge' : 'event-badge';
        type.textContent = item.type === 'news' ? 'News' : 'Event';
        
        const author = document.createElement('span');
        author.className = 'item-type';
        author.textContent = `By ${item.author}`;
        
        const date = document.createElement('span');
        date.className = 'item-date';
        date.textContent = new Date(item.date).toLocaleDateString();
        
        const status = document.createElement('span');
        status.className = 'item-date';
        status.textContent = item.is_published ? 'Published' : 'Draft';
        status.style.color = item.is_published ? 'var(--success)' : 'var(--warning)';
        
        meta.appendChild(type);
        meta.appendChild(author);
        meta.appendChild(date);
        meta.appendChild(status);
        
        const preview = document.createElement('div');
        preview.className = 'item-preview';
        preview.textContent = item.excerpt || item.description || 'No excerpt available';
        
        // Add date and location for events
        if (item.type === 'event') {
          const dateDisplay = document.createElement('div');
          dateDisplay.className = 'date-display';
          dateDisplay.innerHTML = `<strong>Date:</strong> ${new Date(item.eventDate).toLocaleDateString()}`;
          
          const timeDisplay = document.createElement('div');
          timeDisplay.className = 'date-display';
          timeDisplay.innerHTML = `<strong>Time:</strong> ${item.eventTime}`;
          
          const locationDisplay = document.createElement('div');
          locationDisplay.className = 'location-display';
          locationDisplay.innerHTML = `<strong>Location:</strong> ${item.location}`;
          
          content.appendChild(dateDisplay);
          content.appendChild(timeDisplay);
          content.appendChild(locationDisplay);
        }
        
        // Add image preview if available
        if (item.image) {
          const imgContainer = document.createElement('div');
          imgContainer.style.marginLeft = '1rem';
          imgContainer.style.flexShrink = '0';
          
          const img = document.createElement('img');
          img.src = item.image;
          img.alt = item.title;
          img.style.width = '100px';
          img.style.height = '80px';
          img.style.objectFit = 'cover';
          img.style.borderRadius = '6px';
          img.style.border = '1px solid var(--border-light)';
          
          imgContainer.appendChild(img);
          el.appendChild(imgContainer);
        }
        
        content.appendChild(title);
        content.appendChild(meta);
        content.appendChild(preview);

        const actions = document.createElement('div');
        actions.className = 'item-actions';
        
        const editBtn = document.createElement('button');
        editBtn.className = 'btn-secondary';
        editBtn.innerHTML = '<i class="fas fa-edit"></i> Edit';
        editBtn.onclick = () => editNewsEvent(item);
        
        const toggleBtn = document.createElement('button');
        toggleBtn.className = item.is_published ? 'btn-warning' : 'btn-primary';
        toggleBtn.innerHTML = `<i class="fas ${item.is_published ? 'fa-eye-slash' : 'fa-eye'}"></i> ${item.is_published ? 'Unpublish' : 'Publish'}`;
        toggleBtn.onclick = async () => {
          await toggleNewsEvent(item.id, !item.is_published, item.type);
        };
        
        const featuredBtn = document.createElement('button');
        featuredBtn.className = item.is_featured ? 'btn-warning' : 'btn-secondary';
        featuredBtn.innerHTML = `<i class="fas ${item.is_featured ? 'fa-star' : 'fa-star'}"></i> ${item.is_featured ? 'Unfeature' : 'Feature'}`;
        featuredBtn.onclick = async () => {
          await toggleFeaturedNewsEvent(item.id, !item.is_featured, item.type);
        };
        
        const del = document.createElement('button');
        del.className = 'btn-danger';
        del.innerHTML = '<i class="fas fa-trash"></i> Delete';
        del.onclick = async () => {
          if (confirm(`Are you sure you want to delete this ${item.type}?`)) {
            await deleteNewsEvent(item.id, item.type);
          }
        };
        
        actions.appendChild(editBtn);
        actions.appendChild(toggleBtn);
        actions.appendChild(featuredBtn);
        actions.appendChild(del);
        content.appendChild(actions);
        
        el.appendChild(content);
        return el;
      }

      // News & Events Modal Functions
      function showAddNewsModal() {
        document.getElementById('addNewsModal').classList.remove('hidden');
        document.getElementById('newsDate').valueAsDate = new Date();
        initializeDragAndDrop();
      }

      function hideAddNewsModal() {
        document.getElementById('addNewsModal').classList.add('hidden');
        document.getElementById('addNewsForm').reset();
        clearNewsUploads();
      }

      function showAddEventModal() {
        document.getElementById('addEventModal').classList.remove('hidden');
        document.getElementById('eventDate').valueAsDate = new Date();
        initializeDragAndDrop();
      }

      function hideAddEventModal() {
        document.getElementById('addEventModal').classList.add('hidden');
        document.getElementById('addEventForm').reset();
        clearEventUploads();
      }

      // News Image Upload
      function handleNewsImageUpload(event) {
        const file = event.target.files[0];
        if (!file) return;

        if (!file.type.startsWith('image/')) {
          alert('Please select an image file');
          return;
        }

        if (file.size > 5 * 1024 * 1024) {
          alert('Image size must be less than 5MB');
          return;
        }

        newsImageFile = file;
        showImagePreview(file, 'newsImagePreview', true);
        uploadNewsImage(file);
      }

      // Event Image Upload
      function handleEventImageUpload(event) {
        const file = event.target.files[0];
        if (!file) return;

        if (!file.type.startsWith('image/')) {
          alert('Please select an image file');
          return;
        }

        if (file.size > 5 * 1024 * 1024) {
          alert('Image size must be less than 5MB');
          return;
        }

        eventImageFile = file;
        showImagePreview(file, 'eventImagePreview', true);
        uploadEventImage(file);
      }

      // Upload News Image
      async function uploadNewsImage(file) {
        const formData = new FormData();
        formData.append('file', file);
        formData.append('type', 'news');

        try {
          const response = await fetch(`${API_BASE_URL}/upload`, {
            method: 'POST',
            headers: {
              'Authorization': `Bearer ${authToken || localStorage.getItem('aspire_token')}`
            },
            body: formData
          });

          if (!response.ok) {
            throw new Error('Upload failed');
          }

          const data = await response.json();
          uploadedNewsImageUrl = data.fileUrl;
          document.getElementById('newsImage').value = uploadedNewsImageUrl;
          
          console.log('✅ News image uploaded:', uploadedNewsImageUrl);
        } catch (error) {
          console.error('❌ News image upload failed:', error);
          alert('Failed to upload news image: ' + error.message);
        }
      }

      // Upload Event Image
      async function uploadEventImage(file) {
        const formData = new FormData();
        formData.append('file', file);
        formData.append('type', 'event');

        try {
          const response = await fetch(`${API_BASE_URL}/upload`, {
            method: 'POST',
            headers: {
              'Authorization': `Bearer ${authToken || localStorage.getItem('aspire_token')}`
            },
            body: formData
          });

          if (!response.ok) {
            throw new Error('Upload failed');
          }

          const data = await response.json();
          uploadedEventImageUrl = data.fileUrl;
          document.getElementById('eventImage').value = uploadedEventImageUrl;
          
          console.log('✅ Event image uploaded:', uploadedEventImageUrl);
        } catch (error) {
          console.error('❌ Event image upload failed:', error);
          alert('Failed to upload event image: ' + error.message);
        }
      }

      // Clear uploads
      function clearNewsUploads() {
        newsImageFile = null;
        uploadedNewsImageUrl = '';
        document.getElementById('newsImagePreview').innerHTML = '';
        document.getElementById('newsImage').value = '';
        document.getElementById('newsImageInput').value = '';
      }

      function clearEventUploads() {
        eventImageFile = null;
        uploadedEventImageUrl = '';
        document.getElementById('eventImagePreview').innerHTML = '';
        document.getElementById('eventImage').value = '';
        document.getElementById('eventImageInput').value = '';
      }

      // Form Submissions
      document.getElementById('addNewsForm').addEventListener('submit', async (e) => {
        e.preventDefault();
        
        const submitBtn = document.getElementById('addNewsForm').querySelector('button[type="submit"]');
        const originalText = submitBtn.innerHTML;
        submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Adding...';
        submitBtn.disabled = true;

        try {
          const newsData = {
            title: document.getElementById('newsTitle').value,
            excerpt: document.getElementById('newsExcerpt').value,
            content: document.getElementById('newsContent').value,
            category: document.getElementById('newsCategory').value,
            author: document.getElementById('newsAuthor').value,
            date: document.getElementById('newsDate').value,
            read_time: document.getElementById('newsReadTime').value,
            image_url: uploadedNewsImageUrl,
            is_featured: document.getElementById('newsFeatured').checked,
            is_published: document.getElementById('newsPublished').checked
          };

          await apiRequest('/newsevents/news', {
            method: 'POST',
            body: JSON.stringify(newsData)
          });
          
          hideAddNewsModal();
          loadNewsEventsStats();
          showNewsEventsTab(currentNewsEventsTab);
          alert('News article added successfully!');
        } catch (error) {
          console.error('Failed to add news article:', error);
          alert('Failed to add news article: ' + error.message);
        } finally {
          submitBtn.innerHTML = originalText;
          submitBtn.disabled = false;
        }
      });

      document.getElementById('addEventForm').addEventListener('submit', async (e) => {
        e.preventDefault();
        
        const submitBtn = document.getElementById('addEventForm').querySelector('button[type="submit"]');
        const originalText = submitBtn.innerHTML;
        submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Adding...';
        submitBtn.disabled = true;

        try {
          const eventData = {
            title: document.getElementById('eventTitle').value,
            description: document.getElementById('eventDescription').value,
            excerpt: document.getElementById('eventExcerpt').value,
            event_date: document.getElementById('eventDate').value,
            event_time: document.getElementById('eventTime').value,
            location: document.getElementById('eventLocation').value,
            category: document.getElementById('eventCategory').value,
            author: document.getElementById('eventAuthor').value,
            read_time: document.getElementById('eventReadTime').value,
            image_url: uploadedEventImageUrl,
            is_featured: document.getElementById('eventFeatured').checked,
            is_published: document.getElementById('eventPublished').checked
          };

          await apiRequest('/newsevents/events', {
            method: 'POST',
            body: JSON.stringify(eventData)
          });
          
          hideAddEventModal();
          loadNewsEventsStats();
          showNewsEventsTab(currentNewsEventsTab);
          alert('Event added successfully!');
        } catch (error) {
          console.error('Failed to add event:', error);
          alert('Failed to add event: ' + error.message);
        } finally {
          submitBtn.innerHTML = originalText;
          submitBtn.disabled = false;
        }
      });

      // News & Events CRUD Operations
      async function toggleNewsEvent(id, published, type) {
        try {
          // This would require additional backend endpoints for toggling status
          // For now, we'll reload the data
          loadNewsEventsStats();
          showNewsEventsTab(currentNewsEventsTab);
        } catch (error) {
          console.error('Failed to toggle news/event:', error);
          alert('Failed to toggle news/event: ' + error.message);
        }
      }

      async function toggleFeaturedNewsEvent(id, featured, type) {
        try {
          // This would require additional backend endpoints for toggling featured status
          // For now, we'll reload the data
          loadNewsEventsStats();
          showNewsEventsTab(currentNewsEventsTab);
        } catch (error) {
          console.error('Failed to toggle featured news/event:', error);
          alert('Failed to toggle featured news/event: ' + error.message);
        }
      }

      async function deleteNewsEvent(id, type) {
        try {
          await apiRequest(`/newsevents/${type === 'news' ? 'news' : 'events'}/${id}`, {
            method: 'DELETE'
          });
          loadNewsEventsStats();
          showNewsEventsTab(currentNewsEventsTab);
          alert(`${type === 'news' ? 'News article' : 'Event'} deleted successfully!`);
        } catch (error) {
          console.error('Failed to delete news/event:', error);
          alert('Failed to delete news/event: ' + error.message);
        }
      }

      function editNewsEvent(item) {
        alert(`Edit ${item.type} functionality coming soon!`);
        // TODO: Implement edit functionality
      }

      // News & Events Tab Management
      function showNewsEventsTab(tabName) {
        document.querySelectorAll('.get-involved-content').forEach(content => {
          content.classList.remove('active');
        });
        document.querySelectorAll('.get-involved-tab').forEach(tab => {
          tab.classList.remove('active');
        });

        document.getElementById(tabName + 'Tab').classList.add('active');
        document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');
        currentNewsEventsTab = tabName;

        // Load data for the tab
        switch(tabName) {
          case 'newsevents-all':
            loadAllNewsEvents();
            break;
          case 'newsevents-news':
            loadNewsArticles();
            break;
          case 'newsevents-events':
            loadEvents();
            break;
        }
      }

      // ===== FILE UPLOAD FUNCTIONS FROM SCRIPT 2 =====

      // Handle main image upload
      function handleMainImageUpload(event) {
        const file = event.target.files[0];
        if (!file) return;

        // Validate file type
        if (!file.type.startsWith('image/')) {
          alert('Please select an image file');
          return;
        }

        // Validate file size (5MB)
        if (file.size > 5 * 1024 * 1024) {
          alert('Image size must be less than 5MB');
          return;
        }

        mainImageFile = file;
        showImagePreview(file, 'mainImagePreview', true);
        
        // Upload the file immediately
        uploadMainImage(file);
      }

      // Handle gallery images upload
      function handleGalleryImagesUpload(event) {
        const files = Array.from(event.target.files);
        if (files.length === 0) return;

        // Validate files
        const validFiles = files.filter(file => {
          if (!file.type.startsWith('image/')) {
            alert(`Skipping ${file.name}: Not an image file`);
            return false;
          }
          if (file.size > 5 * 1024 * 1024) {
            alert(`Skipping ${file.name}: File size must be less than 5MB`);
            return false;
          }
          return true;
        });

        // Add to gallery files array
        galleryImageFiles = [...galleryImageFiles, ...validFiles];
        
        // Show previews
        validFiles.forEach(file => {
          showImagePreview(file, 'galleryImagesPreview', false);
        });

        // Upload gallery images
        uploadGalleryImages(validFiles);
      }

      // Show image preview
      function showImagePreview(file, containerId, isMain) {
        const container = document.getElementById(containerId);
        const reader = new FileReader();

        reader.onload = function(e) {
          const previewItem = document.createElement('div');
          previewItem.className = 'preview-item';
          
          const img = document.createElement('img');
          img.src = e.target.result;
          img.alt = file.name;
          
          const removeBtn = document.createElement('button');
          removeBtn.className = 'remove-btn';
          removeBtn.innerHTML = '<i class="fas fa-times"></i>';
          removeBtn.onclick = function() {
            if (isMain) {
              mainImageFile = null;
              uploadedMainImageUrl = '';
              document.getElementById('designProjectMainImage').value = '';
            } else {
              galleryImageFiles = galleryImageFiles.filter(f => f !== file);
              // Remove from uploaded URLs if already uploaded
              const fileName = file.name;
              uploadedGalleryImageUrls = uploadedGalleryImageUrls.filter(url => !url.includes(fileName));
            }
            previewItem.remove();
          };

          previewItem.appendChild(img);
          previewItem.appendChild(removeBtn);
          container.appendChild(previewItem);
        };

        reader.readAsDataURL(file);
      }

      // Upload main image
      async function uploadMainImage(file) {
        const formData = new FormData();
        formData.append('file', file);
        formData.append('type', 'design-main');

        try {
          const response = await fetch(`${API_BASE_URL}/upload`, {
            method: 'POST',
            headers: {
              'Authorization': `Bearer ${authToken || localStorage.getItem('aspire_token')}`
            },
            body: formData
          });

          if (!response.ok) {
            throw new Error('Upload failed');
          }

          const data = await response.json();
          uploadedMainImageUrl = data.fileUrl;
          document.getElementById('designProjectMainImage').value = uploadedMainImageUrl;
          
          console.log('✅ Main image uploaded:', uploadedMainImageUrl);
        } catch (error) {
          console.error('❌ Main image upload failed:', error);
          alert('Failed to upload main image: ' + error.message);
        }
      }

      // Upload gallery images
      async function uploadGalleryImages(files) {
        for (const file of files) {
          const formData = new FormData();
          formData.append('file', file);
          formData.append('type', 'design-gallery');

          try {
            const response = await fetch(`${API_BASE_URL}/upload`, {
              method: 'POST',
              headers: {
                'Authorization': `Bearer ${authToken || localStorage.getItem('aspire_token')}`
              },
              body: formData
            });

            if (!response.ok) {
              throw new Error(`Upload failed for ${file.name}`);
            }

            const data = await response.json();
            uploadedGalleryImageUrls.push(data.fileUrl);
            
            console.log('✅ Gallery image uploaded:', data.fileUrl);
          } catch (error) {
            console.error(`❌ Gallery image upload failed for ${file.name}:`, error);
            alert(`Failed to upload ${file.name}: ${error.message}`);
          }
        }

        // Update the hidden input with JSON array of URLs
        document.getElementById('designProjectGalleryImages').value = JSON.stringify(uploadedGalleryImageUrls);
      }

      // Clear all uploads when modal is closed
      function clearUploads() {
        mainImageFile = null;
        galleryImageFiles = [];
        uploadedMainImageUrl = '';
        uploadedGalleryImageUrls = [];
        
        document.getElementById('mainImagePreview').innerHTML = '';
        document.getElementById('galleryImagesPreview').innerHTML = '';
        document.getElementById('designProjectMainImage').value = '';
        document.getElementById('designProjectGalleryImages').value = '';
        document.getElementById('mainImageInput').value = '';
        document.getElementById('galleryImagesInput').value = '';
      }

      // ===== DESIGN PROJECTS FUNCTIONS FROM SCRIPT 2 =====

      // Load Design Stats for Dashboard
      async function loadDesignStats() {
        try {
          const data = await apiRequest('/design/admin/stats');
          designStats.total = data.data.total || 0;
          designStats.academic = data.data.academic || 0;
          designStats.professional = data.data.professional || 0;
          designStats.competition = data.data.competition || 0;
          designStats.featured = data.data.featured || 0;

          // Update dashboard stats
          document.getElementById('designProjectsCount').textContent = designStats.total;
          document.getElementById('designTotalProjects').textContent = designStats.total;
          document.getElementById('designAcademicProjects').textContent = designStats.academic;
          document.getElementById('designProfessionalProjects').textContent = designStats.professional;
          document.getElementById('designCompetitionProjects').textContent = designStats.competition;
        } catch (error) {
          console.error('Failed to load design stats:', error);
        }
      }

      // Load All Design Projects
      async function loadDesignProjects() {
        try {
          const data = await apiRequest('/design/admin/projects');
          const container = document.getElementById('designProjectsList');
          container.innerHTML = '';

          if (!data.data || data.data.length === 0) {
            container.innerHTML = '<p style="text-align: center; color: var(--text-muted); padding: 2rem;">No design projects found.</p>';
            return;
          }

          data.data.forEach(project => {
            const el = createDesignProjectElement(project);
            container.appendChild(el);
          });
        } catch (error) {
          console.error('Failed to load design projects:', error);
        }
      }

      // Load Academic Projects
      async function loadAcademicProjects() {
        try {
          const data = await apiRequest('/design/admin/projects/academic');
          const container = document.getElementById('academicProjectsList');
          container.innerHTML = '';

          if (!data.data || data.data.length === 0) {
            container.innerHTML = '<p style="text-align: center; color: var(--text-muted); padding: 2rem;">No academic projects found.</p>';
            return;
          }

          data.data.forEach(project => {
            const el = createDesignProjectElement(project);
            container.appendChild(el);
          });
        } catch (error) {
          console.error('Failed to load academic projects:', error);
        }
      }

      // Load Professional Projects
      async function loadProfessionalProjects() {
        try {
          const data = await apiRequest('/design/admin/projects/professional');
          const container = document.getElementById('professionalProjectsList');
          container.innerHTML = '';

          if (!data.data || data.data.length === 0) {
            container.innerHTML = '<p style="text-align: center; color: var(--text-muted); padding: 2rem;">No professional projects found.</p>';
            return;
          }

          data.data.forEach(project => {
            const el = createDesignProjectElement(project);
            container.appendChild(el);
          });
        } catch (error) {
          console.error('Failed to load professional projects:', error);
        }
      }

      // Load Competition Projects
      async function loadCompetitionProjects() {
        try {
          const data = await apiRequest('/design/admin/projects/competition');
          const container = document.getElementById('competitionProjectsList');
          container.innerHTML = '';

          if (!data.data || data.data.length === 0) {
            container.innerHTML = '<p style="text-align: center; color: var(--text-muted); padding: 2rem;">No competition projects found.</p>';
            return;
          }

          data.data.forEach(project => {
            const el = createDesignProjectElement(project);
            container.appendChild(el);
          });
        } catch (error) {
          console.error('Failed to load competition projects:', error);
        }
      }

      // Create design project element for display
      function createDesignProjectElement(project) {
        const el = document.createElement('div');
        el.className = 'item';
        el.setAttribute('data-sector', project.sector || '');
        
        const content = document.createElement('div');
        content.className = 'item-content';
        
        const title = document.createElement('h4');
        title.className = 'item-title';
        title.textContent = project.title;
        
        const meta = document.createElement('div');
        meta.className = 'item-meta';
        
        const category = document.createElement('span');
        category.className = 'item-type';
        category.textContent = project.category;
        
        const sector = document.createElement('span');
        sector.className = 'sector-badge';
        sector.textContent = sectorLabels[project.sector] || project.sector || 'No Sector';
        
        const status = document.createElement('span');
        status.className = 'item-date';
        status.textContent = project.is_published ? 'Published' : 'Draft';
        status.style.color = project.is_published ? 'var(--success)' : 'var(--warning)';
        
        meta.appendChild(category);
        meta.appendChild(sector);
        meta.appendChild(status);
        
        const preview = document.createElement('div');
        preview.className = 'item-preview';
        preview.textContent = project.summary || 'No summary available';
        
        // Add image preview if available
        if (project.main_image) {
          const imgContainer = document.createElement('div');
          imgContainer.style.marginLeft = '1rem';
          imgContainer.style.flexShrink = '0';
          
          const img = document.createElement('img');
          img.src = project.main_image;
          img.alt = project.title;
          img.style.width = '100px';
          img.style.height = '80px';
          img.style.objectFit = 'cover';
          img.style.borderRadius = '6px';
          img.style.border = '1px solid var(--border-light)';
          
          imgContainer.appendChild(img);
          el.appendChild(imgContainer);
        }
        
        content.appendChild(title);
        content.appendChild(meta);
        content.appendChild(preview);

        const actions = document.createElement('div');
        actions.className = 'item-actions';
        
        const editBtn = document.createElement('button');
        editBtn.className = 'btn-secondary';
        editBtn.innerHTML = '<i class="fas fa-edit"></i> Edit';
        editBtn.onclick = () => editDesignProject(project);
        
        const toggleBtn = document.createElement('button');
        toggleBtn.className = project.is_published ? 'btn-warning' : 'btn-primary';
        toggleBtn.innerHTML = `<i class="fas ${project.is_published ? 'fa-eye-slash' : 'fa-eye'}"></i> ${project.is_published ? 'Unpublish' : 'Publish'}`;
        toggleBtn.onclick = async () => {
          await toggleDesignProject(project.id, !project.is_published);
        };
        
        const featuredBtn = document.createElement('button');
        featuredBtn.className = project.is_featured ? 'btn-warning' : 'btn-secondary';
        featuredBtn.innerHTML = `<i class="fas ${project.is_featured ? 'fa-star' : 'fa-star'}"></i> ${project.is_featured ? 'Unfeature' : 'Feature'}`;
        featuredBtn.onclick = async () => {
          await toggleFeaturedDesignProject(project.id, !project.is_featured);
        };
        
        const del = document.createElement('button');
        del.className = 'btn-danger';
        del.innerHTML = '<i class="fas fa-trash"></i> Delete';
        del.onclick = async () => {
          if (confirm('Are you sure you want to delete this design project?')) {
            await deleteDesignProject(project.id);
          }
        };
        
        actions.appendChild(editBtn);
        actions.appendChild(toggleBtn);
        actions.appendChild(featuredBtn);
        actions.appendChild(del);
        content.appendChild(actions);
        
        el.appendChild(content);
        return el;
      }

      // Filtering functions for sectors
      function filterDesignProjectsBySector() {
        const sector = document.getElementById('sectorFilter').value;
        filterProjectsBySector('designProjectsList', sector);
      }

      function filterAcademicProjectsBySector() {
        const sector = document.getElementById('academicSectorFilter').value;
        filterProjectsBySector('academicProjectsList', sector);
      }

      function filterProfessionalProjectsBySector() {
        const sector = document.getElementById('professionalSectorFilter').value;
        filterProjectsBySector('professionalProjectsList', sector);
      }

      function filterCompetitionProjectsBySector() {
        const sector = document.getElementById('competitionSectorFilter').value;
        filterProjectsBySector('competitionProjectsList', sector);
      }

      function filterProjectsBySector(containerId, sector) {
        const container = document.getElementById(containerId);
        const projects = container.querySelectorAll('.item');
        
        projects.forEach(project => {
          const projectSector = project.getAttribute('data-sector');
          if (!sector || projectSector === sector) {
            project.style.display = 'flex';
          } else {
            project.style.display = 'none';
          }
        });
      }

      // Modal Functions for Design Projects
      function showAddDesignProjectModal(category = null) {
        if (category) {
          document.getElementById('designProjectCategory').value = category;
        }
        document.getElementById('addDesignProjectModal').classList.remove('hidden');
        
        // Initialize drag and drop
        initializeDragAndDrop();
      }

      function hideAddDesignProjectModal() {
        document.getElementById('addDesignProjectModal').classList.add('hidden');
        document.getElementById('addDesignProjectForm').reset();
        clearUploads();
      }

      // Initialize drag and drop functionality
      function initializeDragAndDrop() {
        const uploadContainers = document.querySelectorAll('.file-upload-container');
        
        uploadContainers.forEach(container => {
          container.addEventListener('dragover', function(e) {
            e.preventDefault();
            this.classList.add('dragover');
          });
          
          container.addEventListener('dragleave', function(e) {
            e.preventDefault();
            this.classList.remove('dragover');
          });
          
          container.addEventListener('drop', function(e) {
            e.preventDefault();
            this.classList.remove('dragover');
            
            const files = e.dataTransfer.files;
            if (files.length > 0) {
              if (this.querySelector('#mainImageInput')) {
                // Main image upload
                handleMainImageUpload({ target: { files: [files[0]] } });
              } else {
                // Gallery images upload
                handleGalleryImagesUpload({ target: { files } });
              }
            }
          });
        });
      }

      // Form Submissions for Design Projects
      document.getElementById('addDesignProjectForm').addEventListener('submit', async (e) => {
        e.preventDefault();
        
        const submitBtn = document.getElementById('addDesignProjectForm').querySelector('button[type="submit"]');
        const originalText = submitBtn.innerHTML;
        submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Adding...';
        submitBtn.disabled = true;

        try {
          // Validate that main image is uploaded
          if (!uploadedMainImageUrl) {
            throw new Error('Please upload a main image before submitting');
          }

          const projectData = {
            title: document.getElementById('designProjectTitle').value,
            summary: document.getElementById('designProjectSummary').value,
            description: document.getElementById('designProjectDescription').value,
            category: document.getElementById('designProjectCategory').value,
            sector: document.getElementById('designProjectSector').value,
            main_image: uploadedMainImageUrl,
            gallery_images: uploadedGalleryImageUrls,
            display_order: parseInt(document.getElementById('designProjectDisplayOrder').value) || 0,
            is_featured: document.getElementById('designProjectFeatured').checked,
            is_published: document.getElementById('designProjectPublished').checked
          };

          await apiRequest('/design/projects', {
            method: 'POST',
            body: JSON.stringify(projectData)
          });
          
          hideAddDesignProjectModal();
          loadDesignStats();
          showDesignTab(currentDesignTab);
          alert('Design project added successfully!');
        } catch (error) {
          console.error('Failed to add design project:', error);
          alert('Failed to add design project: ' + error.message);
        } finally {
          submitBtn.innerHTML = originalText;
          submitBtn.disabled = false;
        }
      });

      // Design Project CRUD Operations
      async function toggleDesignProject(id, published) {
        try {
          await apiRequest(`/design/projects/${id}/toggle`, {
            method: 'PATCH'
          });
          loadDesignStats();
          showDesignTab(currentDesignTab);
        } catch (error) {
          console.error('Failed to toggle design project:', error);
          alert('Failed to toggle design project: ' + error.message);
        }
      }

      async function toggleFeaturedDesignProject(id, featured) {
        try {
          await apiRequest(`/design/projects/${id}/toggle-featured`, {
            method: 'PATCH'
          });
          loadDesignStats();
          showDesignTab(currentDesignTab);
        } catch (error) {
          console.error('Failed to toggle featured design project:', error);
          alert('Failed to toggle featured design project: ' + error.message);
        }
      }

      async function deleteDesignProject(id) {
        try {
          await apiRequest(`/design/projects/${id}`, {
            method: 'DELETE'
          });
          loadDesignStats();
          showDesignTab(currentDesignTab);
          alert('Design project deleted successfully!');
        } catch (error) {
          console.error('Failed to delete design project:', error);
          alert('Failed to delete design project: ' + error.message);
        }
      }

      function editDesignProject(project) {
        alert('Edit design project functionality coming soon!');
        // TODO: Implement edit functionality
      }

      // Design Projects Management Functions
      document.querySelectorAll('.get-involved-tab[data-tab]').forEach(tab => {
        tab.addEventListener('click', () => {
          const tabName = tab.getAttribute('data-tab');
          if (tabName.startsWith('design-')) {
            showDesignTab(tabName);
          } else if (tabName.startsWith('research-')) {
            showResearchTab(tabName);
          } else if (tabName.startsWith('colleagues-')) {
            showColleaguesTab(tabName);
          } else if (tabName.startsWith('newsevents-')) {
            showNewsEventsTab(tabName);
          } else {
            // Handle other tabs
            showGetInvolvedTab(tabName);
            showMediaTab(tabName);
            showEducationTab(tabName);
          }
        });
      });

      function showDesignTab(tabName) {
        // Hide all design tabs
        document.querySelectorAll('.get-involved-content').forEach(content => {
          content.classList.remove('active');
        });
        document.querySelectorAll('.get-involved-tab').forEach(tab => {
          tab.classList.remove('active');
        });

        // Show selected tab
        document.getElementById(tabName + 'Tab').classList.add('active');
        document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');
        currentDesignTab = tabName;

        // Load data for the tab
        switch(tabName) {
          case 'design-all':
            loadDesignProjects();
            break;
          case 'design-academic':
            loadAcademicProjects();
            break;
          case 'design-professional':
            loadProfessionalProjects();
            break;
          case 'design-competition':
            loadCompetitionProjects();
            break;
        }
      }

      // ===== ADDITIONAL FUNCTIONS FROM SCRIPT 2 =====

      // Initialize all event listeners
      function initializeEventListeners() {
        // Refresh buttons initialization with null checks
        const refreshNewsEventsBtn = document.getElementById('refreshNewsEvents');
        if (refreshNewsEventsBtn) {
          refreshNewsEventsBtn.onclick = () => {
            loadNewsEventsStats();
            showNewsEventsTab(currentNewsEventsTab);
          };
        }

        const refreshDesignBtn = document.getElementById('refreshDesign');
        if (refreshDesignBtn) {
          refreshDesignBtn.onclick = () => {
            loadDesignStats();
            showDesignTab(currentDesignTab);
          };
        }

        const refreshResearchBtn = document.getElementById('refreshResearch');
        if (refreshResearchBtn) {
          refreshResearchBtn.onclick = () => {
            loadResearchStats();
            showResearchTab(currentResearchTab);
          };
        }

        // Other existing refresh buttons
        const refreshBtn = document.getElementById('refreshBtn');
        if (refreshBtn) refreshBtn.onclick = loadItems;
        
        const refreshContact = document.getElementById('refreshContact');
        if (refreshContact) refreshContact.onclick = loadContactData;
        
        const refreshGetInvolved = document.getElementById('refreshGetInvolved');
        if (refreshGetInvolved) refreshGetInvolved.onclick = () => showGetInvolvedTab(currentGetInvolvedTab);
        
        const refreshMedia = document.getElementById('refreshMedia');
        if (refreshMedia) refreshMedia.onclick = () => showMediaTab(currentMediaTab);
        
        const refreshEducation = document.getElementById('refreshEducation');
        if (refreshEducation) refreshEducation.onclick = () => showEducationTab(currentEducationTab);
        
        const refreshColleagues = document.getElementById('refreshColleagues');
        if (refreshColleagues) refreshColleagues.onclick = () => showColleaguesTab(currentColleaguesTab);
      }

      // Colleagues tab management
      function showColleaguesTab(tabName) {
        document.querySelectorAll('.get-involved-content').forEach(content => {
          content.classList.remove('active');
        });
        document.querySelectorAll('.get-involved-tab').forEach(tab => {
          tab.classList.remove('active');
        });

        document.getElementById(tabName + 'Tab').classList.add('active');
        document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');
        currentColleaguesTab = tabName;

        // Load data for the tab
        switch(tabName) {
          case 'colleagues-contacts':
            loadColleaguesContacts();
            break;
          case 'colleagues-team':
            loadTeamMembers();
            break;
          case 'colleagues-initiatives':
            loadInitiatives();
            break;
        }
      }

      // Placeholder functions for other sections
      async function loadColleaguesStats() {
        // Placeholder for colleagues stats
      }

      async function loadColleaguesContacts() {
        document.getElementById('colleaguesContactsList').innerHTML = '<p style="text-align: center; color: var(--text-muted); padding: 2rem;">Loading colleagues contacts...</p>';
      }

      async function loadTeamMembers() {
        document.getElementById('teamMembersList').innerHTML = '<p style="text-align: center; color: var(--text-muted); padding: 2rem;">Loading team members...</p>';
      }

      async function loadInitiatives() {
        document.getElementById('initiativesList').innerHTML = '<p style="text-align: center; color: var(--text-muted); padding: 2rem;">Loading initiatives...</p>';
      }

      // Refresh buttons from Script 1
      document.getElementById('refreshBtn').onclick = loadItems;
      document.getElementById('refreshSubmissions').onclick = loadContactSubmissions;
      document.getElementById('refreshGetInvolved').onclick = () => {
        showGetInvolvedTab(currentGetInvolvedTab);
      };
      document.getElementById('refreshMedia').onclick = () => {
        loadMediaStats();
        showMediaTab(currentMediaTab);
      };
      document.getElementById('refreshEducation').onclick = () => {
        loadEducationStats();
        showEducationTab(currentEducationTab);
      };

      // Logout
      document.getElementById('logoutBtn').onclick = () => { 
        authToken = null; 
        localStorage.removeItem('aspire_token'); 
        dashboard.classList.add('hidden'); 
        loginScreen.classList.remove('hidden'); 
      };

      async function showDashboard() {
        loginScreen.classList.add('hidden');
        dashboard.classList.remove('hidden');
        authToken = localStorage.getItem('aspire_token');
        
        if (!authToken) {
          showLogin();
          return;
        }
        
        await loadDashboardData();
        initializeEventListeners(); // Initialize event listeners after dashboard loads
      }

      // Auto show if token present
      if (localStorage.getItem('aspire_token')) { 
        showDashboard(); 
      } else {
        // Initialize event listeners for login screen
        initializeEventListeners();
      }
    </script>
</body> 
</html>